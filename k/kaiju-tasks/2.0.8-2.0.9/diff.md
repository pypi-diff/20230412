# Comparing `tmp/kaiju_tasks-2.0.8-py3-none-any.whl.zip` & `tmp/kaiju_tasks-2.0.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,22 +1,22 @@
-Zip file size: 21274 bytes, number of entries: 20
--rw-r--r--  2.0 unx      151 b- defN 23-Mar-15 13:00 kaiju_tasks/__init__.py
--rw-r--r--  2.0 unx     5135 b- defN 23-Mar-15 13:00 kaiju_tasks/etc.py
--rw-r--r--  2.0 unx     7521 b- defN 23-Mar-15 13:00 kaiju_tasks/executor.py
--rw-r--r--  2.0 unx     1290 b- defN 23-Mar-15 13:00 kaiju_tasks/fixtures.py
--rw-r--r--  2.0 unx     6119 b- defN 23-Mar-15 13:00 kaiju_tasks/interface.py
--rw-r--r--  2.0 unx    18319 b- defN 23-Mar-15 13:00 kaiju_tasks/manager.py
--rw-r--r--  2.0 unx     1687 b- defN 23-Mar-15 13:00 kaiju_tasks/notifications.py
--rw-r--r--  2.0 unx      191 b- defN 23-Mar-15 13:00 kaiju_tasks/services.py
--rw-r--r--  2.0 unx     4164 b- defN 23-Mar-15 13:00 kaiju_tasks/tables.py
--rw-r--r--  2.0 unx       38 b- defN 23-Mar-15 13:00 kaiju_tasks/tasks_gui/__init__.py
--rw-r--r--  2.0 unx     2011 b- defN 23-Mar-15 13:00 kaiju_tasks/tasks_gui/models.py
--rw-r--r--  2.0 unx     4272 b- defN 23-Mar-15 13:00 kaiju_tasks/tasks_gui/service.py
--rw-r--r--  2.0 unx      350 b- defN 23-Mar-15 13:00 kaiju_tasks/tasks_gui/validators.py
--rw-r--r--  2.0 unx       42 b- defN 23-Mar-15 13:00 kaiju_tasks/tests/__init__.py
--rw-r--r--  2.0 unx    11345 b- defN 23-Mar-15 13:00 kaiju_tasks/tests/test_task_management.py
--rw-rw-rw-  2.0 unx      610 b- defN 23-Mar-15 13:01 kaiju_tasks-2.0.8.dist-info/LICENSE
--rw-r--r--  2.0 unx     2914 b- defN 23-Mar-15 13:01 kaiju_tasks-2.0.8.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-15 13:01 kaiju_tasks-2.0.8.dist-info/WHEEL
--rw-r--r--  2.0 unx       12 b- defN 23-Mar-15 13:01 kaiju_tasks-2.0.8.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1661 b- defN 23-Mar-15 13:01 kaiju_tasks-2.0.8.dist-info/RECORD
-20 files, 67924 bytes uncompressed, 18562 bytes compressed:  72.7%
+Zip file size: 21275 bytes, number of entries: 20
+-rw-r--r--  2.0 unx      151 b- defN 23-Apr-11 19:51 kaiju_tasks/__init__.py
+-rw-r--r--  2.0 unx     5135 b- defN 23-Apr-11 19:51 kaiju_tasks/etc.py
+-rw-r--r--  2.0 unx     7521 b- defN 23-Apr-11 19:51 kaiju_tasks/executor.py
+-rw-r--r--  2.0 unx     1290 b- defN 23-Apr-11 19:51 kaiju_tasks/fixtures.py
+-rw-r--r--  2.0 unx     6119 b- defN 23-Apr-11 19:51 kaiju_tasks/interface.py
+-rw-r--r--  2.0 unx    18229 b- defN 23-Apr-11 19:51 kaiju_tasks/manager.py
+-rw-r--r--  2.0 unx     1687 b- defN 23-Apr-11 19:51 kaiju_tasks/notifications.py
+-rw-r--r--  2.0 unx      191 b- defN 23-Apr-11 19:51 kaiju_tasks/services.py
+-rw-r--r--  2.0 unx     4164 b- defN 23-Apr-11 19:51 kaiju_tasks/tables.py
+-rw-r--r--  2.0 unx       38 b- defN 23-Apr-11 19:51 kaiju_tasks/tasks_gui/__init__.py
+-rw-r--r--  2.0 unx     2011 b- defN 23-Apr-11 19:51 kaiju_tasks/tasks_gui/models.py
+-rw-r--r--  2.0 unx     4272 b- defN 23-Apr-11 19:51 kaiju_tasks/tasks_gui/service.py
+-rw-r--r--  2.0 unx      350 b- defN 23-Apr-11 19:51 kaiju_tasks/tasks_gui/validators.py
+-rw-r--r--  2.0 unx       42 b- defN 23-Apr-11 19:51 kaiju_tasks/tests/__init__.py
+-rw-r--r--  2.0 unx    11345 b- defN 23-Apr-11 19:51 kaiju_tasks/tests/test_task_management.py
+-rw-rw-rw-  2.0 unx      610 b- defN 23-Apr-11 19:52 kaiju_tasks-2.0.9.dist-info/LICENSE
+-rw-r--r--  2.0 unx     2914 b- defN 23-Apr-11 19:52 kaiju_tasks-2.0.9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-11 19:52 kaiju_tasks-2.0.9.dist-info/WHEEL
+-rw-r--r--  2.0 unx       12 b- defN 23-Apr-11 19:52 kaiju_tasks-2.0.9.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1661 b- defN 23-Apr-11 19:52 kaiju_tasks-2.0.9.dist-info/RECORD
+20 files, 67834 bytes uncompressed, 18563 bytes compressed:  72.6%
```

## zipnote {}

```diff
@@ -39,23 +39,23 @@
 
 Filename: kaiju_tasks/tests/__init__.py
 Comment: 
 
 Filename: kaiju_tasks/tests/test_task_management.py
 Comment: 
 
-Filename: kaiju_tasks-2.0.8.dist-info/LICENSE
+Filename: kaiju_tasks-2.0.9.dist-info/LICENSE
 Comment: 
 
-Filename: kaiju_tasks-2.0.8.dist-info/METADATA
+Filename: kaiju_tasks-2.0.9.dist-info/METADATA
 Comment: 
 
-Filename: kaiju_tasks-2.0.8.dist-info/WHEEL
+Filename: kaiju_tasks-2.0.9.dist-info/WHEEL
 Comment: 
 
-Filename: kaiju_tasks-2.0.8.dist-info/top_level.txt
+Filename: kaiju_tasks-2.0.9.dist-info/top_level.txt
 Comment: 
 
-Filename: kaiju_tasks-2.0.8.dist-info/RECORD
+Filename: kaiju_tasks-2.0.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## kaiju_tasks/__init__.py

```diff
@@ -1,7 +1,7 @@
 from .etc import *
 from .tables import *
 from .services import *
 
-__version__ = '2.0.8'
+__version__ = '2.0.9'
 __python_version__ = '3.8'
 __author__ = 'antonnidhoggr@me.com'
```

## kaiju_tasks/manager.py

```diff
@@ -8,14 +8,15 @@
 import sqlalchemy as sa  # noqa pycharm
 from croniter import croniter  # noqa pycharm
 
 from kaiju_db.services import DatabaseService
 from kaiju_redis import RedisTransportService
 from kaiju_tools.streams import Listener, Topics
 from kaiju_tools.rpc import AbstractRPCCompatible
+from kaiju_tools.rpc.etc import JSONRPCHeaders
 from kaiju_tools.services import ContextableService
 
 from .etc import Task, TaskStatus, RestartPolicy, Notification, Limit, ExecutorTask, ExitCode
 from .notifications import NotificationService
 from .tables import tasks
 
 __all__ = ['TaskManager']
@@ -422,30 +423,27 @@
                 ]
                 sql.__len__ = lambda: 1  # TODO: alchemy compatibility ?
                 await conn.execute(sql, cron_tasks)
             await conn.commit()
 
     async def _send_tasks(self, queued_tasks: List[Task]):
         """Send tasks to executor streams."""
-        queue = defaultdict(list)
         for task in queued_tasks:
             stage = task['stage']
-            queue[task['app']].append(
-                {
-                    'id': None,
-                    'method': 'executor.run_task',
-                    'params': {
-                        'data': ExecutorTask(
-                            id=task['id'],
-                            commands=task['commands'][stage:],
-                            kws=task['kws'],
-                            result=task['result'][:stage],
-                            exec_deadline=task['exec_deadline'],
-                            stage=stage,
-                            stages=len(task['commands']),
-                            job_id=task['job_id'],
-                        )
-                    },
-                }
+            await self._stream.call(
+                topic=self._executor_topic,
+                namespace=task['app'],
+                method='executor.run_task',
+                headers={JSONRPCHeaders.CORRELATION_ID_HEADER: task['job_id']},
+                params={
+                    'data': ExecutorTask(
+                        id=task['id'],
+                        commands=task['commands'][stage:],
+                        kws=task['kws'],
+                        result=task['result'][:stage],
+                        exec_deadline=task['exec_deadline'],
+                        stage=stage,
+                        stages=len(task['commands']),
+                        job_id=task['job_id'],
+                    )
+                },
             )
-        for app, params in queue.items():
-            await self._stream.call_multiple(params, topic=self._executor_topic, namespace=app)
```

## Comparing `kaiju_tasks-2.0.8.dist-info/LICENSE` & `kaiju_tasks-2.0.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `kaiju_tasks-2.0.8.dist-info/METADATA` & `kaiju_tasks-2.0.9.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: kaiju-tasks
-Version: 2.0.8
+Version: 2.0.9
 Summary: Service and user task management
 Home-page: https://gitlab.com/kaiju-python/kaiju-tasks
 Author: antonnidhoggr@me.com
 Author-email: antonnidhoggr@me.com
 License: Apache Software License 2.0
 Classifier: Development Status :: 3 - Alpha
 Classifier: License :: OSI Approved :: Apache Software License
```

## Comparing `kaiju_tasks-2.0.8.dist-info/RECORD` & `kaiju_tasks-2.0.9.dist-info/RECORD`

 * *Files 10% similar despite different names*

```diff
@@ -1,20 +1,20 @@
-kaiju_tasks/__init__.py,sha256=jtScSxz6bFwN8ty0NM0brr3SXBeElR0XbQPNm7b8NMw,151
+kaiju_tasks/__init__.py,sha256=clMFmKJtWqqeuRbkLFq0-FkWSNTIxZVuMsV29fqyVrM,151
 kaiju_tasks/etc.py,sha256=fPwM7jthxYb8Wd0GjmgVo9vKEyrnDW5VPeApT06xk-0,5135
 kaiju_tasks/executor.py,sha256=wm-1fWg9KAy41ZBNnahXk4J8Vc8b46kQS83cMlnDym0,7521
 kaiju_tasks/fixtures.py,sha256=EBpjAZ9_nfbMV0DpkcpQoFbw3RsELFuSXBVm-zMPCOk,1290
 kaiju_tasks/interface.py,sha256=HKolfpwlRaVg9ZTJvsxDkYLX37EX8AOtB-AzBSvyWIk,6119
-kaiju_tasks/manager.py,sha256=K1sVz8tqMNSQPOYdSAiuDvdLJTmhQ9gZsUg4F7LJQSQ,18319
+kaiju_tasks/manager.py,sha256=C9mioQUJF1fysylT0GUZVRhvjwN5CTeJ9nQFN0BqGKM,18229
 kaiju_tasks/notifications.py,sha256=z7mluYiJFCpFjyddxZ82HkhgRyxgePT6PSdQ0p1D0v8,1687
 kaiju_tasks/services.py,sha256=mudNyQmrgekIw-Ig7lqMktb2UlbCGjBIX2I0nkz9O8I,191
 kaiju_tasks/tables.py,sha256=mWR4NHSALlHX1s96079MwenNrEkXcCVdLSFK8L_3sA8,4164
 kaiju_tasks/tasks_gui/__init__.py,sha256=_gDfM5r8uxCvydv3NOUN21imwJW_NW9R16UXWExQAE8,38
 kaiju_tasks/tasks_gui/models.py,sha256=iXqYnYYh8TJ7jkVxyEmMeykfpmoNfEfEERW-1jwzjsk,2011
 kaiju_tasks/tasks_gui/service.py,sha256=_qCURg-h6I9OI5uZdTGYCzJglXPXomcqAt6D7ODLRmU,4272
 kaiju_tasks/tasks_gui/validators.py,sha256=QybfHwKMWJq9AcGlXO7F5fuEGLssjHN2jcAV0UI6FPc,350
 kaiju_tasks/tests/__init__.py,sha256=WlPruePOcaMi5ikqn6GheE1Z-zYcysb9M1dj6SteWGY,42
 kaiju_tasks/tests/test_task_management.py,sha256=WkN0lAyStIogQxJPyvlYDEY7XcYi5XK-RmQbf6oHCi8,11345
-kaiju_tasks-2.0.8.dist-info/LICENSE,sha256=XIlN2qA8UqpBDA-PteoYP4hTU0qBW0G9PRB__khO2zc,610
-kaiju_tasks-2.0.8.dist-info/METADATA,sha256=Ssb5pcv-fDZDM-dhuSsR6zNmyUi_9I5FHOhPmEH3fAI,2914
-kaiju_tasks-2.0.8.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
-kaiju_tasks-2.0.8.dist-info/top_level.txt,sha256=QyLogqOVVajJlalq6RfikGx5VGn_lLeTANJEsfZZlM0,12
-kaiju_tasks-2.0.8.dist-info/RECORD,,
+kaiju_tasks-2.0.9.dist-info/LICENSE,sha256=XIlN2qA8UqpBDA-PteoYP4hTU0qBW0G9PRB__khO2zc,610
+kaiju_tasks-2.0.9.dist-info/METADATA,sha256=NgZnnyUAIiE4EVjzcFtI7_jEd5VygNXG2qxZYtJ-VBY,2914
+kaiju_tasks-2.0.9.dist-info/WHEEL,sha256=pkctZYzUS4AYVn6dJ-7367OJZivF2e8RA9b_ZBjif18,92
+kaiju_tasks-2.0.9.dist-info/top_level.txt,sha256=QyLogqOVVajJlalq6RfikGx5VGn_lLeTANJEsfZZlM0,12
+kaiju_tasks-2.0.9.dist-info/RECORD,,
```

