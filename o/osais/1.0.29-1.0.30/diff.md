# Comparing `tmp/osais-1.0.29.tar.gz` & `tmp/osais-1.0.30.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "D:\Websites\opensourceais\python\osais\dist\.tmp-9p72m2dr\osais-1.0.29.tar", last modified: Wed Apr  5 19:44:11 2023, max compression
+gzip compressed data, was "D:\Websites\opensourceais\python\lib_osais\dist\.tmp-xnn7tmf4\osais-1.0.30.tar", last modified: Wed Apr 12 13:11:51 2023, max compression
```

## Comparing `osais-1.0.29.tar` & `osais-1.0.30.tar`

### file list

```diff
@@ -1,16 +1,16 @@
-drwxrwxrwx   0        0        0        0 2023-04-05 19:44:11.895103 osais-1.0.29/
--rw-rw-rw-   0        0        0    33041 2023-04-05 11:19:20.000000 osais-1.0.29/LICENSE
--rw-rw-rw-   0        0        0     1113 2023-04-05 19:44:11.895103 osais-1.0.29/PKG-INFO
--rw-rw-rw-   0        0        0      339 2023-04-05 15:00:45.000000 osais-1.0.29/README.md
-drwxrwxrwx   0        0        0        0 2023-04-05 19:44:11.890092 osais-1.0.29/osais/
--rw-rw-rw-   0        0        0      618 2023-04-05 19:42:46.000000 osais-1.0.29/osais/__init__.py
--rw-rw-rw-   0        0        0    40846 2023-04-05 19:44:01.000000 osais-1.0.29/osais/osais.py
-drwxrwxrwx   0        0        0        0 2023-04-05 19:44:11.894104 osais-1.0.29/osais.egg-info/
--rw-rw-rw-   0        0        0     1113 2023-04-05 19:44:11.000000 osais-1.0.29/osais.egg-info/PKG-INFO
--rw-rw-rw-   0        0        0      218 2023-04-05 19:44:11.000000 osais-1.0.29/osais.egg-info/SOURCES.txt
--rw-rw-rw-   0        0        0        1 2023-04-05 19:44:11.000000 osais-1.0.29/osais.egg-info/dependency_links.txt
--rw-rw-rw-   0        0        0       65 2023-04-05 19:44:11.000000 osais-1.0.29/osais.egg-info/requires.txt
--rw-rw-rw-   0        0        0        6 2023-04-05 19:44:11.000000 osais-1.0.29/osais.egg-info/top_level.txt
--rw-rw-rw-   0        0        0       95 2023-04-05 18:53:17.000000 osais-1.0.29/pyproject.toml
--rw-rw-rw-   0        0        0       42 2023-04-05 19:44:11.895103 osais-1.0.29/setup.cfg
--rw-rw-rw-   0        0        0     1124 2023-04-05 19:42:36.000000 osais-1.0.29/setup.py
+drwxrwxrwx   0        0        0        0 2023-04-12 13:11:51.779500 osais-1.0.30/
+-rw-rw-rw-   0        0        0    33041 2023-04-05 11:19:20.000000 osais-1.0.30/LICENSE
+-rw-rw-rw-   0        0        0     1113 2023-04-12 13:11:51.778501 osais-1.0.30/PKG-INFO
+-rw-rw-rw-   0        0        0      339 2023-04-05 15:00:45.000000 osais-1.0.30/README.md
+drwxrwxrwx   0        0        0        0 2023-04-12 13:11:51.774501 osais-1.0.30/osais/
+-rw-rw-rw-   0        0        0      618 2023-04-05 19:42:46.000000 osais-1.0.30/osais/__init__.py
+-rw-rw-rw-   0        0        0    40972 2023-04-12 13:11:40.000000 osais-1.0.30/osais/osais.py
+drwxrwxrwx   0        0        0        0 2023-04-12 13:11:51.777500 osais-1.0.30/osais.egg-info/
+-rw-rw-rw-   0        0        0     1113 2023-04-12 13:11:51.000000 osais-1.0.30/osais.egg-info/PKG-INFO
+-rw-rw-rw-   0        0        0      218 2023-04-12 13:11:51.000000 osais-1.0.30/osais.egg-info/SOURCES.txt
+-rw-rw-rw-   0        0        0        1 2023-04-12 13:11:51.000000 osais-1.0.30/osais.egg-info/dependency_links.txt
+-rw-rw-rw-   0        0        0       65 2023-04-12 13:11:51.000000 osais-1.0.30/osais.egg-info/requires.txt
+-rw-rw-rw-   0        0        0        6 2023-04-12 13:11:51.000000 osais-1.0.30/osais.egg-info/top_level.txt
+-rw-rw-rw-   0        0        0       95 2023-04-05 18:53:17.000000 osais-1.0.30/pyproject.toml
+-rw-rw-rw-   0        0        0       42 2023-04-12 13:11:51.779500 osais-1.0.30/setup.cfg
+-rw-rw-rw-   0        0        0     1124 2023-04-12 13:11:30.000000 osais-1.0.30/setup.py
```

### Comparing `osais-1.0.29/LICENSE` & `osais-1.0.30/LICENSE`

 * *Files identical despite different names*

### Comparing `osais-1.0.29/PKG-INFO` & `osais-1.0.30/PKG-INFO`

 * *Files 24% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: osais
-Version: 1.0.29
+Version: 1.0.30
 Summary: The osais Python lib for connecting AIs to OSAIS cloud
 Home-page: https://github.com/incubiq/osais
 Author: incubiq
 Author-email: eric@incubiq.com
 Keywords: osais,opensourceais
 Classifier: Development Status :: 3 - Alpha
 Classifier: Intended Audience :: Developers
```

### Comparing `osais-1.0.29/osais/__init__.py` & `osais-1.0.30/osais/__init__.py`

 * *Files identical despite different names*

### Comparing `osais-1.0.29/osais/osais.py` & `osais-1.0.30/osais/osais.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,9 +1,9 @@
 00000000: 0d0a 5f5f 7665 7273 696f 6e5f 5f3d 2231  ..__version__="1
-00000010: 2e30 2e31 3822 0d0a 0d0a 2323 203d 3d3d  .0.18"....## ===
+00000010: 2e30 2e33 3022 0d0a 0d0a 2323 203d 3d3d  .0.30"....## ===
 00000020: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000030: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000040: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000050: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
 00000060: 3d3d 3d3d 3d0d 0a23 2320 0d0a 2323 2020  =====..## ..##  
 00000070: 2020 2020 2020 2020 2020 2020 2020 2020                  
 00000080: 2020 2020 5574 696c 6974 6965 7320 7374      Utilities st
@@ -1070,1484 +1070,1492 @@
 000042d0: 6e65 223a 2067 6574 5f6d 6163 6869 6e65  ne": get_machine
 000042e0: 5f6e 616d 6528 292c 0d0a 2020 2020 2020  _name(),..      
 000042f0: 2020 2269 7022 3a20 5f69 702c 0d0a 2020    "ip": _ip,..  
 00004300: 2020 2020 2020 2270 6f72 7422 3a20 6750        "port": gP
 00004310: 6f72 7441 492c 0d0a 2020 2020 2020 2020  ortAI,..        
 00004320: 2265 6e67 696e 6522 3a20 5f6a 736f 6e0d  "engine": _json.
 00004330: 0a20 2020 207d 0d0a 0d0a 2323 2050 5542  .    }....## PUB
-00004340: 4c49 4320 2d20 6c6f 6164 2074 6865 2063  LIC - load the c
-00004350: 6f6e 6669 6720 6f66 2074 6869 7320 4149  onfig of this AI
-00004360: 0d0a 6465 6620 6f73 6169 735f 6c6f 6164  ..def osais_load
-00004370: 436f 6e66 6967 285f 6e61 6d65 293a 200d  Config(_name): .
-00004380: 0a20 2020 2072 6574 7572 6e20 5f6c 6f61  .    return _loa
-00004390: 6443 6f6e 6669 6728 5f6e 616d 6529 0d0a  dConfig(_name)..
-000043a0: 0d0a 2323 2050 5542 4c49 4320 2d20 4765  ..## PUBLIC - Ge
-000043b0: 7420 656e 7620 6672 6f6d 2066 696c 6520  t env from file 
-000043c0: 286c 6f63 616c 206f 7220 646f 636b 6572  (local or docker
-000043d0: 290d 0a64 6566 206f 7361 6973 5f67 6574  )..def osais_get
-000043e0: 456e 7628 5f66 696c 656e 616d 6529 3a0d  Env(_filename):.
-000043f0: 0a20 2020 2067 6c6f 6261 6c20 6755 7365  .    global gUse
-00004400: 726e 616d 650d 0a20 2020 2067 6c6f 6261  rname..    globa
-00004410: 6c20 6749 7356 6972 7475 616c 4149 0d0a  l gIsVirtualAI..
-00004420: 2020 2020 676c 6f62 616c 2067 4973 4c6f      global gIsLo
-00004430: 6361 6c0d 0a20 2020 2067 6c6f 6261 6c20  cal..    global 
-00004440: 674e 616d 650d 0a0d 0a20 2020 2023 2320  gName....    ## 
-00004450: 7265 6164 2065 6e76 2066 726f 6d20 636f  read env from co
-00004460: 6e66 6967 2066 696c 650d 0a20 2020 2077  nfig file..    w
-00004470: 6974 6820 6f70 656e 285f 6669 6c65 6e61  ith open(_filena
-00004480: 6d65 2c20 2272 2229 2061 7320 663a 0d0a  me, "r") as f:..
-00004490: 2020 2020 2020 2020 636f 6e74 656e 7420          content 
-000044a0: 3d20 662e 7265 6164 2829 0d0a 2020 2020  = f.read()..    
-000044b0: 7661 7269 6162 6c65 7320 3d20 636f 6e74  variables = cont
-000044c0: 656e 742e 7370 6c69 7428 225c 6e22 290d  ent.split("\n").
-000044d0: 0a20 2020 2066 6f72 2076 6172 2069 6e20  .    for var in 
-000044e0: 7661 7269 6162 6c65 733a 0d0a 2020 2020  variables:..    
-000044f0: 2020 2020 6966 2076 6172 213d 2222 3a0d      if var!="":.
-00004500: 0a20 2020 2020 2020 2020 2020 206b 6579  .            key
-00004510: 2c20 7661 6c75 6520 3d20 7661 722e 7370  , value = var.sp
-00004520: 6c69 7428 223d 2229 0d0a 2020 2020 2020  lit("=")..      
-00004530: 2020 2020 2020 6966 206b 6579 203d 3d20        if key == 
-00004540: 2255 5345 524e 414d 4522 3a0d 0a20 2020  "USERNAME":..   
-00004550: 2020 2020 2020 2020 2020 2020 2067 5573               gUs
-00004560: 6572 6e61 6d65 203d 2076 616c 7565 0d0a  ername = value..
-00004570: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00004580: 206b 6579 203d 3d20 2249 535f 4c4f 4341   key == "IS_LOCA
-00004590: 4c22 3a0d 0a20 2020 2020 2020 2020 2020  L":..           
-000045a0: 2020 2020 2067 4973 4c6f 6361 6c20 3d20       gIsLocal = 
-000045b0: 2876 616c 7565 3d3d 2254 7275 6522 290d  (value=="True").
-000045c0: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
-000045d0: 6620 6b65 7920 3d3d 2022 4953 5f56 4952  f key == "IS_VIR
-000045e0: 5455 414c 4149 223a 0d0a 2020 2020 2020  TUALAI":..      
-000045f0: 2020 2020 2020 2020 2020 6749 7356 6972            gIsVir
-00004600: 7475 616c 4149 203d 2028 7661 6c75 653d  tualAI = (value=
-00004610: 3d22 5472 7565 2229 0d0a 2020 2020 2020  ="True")..      
-00004620: 2020 2020 2020 656c 6966 206b 6579 203d        elif key =
-00004630: 3d20 2245 4e47 494e 4522 3a0d 0a20 2020  = "ENGINE":..   
-00004640: 2020 2020 2020 2020 2020 2020 2067 4e61               gNa
-00004650: 6d65 203d 2076 616c 7565 0d0a 2020 2020  me = value..    
-00004660: 7265 7475 726e 207b 0d0a 2020 2020 2020  return {..      
-00004670: 2020 2275 7365 726e 616d 6522 3a20 6755    "username": gU
-00004680: 7365 726e 616d 652c 0d0a 2020 2020 2020  sername,..      
-00004690: 2020 2269 734c 6f63 616c 223a 2067 4973    "isLocal": gIs
-000046a0: 4c6f 6361 6c2c 0d0a 2020 2020 2020 2020  Local,..        
-000046b0: 2269 7356 6972 7475 616c 4149 223a 2067  "isVirtualAI": g
-000046c0: 4973 5669 7274 7561 6c41 492c 0d0a 2020  IsVirtualAI,..  
-000046d0: 2020 2020 2020 226e 616d 6522 3a20 674e        "name": gN
-000046e0: 616d 650d 0a20 2020 207d 0d0a 0d0a 2323  ame..    }....##
-000046f0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00004700: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004710: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004720: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004730: 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020  ---------..#    
-00004740: 2020 2063 6f73 7420 6361 6c63 756c 6174     cost calculat
-00004750: 696f 6e0d 0a23 2320 2d2d 2d2d 2d2d 2d2d  ion..## --------
+00004340: 4c49 4320 2d20 6172 6520 7765 2072 756e  LIC - are we run
+00004350: 6e69 6e67 206c 6f63 616c 6c79 3f0d 0a64  ning locally?..d
+00004360: 6566 206f 7361 6973 5f69 734c 6f63 616c  ef osais_isLocal
+00004370: 2829 3a0d 0a20 2020 2067 6c6f 6261 6c20  ():..    global 
+00004380: 6749 734c 6f63 616c 0d0a 2020 2020 7265  gIsLocal..    re
+00004390: 7475 726e 2067 4973 4c6f 6361 6c0d 0a0d  turn gIsLocal...
+000043a0: 0a23 2320 5055 424c 4943 202d 206c 6f61  .## PUBLIC - loa
+000043b0: 6420 7468 6520 636f 6e66 6967 206f 6620  d the config of 
+000043c0: 7468 6973 2041 490d 0a64 6566 206f 7361  this AI..def osa
+000043d0: 6973 5f6c 6f61 6443 6f6e 6669 6728 5f6e  is_loadConfig(_n
+000043e0: 616d 6529 3a20 0d0a 2020 2020 7265 7475  ame): ..    retu
+000043f0: 726e 205f 6c6f 6164 436f 6e66 6967 285f  rn _loadConfig(_
+00004400: 6e61 6d65 290d 0a0d 0a23 2320 5055 424c  name)....## PUBL
+00004410: 4943 202d 2047 6574 2065 6e76 2066 726f  IC - Get env fro
+00004420: 6d20 6669 6c65 2028 6c6f 6361 6c20 6f72  m file (local or
+00004430: 2064 6f63 6b65 7229 0d0a 6465 6620 6f73   docker)..def os
+00004440: 6169 735f 6765 7445 6e76 285f 6669 6c65  ais_getEnv(_file
+00004450: 6e61 6d65 293a 0d0a 2020 2020 676c 6f62  name):..    glob
+00004460: 616c 2067 5573 6572 6e61 6d65 0d0a 2020  al gUsername..  
+00004470: 2020 676c 6f62 616c 2067 4973 5669 7274    global gIsVirt
+00004480: 7561 6c41 490d 0a20 2020 2067 6c6f 6261  ualAI..    globa
+00004490: 6c20 6749 734c 6f63 616c 0d0a 2020 2020  l gIsLocal..    
+000044a0: 676c 6f62 616c 2067 4e61 6d65 0d0a 0d0a  global gName....
+000044b0: 2020 2020 2323 2072 6561 6420 656e 7620      ## read env 
+000044c0: 6672 6f6d 2063 6f6e 6669 6720 6669 6c65  from config file
+000044d0: 0d0a 2020 2020 7769 7468 206f 7065 6e28  ..    with open(
+000044e0: 5f66 696c 656e 616d 652c 2022 7222 2920  _filename, "r") 
+000044f0: 6173 2066 3a0d 0a20 2020 2020 2020 2063  as f:..        c
+00004500: 6f6e 7465 6e74 203d 2066 2e72 6561 6428  ontent = f.read(
+00004510: 290d 0a20 2020 2076 6172 6961 626c 6573  )..    variables
+00004520: 203d 2063 6f6e 7465 6e74 2e73 706c 6974   = content.split
+00004530: 2822 5c6e 2229 0d0a 2020 2020 666f 7220  ("\n")..    for 
+00004540: 7661 7220 696e 2076 6172 6961 626c 6573  var in variables
+00004550: 3a0d 0a20 2020 2020 2020 2069 6620 7661  :..        if va
+00004560: 7221 3d22 223a 0d0a 2020 2020 2020 2020  r!="":..        
+00004570: 2020 2020 6b65 792c 2076 616c 7565 203d      key, value =
+00004580: 2076 6172 2e73 706c 6974 2822 3d22 290d   var.split("=").
+00004590: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000045a0: 6b65 7920 3d3d 2022 5553 4552 4e41 4d45  key == "USERNAME
+000045b0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+000045c0: 2020 2020 6755 7365 726e 616d 6520 3d20      gUsername = 
+000045d0: 7661 6c75 650d 0a20 2020 2020 2020 2020  value..         
+000045e0: 2020 2065 6c69 6620 6b65 7920 3d3d 2022     elif key == "
+000045f0: 4953 5f4c 4f43 414c 223a 0d0a 2020 2020  IS_LOCAL":..    
+00004600: 2020 2020 2020 2020 2020 2020 6749 734c              gIsL
+00004610: 6f63 616c 203d 2028 7661 6c75 653d 3d22  ocal = (value=="
+00004620: 5472 7565 2229 0d0a 2020 2020 2020 2020  True")..        
+00004630: 2020 2020 656c 6966 206b 6579 203d 3d20      elif key == 
+00004640: 2249 535f 5649 5254 5541 4c41 4922 3a0d  "IS_VIRTUALAI":.
+00004650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004660: 2067 4973 5669 7274 7561 6c41 4920 3d20   gIsVirtualAI = 
+00004670: 2876 616c 7565 3d3d 2254 7275 6522 290d  (value=="True").
+00004680: 0a20 2020 2020 2020 2020 2020 2065 6c69  .            eli
+00004690: 6620 6b65 7920 3d3d 2022 454e 4749 4e45  f key == "ENGINE
+000046a0: 223a 0d0a 2020 2020 2020 2020 2020 2020  ":..            
+000046b0: 2020 2020 674e 616d 6520 3d20 7661 6c75      gName = valu
+000046c0: 650d 0a20 2020 2072 6574 7572 6e20 7b0d  e..    return {.
+000046d0: 0a20 2020 2020 2020 2022 7573 6572 6e61  .        "userna
+000046e0: 6d65 223a 2067 5573 6572 6e61 6d65 2c0d  me": gUsername,.
+000046f0: 0a20 2020 2020 2020 2022 6973 4c6f 6361  .        "isLoca
+00004700: 6c22 3a20 6749 734c 6f63 616c 2c0d 0a20  l": gIsLocal,.. 
+00004710: 2020 2020 2020 2022 6973 5669 7274 7561         "isVirtua
+00004720: 6c41 4922 3a20 6749 7356 6972 7475 616c  lAI": gIsVirtual
+00004730: 4149 2c0d 0a20 2020 2020 2020 2022 6e61  AI,..        "na
+00004740: 6d65 223a 2067 4e61 6d65 0d0a 2020 2020  me": gName..    
+00004750: 7d0d 0a0d 0a23 2320 2d2d 2d2d 2d2d 2d2d  }....## --------
 00004760: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004770: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004780: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000047a0: 0d0a 0d0a 2320 696e 6974 2074 6865 2064  ....# init the d
-000047b0: 6166 6175 6c74 2063 6f73 7420 6172 7261  afault cost arra
-000047c0: 790d 0a64 6566 205f 696e 6974 6961 6c69  y..def _initiali
-000047d0: 7a65 436f 7374 2829 203a 0d0a 2020 2020  zeCost() :..    
-000047e0: 676c 6f62 616c 2067 4465 6661 756c 7443  global gDefaultC
-000047f0: 6f73 740d 0a20 2020 2067 6c6f 6261 6c20  ost..    global 
-00004800: 6761 5072 6f63 6573 7354 696d 650d 0a20  gaProcessTime.. 
-00004810: 2020 2066 726f 6d20 6172 7261 7920 696d     from array im
-00004820: 706f 7274 2061 7272 6179 0d0a 2020 2020  port array..    
-00004830: 6761 5072 6f63 6573 7354 696d 653d 6172  gaProcessTime=ar
-00004840: 7261 7928 2766 272c 205b 6744 6566 6175  ray('f', [gDefau
-00004850: 6c74 436f 7374 2c67 4465 6661 756c 7443  ltCost,gDefaultC
-00004860: 6f73 742c 6744 6566 6175 6c74 436f 7374  ost,gDefaultCost
-00004870: 2c67 4465 6661 756c 7443 6f73 742c 6744  ,gDefaultCost,gD
-00004880: 6566 6175 6c74 436f 7374 2c67 4465 6661  efaultCost,gDefa
-00004890: 756c 7443 6f73 742c 6744 6566 6175 6c74  ultCost,gDefault
-000048a0: 436f 7374 2c67 4465 6661 756c 7443 6f73  Cost,gDefaultCos
-000048b0: 742c 6744 6566 6175 6c74 436f 7374 2c67  t,gDefaultCost,g
-000048c0: 4465 6661 756c 7443 6f73 745d 290d 0a0d  DefaultCost])...
-000048d0: 0a23 2069 6e69 7420 7468 6520 6461 6661  .# init the dafa
-000048e0: 756c 7420 636f 7374 2061 7272 6179 0d0a  ult cost array..
-000048f0: 6465 6620 5f61 6464 436f 7374 285f 636f  def _addCost(_co
-00004900: 7374 2920 3a0d 0a20 2020 2067 6c6f 6261  st) :..    globa
-00004910: 6c20 6749 7357 6172 6d75 700d 0a20 2020  l gIsWarmup..   
-00004920: 2067 6c6f 6261 6c20 6761 5072 6f63 6573   global gaProces
-00004930: 7354 696d 650d 0a20 2020 2069 6620 6749  sTime..    if gI
-00004940: 7357 6172 6d75 703d 3d46 616c 7365 3a0d  sWarmup==False:.
-00004950: 0a20 2020 2020 2020 2067 6150 726f 6365  .        gaProce
-00004960: 7373 5469 6d65 2e69 6e73 6572 7428 302c  ssTime.insert(0,
-00004970: 205f 636f 7374 290d 0a20 2020 2020 2020   _cost)..       
-00004980: 2067 6150 726f 6365 7373 5469 6d65 2e70   gaProcessTime.p
-00004990: 6f70 2829 0d0a 0d0a 2320 696e 6974 2074  op()....# init t
-000049a0: 6865 2064 6166 6175 6c74 2063 6f73 7420  he dafault cost 
-000049b0: 6172 7261 790d 0a64 6566 205f 6765 7441  array..def _getA
-000049c0: 7665 7261 6765 436f 7374 2829 203a 0d0a  verageCost() :..
-000049d0: 2020 2020 676c 6f62 616c 2067 6150 726f      global gaPro
-000049e0: 6365 7373 5469 6d65 0d0a 2020 2020 6176  cessTime..    av
-000049f0: 6572 6167 6520 3d20 7375 6d28 6761 5072  erage = sum(gaPr
-00004a00: 6f63 6573 7354 696d 6529 202f 206c 656e  ocessTime) / len
-00004a10: 2867 6150 726f 6365 7373 5469 6d65 290d  (gaProcessTime).
-00004a20: 0a20 2020 2072 6574 7572 6e20 6176 6572  .    return aver
-00004a30: 6167 650d 0a0d 0a23 2320 2d2d 2d2d 2d2d  age....## ------
-00004a40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004a50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004a60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004a70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004a80: 2d2d 0d0a 2320 2020 2020 2020 6172 6773  --..#       args
-00004a90: 2070 726f 6365 7373 696e 670d 0a23 2320   processing..## 
-00004aa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000047a0: 0d0a 2320 2020 2020 2020 636f 7374 2063  ..#       cost c
+000047b0: 616c 6375 6c61 7469 6f6e 0d0a 2323 202d  alculation..## -
+000047c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000047d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000047e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000047f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004800: 2d2d 2d2d 2d2d 2d0d 0a0d 0a23 2069 6e69  -------....# ini
+00004810: 7420 7468 6520 6461 6661 756c 7420 636f  t the dafault co
+00004820: 7374 2061 7272 6179 0d0a 6465 6620 5f69  st array..def _i
+00004830: 6e69 7469 616c 697a 6543 6f73 7428 2920  nitializeCost() 
+00004840: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6744  :..    global gD
+00004850: 6566 6175 6c74 436f 7374 0d0a 2020 2020  efaultCost..    
+00004860: 676c 6f62 616c 2067 6150 726f 6365 7373  global gaProcess
+00004870: 5469 6d65 0d0a 2020 2020 6672 6f6d 2061  Time..    from a
+00004880: 7272 6179 2069 6d70 6f72 7420 6172 7261  rray import arra
+00004890: 790d 0a20 2020 2067 6150 726f 6365 7373  y..    gaProcess
+000048a0: 5469 6d65 3d61 7272 6179 2827 6627 2c20  Time=array('f', 
+000048b0: 5b67 4465 6661 756c 7443 6f73 742c 6744  [gDefaultCost,gD
+000048c0: 6566 6175 6c74 436f 7374 2c67 4465 6661  efaultCost,gDefa
+000048d0: 756c 7443 6f73 742c 6744 6566 6175 6c74  ultCost,gDefault
+000048e0: 436f 7374 2c67 4465 6661 756c 7443 6f73  Cost,gDefaultCos
+000048f0: 742c 6744 6566 6175 6c74 436f 7374 2c67  t,gDefaultCost,g
+00004900: 4465 6661 756c 7443 6f73 742c 6744 6566  DefaultCost,gDef
+00004910: 6175 6c74 436f 7374 2c67 4465 6661 756c  aultCost,gDefaul
+00004920: 7443 6f73 742c 6744 6566 6175 6c74 436f  tCost,gDefaultCo
+00004930: 7374 5d29 0d0a 0d0a 2320 696e 6974 2074  st])....# init t
+00004940: 6865 2064 6166 6175 6c74 2063 6f73 7420  he dafault cost 
+00004950: 6172 7261 790d 0a64 6566 205f 6164 6443  array..def _addC
+00004960: 6f73 7428 5f63 6f73 7429 203a 0d0a 2020  ost(_cost) :..  
+00004970: 2020 676c 6f62 616c 2067 4973 5761 726d    global gIsWarm
+00004980: 7570 0d0a 2020 2020 676c 6f62 616c 2067  up..    global g
+00004990: 6150 726f 6365 7373 5469 6d65 0d0a 2020  aProcessTime..  
+000049a0: 2020 6966 2067 4973 5761 726d 7570 3d3d    if gIsWarmup==
+000049b0: 4661 6c73 653a 0d0a 2020 2020 2020 2020  False:..        
+000049c0: 6761 5072 6f63 6573 7354 696d 652e 696e  gaProcessTime.in
+000049d0: 7365 7274 2830 2c20 5f63 6f73 7429 0d0a  sert(0, _cost)..
+000049e0: 2020 2020 2020 2020 6761 5072 6f63 6573          gaProces
+000049f0: 7354 696d 652e 706f 7028 290d 0a0d 0a23  sTime.pop()....#
+00004a00: 2069 6e69 7420 7468 6520 6461 6661 756c   init the dafaul
+00004a10: 7420 636f 7374 2061 7272 6179 0d0a 6465  t cost array..de
+00004a20: 6620 5f67 6574 4176 6572 6167 6543 6f73  f _getAverageCos
+00004a30: 7428 2920 3a0d 0a20 2020 2067 6c6f 6261  t() :..    globa
+00004a40: 6c20 6761 5072 6f63 6573 7354 696d 650d  l gaProcessTime.
+00004a50: 0a20 2020 2061 7665 7261 6765 203d 2073  .    average = s
+00004a60: 756d 2867 6150 726f 6365 7373 5469 6d65  um(gaProcessTime
+00004a70: 2920 2f20 6c65 6e28 6761 5072 6f63 6573  ) / len(gaProces
+00004a80: 7354 696d 6529 0d0a 2020 2020 7265 7475  sTime)..    retu
+00004a90: 726e 2061 7665 7261 6765 0d0a 0d0a 2323  rn average....##
+00004aa0: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
 00004ab0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004ac0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004ad0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004ae0: 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a 2320 7768  --------....# wh
-00004af0: 6572 6520 6973 2074 6865 206f 7574 7075  ere is the outpu
-00004b00: 7420 6469 723f 0d0a 6465 6620 5f67 6574  t dir?..def _get
-00004b10: 4f75 7470 7574 4469 7228 293a 0d0a 2020  OutputDir():..  
-00004b20: 2020 676c 6f62 616c 2067 4172 6773 4f53    global gArgsOS
-00004b30: 4149 530d 0a20 2020 2067 6c6f 6261 6c20  AIS..    global 
-00004b40: 674f 7574 7075 7444 6972 0d0a 0d0a 2020  gOutputDir....  
-00004b50: 2020 6966 2067 4172 6773 4f53 4149 5321    if gArgsOSAIS!
-00004b60: 3d4e 6f6e 653a 0d0a 2020 2020 2020 2020  =None:..        
-00004b70: 7265 7475 726e 2067 4172 6773 4f53 4149  return gArgsOSAI
-00004b80: 532e 6f75 7464 6972 0d0a 2020 2020 7265  S.outdir..    re
-00004b90: 7475 726e 2067 4f75 7470 7574 4469 720d  turn gOutputDir.
-00004ba0: 0a0d 0a23 2072 6563 6569 7665 7320 6172  ...# receives ar
-00004bb0: 6773 2066 726f 6d20 7265 7175 6573 7420  gs from request 
-00004bc0: 616e 6420 7075 7420 7468 656d 2069 6e20  and put them in 
-00004bd0: 6120 6172 7261 7920 666f 7220 7072 6f63  a array for proc
-00004be0: 6573 7369 6e67 0d0a 6465 6620 5f67 6574  essing..def _get
-00004bf0: 4172 6773 285f 6172 6773 293a 0d0a 2020  Args(_args):..  
-00004c00: 2020 6152 6573 756c 7420 3d20 5b5d 0d0a    aResult = []..
-00004c10: 2020 2020 666f 7220 6b65 792c 2076 616c      for key, val
-00004c20: 7565 2069 6e20 5f61 7267 732e 6974 656d  ue in _args.item
-00004c30: 7328 293a 0d0a 2020 2020 2020 2020 6966  s():..        if
-00004c40: 206b 6579 2e73 7461 7274 7377 6974 6828   key.startswith(
-00004c50: 222d 2229 3a0d 0a20 2020 2020 2020 2020  "-"):..         
-00004c60: 2020 2061 5265 7375 6c74 2e61 7070 656e     aResult.appen
-00004c70: 6428 6b65 7929 0d0a 2020 2020 2020 2020  d(key)..        
-00004c80: 2020 2020 6152 6573 756c 742e 6170 7065      aResult.appe
-00004c90: 6e64 2876 616c 7565 290d 0a20 2020 2072  nd(value)..    r
-00004ca0: 6574 7572 6e20 6152 6573 756c 740d 0a0d  eturn aResult...
-00004cb0: 0a23 2067 6976 6520 6e65 7720 6172 6773  .# give new args
-00004cc0: 200d 0a64 6566 205f 6172 6773 4672 6f6d   ..def _argsFrom
-00004cd0: 4669 6c74 6572 285f 6f72 6967 696e 616c  Filter(_original
-00004ce0: 4172 6773 2c20 5f61 4669 6c74 6572 2c20  Args, _aFilter, 
-00004cf0: 5f62 4b65 6570 293a 0d0a 2020 2020 6672  _bKeep):..    fr
-00004d00: 6f6d 2077 6572 6b7a 6575 672e 6461 7461  om werkzeug.data
-00004d10: 7374 7275 6374 7572 6573 2069 6d70 6f72  structures impor
-00004d20: 7420 4d75 6c74 6944 6963 740d 0a20 2020  t MultiDict..   
-00004d30: 205f 6469 6374 203d 204d 756c 7469 4469   _dict = MultiDi
-00004d40: 6374 285b 5d29 0d0a 2020 2020 666f 7220  ct([])..    for 
-00004d50: 692c 2061 7267 2069 6e20 656e 756d 6572  i, arg in enumer
-00004d60: 6174 6528 5f6f 7269 6769 6e61 6c41 7267  ate(_originalArg
-00004d70: 7329 3a0d 0a20 2020 2020 2020 2069 6620  s):..        if 
-00004d80: 5f62 4b65 6570 3a0d 0a20 2020 2020 2020  _bKeep:..       
-00004d90: 2020 2020 2069 6620 6172 6720 696e 205f       if arg in _
-00004da0: 6146 696c 7465 7220 616e 6420 6920 3c20  aFilter and i < 
-00004db0: 6c65 6e28 5f6f 7269 6769 6e61 6c41 7267  len(_originalArg
-00004dc0: 7329 202d 2031 3a0d 0a20 2020 2020 2020  s) - 1:..       
-00004dd0: 2020 2020 2020 2020 205f 6469 6374 2e61           _dict.a
-00004de0: 6464 2861 7267 2c20 5f6f 7269 6769 6e61  dd(arg, _origina
-00004df0: 6c41 7267 735b 692b 315d 290d 0a20 2020  lArgs[i+1])..   
-00004e00: 2020 2020 2065 6c73 653a 0d0a 2020 2020       else:..    
-00004e10: 2020 2020 2020 2020 6966 2061 7267 206e          if arg n
-00004e20: 6f74 2069 6e20 5f61 4669 6c74 6572 2061  ot in _aFilter a
-00004e30: 6e64 2069 203c 206c 656e 285f 6f72 6967  nd i < len(_orig
-00004e40: 696e 616c 4172 6773 2920 2d20 313a 0d0a  inalArgs) - 1:..
-00004e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004e60: 5f64 6963 742e 6164 6428 6172 672c 205f  _dict.add(arg, _
-00004e70: 6f72 6967 696e 616c 4172 6773 5b69 2b31  originalArgs[i+1
-00004e80: 5d29 0d0a 2020 2020 0d0a 2020 2020 5f61  ])..    ..    _a
-00004e90: 7267 733d 5f67 6574 4172 6773 285f 6469  rgs=_getArgs(_di
-00004ea0: 6374 290d 0a20 2020 2072 6574 7572 6e20  ct)..    return 
-00004eb0: 5f61 7267 730d 0a0d 0a23 2320 2d2d 2d2d  _args....## ----
-00004ec0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004f00: 2d2d 2d2d 0d0a 2320 2020 2020 2020 5379  ----..#       Sy
-00004f10: 7374 656d 2069 6e66 6f0d 0a23 2320 2d2d  stem info..## --
-00004f20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004ae0: 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020  ---------..#    
+00004af0: 2020 2061 7267 7320 7072 6f63 6573 7369     args processi
+00004b00: 6e67 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d  ng..## ---------
+00004b10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004b20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004b30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004b40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d  ---------------.
+00004b50: 0a0d 0a23 2077 6865 7265 2069 7320 7468  ...# where is th
+00004b60: 6520 6f75 7470 7574 2064 6972 3f0d 0a64  e output dir?..d
+00004b70: 6566 205f 6765 744f 7574 7075 7444 6972  ef _getOutputDir
+00004b80: 2829 3a0d 0a20 2020 2067 6c6f 6261 6c20  ():..    global 
+00004b90: 6741 7267 734f 5341 4953 0d0a 2020 2020  gArgsOSAIS..    
+00004ba0: 676c 6f62 616c 2067 4f75 7470 7574 4469  global gOutputDi
+00004bb0: 720d 0a0d 0a20 2020 2069 6620 6741 7267  r....    if gArg
+00004bc0: 734f 5341 4953 213d 4e6f 6e65 3a0d 0a20  sOSAIS!=None:.. 
+00004bd0: 2020 2020 2020 2072 6574 7572 6e20 6741         return gA
+00004be0: 7267 734f 5341 4953 2e6f 7574 6469 720d  rgsOSAIS.outdir.
+00004bf0: 0a20 2020 2072 6574 7572 6e20 674f 7574  .    return gOut
+00004c00: 7075 7444 6972 0d0a 0d0a 2320 7265 6365  putDir....# rece
+00004c10: 6976 6573 2061 7267 7320 6672 6f6d 2072  ives args from r
+00004c20: 6571 7565 7374 2061 6e64 2070 7574 2074  equest and put t
+00004c30: 6865 6d20 696e 2061 2061 7272 6179 2066  hem in a array f
+00004c40: 6f72 2070 726f 6365 7373 696e 670d 0a64  or processing..d
+00004c50: 6566 205f 6765 7441 7267 7328 5f61 7267  ef _getArgs(_arg
+00004c60: 7329 3a0d 0a20 2020 2061 5265 7375 6c74  s):..    aResult
+00004c70: 203d 205b 5d0d 0a20 2020 2066 6f72 206b   = []..    for k
+00004c80: 6579 2c20 7661 6c75 6520 696e 205f 6172  ey, value in _ar
+00004c90: 6773 2e69 7465 6d73 2829 3a0d 0a20 2020  gs.items():..   
+00004ca0: 2020 2020 2069 6620 6b65 792e 7374 6172       if key.star
+00004cb0: 7473 7769 7468 2822 2d22 293a 0d0a 2020  tswith("-"):..  
+00004cc0: 2020 2020 2020 2020 2020 6152 6573 756c            aResul
+00004cd0: 742e 6170 7065 6e64 286b 6579 290d 0a20  t.append(key).. 
+00004ce0: 2020 2020 2020 2020 2020 2061 5265 7375             aResu
+00004cf0: 6c74 2e61 7070 656e 6428 7661 6c75 6529  lt.append(value)
+00004d00: 0d0a 2020 2020 7265 7475 726e 2061 5265  ..    return aRe
+00004d10: 7375 6c74 0d0a 0d0a 2320 6769 7665 206e  sult....# give n
+00004d20: 6577 2061 7267 7320 0d0a 6465 6620 5f61  ew args ..def _a
+00004d30: 7267 7346 726f 6d46 696c 7465 7228 5f6f  rgsFromFilter(_o
+00004d40: 7269 6769 6e61 6c41 7267 732c 205f 6146  riginalArgs, _aF
+00004d50: 696c 7465 722c 205f 624b 6565 7029 3a0d  ilter, _bKeep):.
+00004d60: 0a20 2020 2066 726f 6d20 7765 726b 7a65  .    from werkze
+00004d70: 7567 2e64 6174 6173 7472 7563 7475 7265  ug.datastructure
+00004d80: 7320 696d 706f 7274 204d 756c 7469 4469  s import MultiDi
+00004d90: 6374 0d0a 2020 2020 5f64 6963 7420 3d20  ct..    _dict = 
+00004da0: 4d75 6c74 6944 6963 7428 5b5d 290d 0a20  MultiDict([]).. 
+00004db0: 2020 2066 6f72 2069 2c20 6172 6720 696e     for i, arg in
+00004dc0: 2065 6e75 6d65 7261 7465 285f 6f72 6967   enumerate(_orig
+00004dd0: 696e 616c 4172 6773 293a 0d0a 2020 2020  inalArgs):..    
+00004de0: 2020 2020 6966 205f 624b 6565 703a 0d0a      if _bKeep:..
+00004df0: 2020 2020 2020 2020 2020 2020 6966 2061              if a
+00004e00: 7267 2069 6e20 5f61 4669 6c74 6572 2061  rg in _aFilter a
+00004e10: 6e64 2069 203c 206c 656e 285f 6f72 6967  nd i < len(_orig
+00004e20: 696e 616c 4172 6773 2920 2d20 313a 0d0a  inalArgs) - 1:..
+00004e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00004e40: 5f64 6963 742e 6164 6428 6172 672c 205f  _dict.add(arg, _
+00004e50: 6f72 6967 696e 616c 4172 6773 5b69 2b31  originalArgs[i+1
+00004e60: 5d29 0d0a 2020 2020 2020 2020 656c 7365  ])..        else
+00004e70: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+00004e80: 6620 6172 6720 6e6f 7420 696e 205f 6146  f arg not in _aF
+00004e90: 696c 7465 7220 616e 6420 6920 3c20 6c65  ilter and i < le
+00004ea0: 6e28 5f6f 7269 6769 6e61 6c41 7267 7329  n(_originalArgs)
+00004eb0: 202d 2031 3a0d 0a20 2020 2020 2020 2020   - 1:..         
+00004ec0: 2020 2020 2020 205f 6469 6374 2e61 6464         _dict.add
+00004ed0: 2861 7267 2c20 5f6f 7269 6769 6e61 6c41  (arg, _originalA
+00004ee0: 7267 735b 692b 315d 290d 0a20 2020 200d  rgs[i+1])..    .
+00004ef0: 0a20 2020 205f 6172 6773 3d5f 6765 7441  .    _args=_getA
+00004f00: 7267 7328 5f64 6963 7429 0d0a 2020 2020  rgs(_dict)..    
+00004f10: 7265 7475 726e 205f 6172 6773 0d0a 0d0a  return _args....
+00004f20: 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ## -------------
 00004f30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004f40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00004f50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00004f60: 2d2d 2d2d 2d2d 0d0a 0d0a 6465 6620 5f63  ------....def _c
-00004f70: 6c65 6172 4469 7228 293a 0d0a 2020 2020  learDir():..    
-00004f80: 636c 6561 724f 6c64 4669 6c65 7328 6749  clearOldFiles(gI
-00004f90: 6e70 7574 4469 7229 0d0a 2020 2020 636c  nputDir)..    cl
-00004fa0: 6561 724f 6c64 4669 6c65 7328 674f 7574  earOldFiles(gOut
-00004fb0: 7075 7444 6972 290d 0a0d 0a23 2320 5055  putDir)....## PU
-00004fc0: 424c 4943 202d 2069 6e66 6f20 6162 6f75  BLIC - info abou
-00004fd0: 7420 6861 7277 6172 6520 7468 6973 2041  t harware this A
-00004fe0: 4920 6973 2072 756e 6e69 6e67 206f 6e0d  I is running on.
-00004ff0: 0a64 6566 206f 7361 6973 5f67 6574 4861  .def osais_getHa
-00005000: 7277 6172 6549 6e66 6f28 2920 3a0d 0a20  rwareInfo() :.. 
-00005010: 2020 2072 6574 7572 6e20 6765 7448 6f73     return getHos
-00005020: 7449 6e66 6f28 290d 0a0d 0a23 2320 5055  tInfo()....## PU
-00005030: 424c 4943 202d 2067 6574 206c 6973 7420  BLIC - get list 
-00005040: 6f66 2066 696c 6573 2069 6e20 6120 6469  of files in a di
-00005050: 7220 2863 6865 636b 2077 6861 7420 7761  r (check what wa
-00005060: 7320 6765 6e65 7261 7465 6429 0d0a 6465  s generated)..de
-00005070: 6620 6f73 6169 735f 6765 7444 6972 6563  f osais_getDirec
-00005080: 746f 7279 4c69 7374 696e 6728 5f64 6972  toryListing(_dir
-00005090: 2920 3a0d 0a20 2020 2072 6574 7572 6e20  ) :..    return 
-000050a0: 6c69 7374 4469 7243 6f6e 7465 6e74 285f  listDirContent(_
-000050b0: 6469 7229 0d0a 0d0a 2323 2050 5542 4c49  dir)....## PUBLI
-000050c0: 4320 2d20 696e 666f 2061 626f 7574 2074  C - info about t
-000050d0: 6869 7320 4149 0d0a 6465 6620 6f73 6169  his AI..def osai
-000050e0: 735f 6765 7449 6e66 6f28 2920 3a0d 0a20  s_getInfo() :.. 
-000050f0: 2020 2067 6c6f 6261 6c20 6745 7874 4950     global gExtIP
-00005100: 0d0a 2020 2020 676c 6f62 616c 2067 506f  ..    global gPo
-00005110: 7274 4149 0d0a 2020 2020 676c 6f62 616c  rtAI..    global
-00005120: 2067 4e61 6d65 0d0a 2020 2020 676c 6f62   gName..    glob
-00005130: 616c 2067 5665 7273 696f 6e0d 0a20 2020  al gVersion..   
-00005140: 2067 6c6f 6261 6c20 6749 7344 6f63 6b65   global gIsDocke
-00005150: 720d 0a20 2020 2067 6c6f 6261 6c20 674d  r..    global gM
-00005160: 6163 6869 6e65 4e61 6d65 0d0a 2020 2020  achineName..    
-00005170: 676c 6f62 616c 2067 5573 6572 6e61 6d65  global gUsername
-00005180: 0d0a 2020 2020 676c 6f62 616c 2067 4973  ..    global gIs
-00005190: 4275 7379 0d0a 2020 2020 676c 6f62 616c  Busy..    global
-000051a0: 2067 4c61 7374 5072 6f63 6573 7353 7461   gLastProcessSta
-000051b0: 7274 5f61 740d 0a20 2020 2067 6c6f 6261  rt_at..    globa
-000051c0: 6c20 674c 6173 7443 6865 636b 6564 5f61  l gLastChecked_a
-000051d0: 740d 0a0d 0a20 2020 206f 626a 436f 6e66  t....    objConf
-000051e0: 3d5f 6765 7446 756c 6c43 6f6e 6669 6728  =_getFullConfig(
-000051f0: 674e 616d 6529 0d0a 0d0a 2020 2020 7265  gName)....    re
-00005200: 7475 726e 207b 0d0a 2020 2020 2020 2020  turn {..        
-00005210: 226e 616d 6522 3a20 674e 616d 652c 0d0a  "name": gName,..
-00005220: 2020 2020 2020 2020 2276 6572 7369 6f6e          "version
-00005230: 223a 2067 5665 7273 696f 6e2c 0d0a 2020  ": gVersion,..  
-00005240: 2020 2020 2020 226c 6f63 6174 696f 6e22        "location"
-00005250: 3a20 6622 7b67 4578 7449 507d 3a7b 6750  : f"{gExtIP}:{gP
-00005260: 6f72 7441 497d 2f22 2c0d 0a20 2020 2020  ortAI}/",..     
-00005270: 2020 2022 6973 5275 6e6e 696e 6722 3a20     "isRunning": 
-00005280: 5472 7565 2c20 2020 200d 0a20 2020 2020  True,    ..     
-00005290: 2020 2022 6973 446f 636b 6572 223a 2067     "isDocker": g
-000052a0: 4973 446f 636b 6572 2c20 2020 200d 0a20  IsDocker,    .. 
-000052b0: 2020 2020 2020 2022 6c61 7374 4163 7469         "lastActi
-000052c0: 7665 5f61 7422 3a20 674c 6173 7443 6865  ve_at": gLastChe
-000052d0: 636b 6564 5f61 742c 0d0a 2020 2020 2020  cked_at,..      
-000052e0: 2020 226c 6173 7450 726f 6365 7373 5374    "lastProcessSt
-000052f0: 6172 745f 6174 223a 2067 4c61 7374 5072  art_at": gLastPr
-00005300: 6f63 6573 7353 7461 7274 5f61 742c 0d0a  ocessStart_at,..
-00005310: 2020 2020 2020 2020 226d 6163 6869 6e65          "machine
-00005320: 223a 2067 4d61 6368 696e 654e 616d 652c  ": gMachineName,
-00005330: 0d0a 2020 2020 2020 2020 226f 776e 6572  ..        "owner
-00005340: 223a 2067 5573 6572 6e61 6d65 2c20 0d0a  ": gUsername, ..
-00005350: 2020 2020 2020 2020 2269 7341 7661 696c          "isAvail
-00005360: 6162 6c65 223a 2028 6749 7342 7573 793d  able": (gIsBusy=
-00005370: 3d46 616c 7365 292c 0d0a 2020 2020 2020  =False),..      
-00005380: 2020 2261 7665 7261 6765 5265 7370 6f6e    "averageRespon
-00005390: 7365 5469 6d65 223a 205f 6765 7441 7665  seTime": _getAve
-000053a0: 7261 6765 436f 7374 2829 2c20 0d0a 2020  rageCost(), ..  
-000053b0: 2020 2020 2020 226a 736f 6e22 3a20 6f62        "json": ob
-000053c0: 6a43 6f6e 665b 2265 6e67 696e 6522 5d0d  jConf["engine"].
-000053d0: 0a20 2020 207d 0d0a 0d0a 2323 202d 2d2d  .    }....## ---
-000053e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000053f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005400: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005410: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005420: 2d2d 2d2d 2d0d 0a23 2020 2020 2020 2063  -----..#       c
-00005430: 6f6e 6e65 6374 2074 6f20 4761 7465 7761  onnect to Gatewa
-00005440: 790d 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d  y..## ----------
-00005450: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004f60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020  -----------..#  
+00004f70: 2020 2020 2053 7973 7465 6d20 696e 666f       System info
+00004f80: 0d0a 2323 202d 2d2d 2d2d 2d2d 2d2d 2d2d  ..## -----------
+00004f90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004fa0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004fb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00004fc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d0d 0a0d  -------------...
+00004fd0: 0a64 6566 205f 636c 6561 7244 6972 2829  .def _clearDir()
+00004fe0: 3a0d 0a20 2020 2063 6c65 6172 4f6c 6446  :..    clearOldF
+00004ff0: 696c 6573 2867 496e 7075 7444 6972 290d  iles(gInputDir).
+00005000: 0a20 2020 2063 6c65 6172 4f6c 6446 696c  .    clearOldFil
+00005010: 6573 2867 4f75 7470 7574 4469 7229 0d0a  es(gOutputDir)..
+00005020: 0d0a 2323 2050 5542 4c49 4320 2d20 696e  ..## PUBLIC - in
+00005030: 666f 2061 626f 7574 2068 6172 7761 7265  fo about harware
+00005040: 2074 6869 7320 4149 2069 7320 7275 6e6e   this AI is runn
+00005050: 696e 6720 6f6e 0d0a 6465 6620 6f73 6169  ing on..def osai
+00005060: 735f 6765 7448 6172 7761 7265 496e 666f  s_getHarwareInfo
+00005070: 2829 203a 0d0a 2020 2020 676c 6f62 616c  () :..    global
+00005080: 2067 4e61 6d65 0d0a 2020 2020 7265 7475   gName..    retu
+00005090: 726e 2067 6574 486f 7374 496e 666f 2867  rn getHostInfo(g
+000050a0: 4e61 6d65 290d 0a0d 0a23 2320 5055 424c  Name)....## PUBL
+000050b0: 4943 202d 2067 6574 206c 6973 7420 6f66  IC - get list of
+000050c0: 2066 696c 6573 2069 6e20 6120 6469 7220   files in a dir 
+000050d0: 2863 6865 636b 2077 6861 7420 7761 7320  (check what was 
+000050e0: 6765 6e65 7261 7465 6429 0d0a 6465 6620  generated)..def 
+000050f0: 6f73 6169 735f 6765 7444 6972 6563 746f  osais_getDirecto
+00005100: 7279 4c69 7374 696e 6728 5f64 6972 2920  ryListing(_dir) 
+00005110: 3a0d 0a20 2020 2072 6574 7572 6e20 6c69  :..    return li
+00005120: 7374 4469 7243 6f6e 7465 6e74 285f 6469  stDirContent(_di
+00005130: 7229 0d0a 0d0a 2323 2050 5542 4c49 4320  r)....## PUBLIC 
+00005140: 2d20 696e 666f 2061 626f 7574 2074 6869  - info about thi
+00005150: 7320 4149 0d0a 6465 6620 6f73 6169 735f  s AI..def osais_
+00005160: 6765 7449 6e66 6f28 2920 3a0d 0a20 2020  getInfo() :..   
+00005170: 2067 6c6f 6261 6c20 6745 7874 4950 0d0a   global gExtIP..
+00005180: 2020 2020 676c 6f62 616c 2067 506f 7274      global gPort
+00005190: 4149 0d0a 2020 2020 676c 6f62 616c 2067  AI..    global g
+000051a0: 4e61 6d65 0d0a 2020 2020 676c 6f62 616c  Name..    global
+000051b0: 2067 5665 7273 696f 6e0d 0a20 2020 2067   gVersion..    g
+000051c0: 6c6f 6261 6c20 6749 7344 6f63 6b65 720d  lobal gIsDocker.
+000051d0: 0a20 2020 2067 6c6f 6261 6c20 674d 6163  .    global gMac
+000051e0: 6869 6e65 4e61 6d65 0d0a 2020 2020 676c  hineName..    gl
+000051f0: 6f62 616c 2067 5573 6572 6e61 6d65 0d0a  obal gUsername..
+00005200: 2020 2020 676c 6f62 616c 2067 4973 4275      global gIsBu
+00005210: 7379 0d0a 2020 2020 676c 6f62 616c 2067  sy..    global g
+00005220: 4c61 7374 5072 6f63 6573 7353 7461 7274  LastProcessStart
+00005230: 5f61 740d 0a20 2020 2067 6c6f 6261 6c20  _at..    global 
+00005240: 674c 6173 7443 6865 636b 6564 5f61 740d  gLastChecked_at.
+00005250: 0a0d 0a20 2020 206f 626a 436f 6e66 3d5f  ...    objConf=_
+00005260: 6765 7446 756c 6c43 6f6e 6669 6728 674e  getFullConfig(gN
+00005270: 616d 6529 0d0a 0d0a 2020 2020 7265 7475  ame)....    retu
+00005280: 726e 207b 0d0a 2020 2020 2020 2020 226e  rn {..        "n
+00005290: 616d 6522 3a20 674e 616d 652c 0d0a 2020  ame": gName,..  
+000052a0: 2020 2020 2020 2276 6572 7369 6f6e 223a        "version":
+000052b0: 2067 5665 7273 696f 6e2c 0d0a 2020 2020   gVersion,..    
+000052c0: 2020 2020 226c 6f63 6174 696f 6e22 3a20      "location": 
+000052d0: 6622 7b67 4578 7449 507d 3a7b 6750 6f72  f"{gExtIP}:{gPor
+000052e0: 7441 497d 2f22 2c0d 0a20 2020 2020 2020  tAI}/",..       
+000052f0: 2022 6973 5275 6e6e 696e 6722 3a20 5472   "isRunning": Tr
+00005300: 7565 2c20 2020 200d 0a20 2020 2020 2020  ue,    ..       
+00005310: 2022 6973 446f 636b 6572 223a 2067 4973   "isDocker": gIs
+00005320: 446f 636b 6572 2c20 2020 200d 0a20 2020  Docker,    ..   
+00005330: 2020 2020 2022 6c61 7374 4163 7469 7665       "lastActive
+00005340: 5f61 7422 3a20 674c 6173 7443 6865 636b  _at": gLastCheck
+00005350: 6564 5f61 742c 0d0a 2020 2020 2020 2020  ed_at,..        
+00005360: 226c 6173 7450 726f 6365 7373 5374 6172  "lastProcessStar
+00005370: 745f 6174 223a 2067 4c61 7374 5072 6f63  t_at": gLastProc
+00005380: 6573 7353 7461 7274 5f61 742c 0d0a 2020  essStart_at,..  
+00005390: 2020 2020 2020 226d 6163 6869 6e65 223a        "machine":
+000053a0: 2067 4d61 6368 696e 654e 616d 652c 0d0a   gMachineName,..
+000053b0: 2020 2020 2020 2020 226f 776e 6572 223a          "owner":
+000053c0: 2067 5573 6572 6e61 6d65 2c20 0d0a 2020   gUsername, ..  
+000053d0: 2020 2020 2020 2269 7341 7661 696c 6162        "isAvailab
+000053e0: 6c65 223a 2028 6749 7342 7573 793d 3d46  le": (gIsBusy==F
+000053f0: 616c 7365 292c 0d0a 2020 2020 2020 2020  alse),..        
+00005400: 2261 7665 7261 6765 5265 7370 6f6e 7365  "averageResponse
+00005410: 5469 6d65 223a 205f 6765 7441 7665 7261  Time": _getAvera
+00005420: 6765 436f 7374 2829 2c20 0d0a 2020 2020  geCost(), ..    
+00005430: 2020 2020 226a 736f 6e22 3a20 6f62 6a43      "json": objC
+00005440: 6f6e 665b 2265 6e67 696e 6522 5d0d 0a20  onf["engine"].. 
+00005450: 2020 207d 0d0a 0d0a 2323 202d 2d2d 2d2d     }....## -----
 00005460: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005470: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
-00005490: 0d0a 2320 6e6f 7469 6679 2074 6865 2067  ..# notify the g
-000054a0: 6174 6577 6179 206f 6620 6f75 7220 4149  ateway of our AI
-000054b0: 2063 6f6e 6669 6720 6669 6c65 0d0a 6465   config file..de
-000054c0: 6620 5f6e 6f74 6966 7947 6174 6577 6179  f _notifyGateway
-000054d0: 2829 203a 200d 0a20 2020 2067 6c6f 6261  () : ..    globa
-000054e0: 6c20 674e 616d 650d 0a20 2020 2067 6c6f  l gName..    glo
-000054f0: 6261 6c20 674f 7269 6769 6e47 6174 6577  bal gOriginGatew
-00005500: 6179 0d0a 0d0a 2020 2020 6865 6164 6572  ay....    header
-00005510: 7320 3d20 7b0d 0a20 2020 2020 2020 2022  s = {..        "
-00005520: 436f 6e74 656e 742d 5479 7065 223a 2027  Content-Type": '
-00005530: 6170 706c 6963 6174 696f 6e2f 6a73 6f6e  application/json
-00005540: 272c 200d 0a20 2020 2020 2020 2027 4163  ', ..        'Ac
-00005550: 6365 7074 273a 2027 7465 7874 2f70 6c61  cept': 'text/pla
-00005560: 696e 272c 0d0a 2020 2020 7d0d 0a20 2020  in',..    }..   
-00005570: 206f 626a 5061 7261 6d3d 5f67 6574 4675   objParam=_getFu
-00005580: 6c6c 436f 6e66 6967 2867 4e61 6d65 290d  llConfig(gName).
-00005590: 0a0d 0a20 2020 2023 2320 6e6f 7469 6679  ...    ## notify
-000055a0: 2067 6174 6577 6179 0d0a 2020 2020 7472   gateway..    tr
-000055b0: 793a 0d0a 2020 2020 2020 2020 7265 7370  y:..        resp
-000055c0: 6f6e 7365 203d 2072 6571 7565 7374 732e  onse = requests.
-000055d0: 706f 7374 2866 227b 674f 7269 6769 6e47  post(f"{gOriginG
-000055e0: 6174 6577 6179 7d61 7069 2f76 312f 7075  ateway}api/v1/pu
-000055f0: 626c 6963 2f61 692f 636f 6e66 6967 222c  blic/ai/config",
-00005600: 2068 6561 6465 7273 3d68 6561 6465 7273   headers=headers
-00005610: 2c20 6461 7461 3d6a 736f 6e2e 6475 6d70  , data=json.dump
-00005620: 7328 6f62 6a50 6172 616d 2929 0d0a 2020  s(objParam))..  
-00005630: 2020 2020 2020 6f62 6a52 6573 3d72 6573        objRes=res
-00005640: 706f 6e73 652e 6a73 6f6e 2829 5b22 6461  ponse.json()["da
-00005650: 7461 225d 0d0a 2020 2020 2020 2020 6966  ta"]..        if
-00005660: 206f 626a 5265 7320 6973 204e 6f6e 653a   objRes is None:
-00005670: 0d0a 2020 2020 2020 2020 2020 2020 7261  ..            ra
-00005680: 6973 6520 5661 6c75 6545 7272 6f72 2822  ise ValueError("
-00005690: 4352 4954 4943 414c 3a20 636f 756c 6420  CRITICAL: could 
-000056a0: 6e6f 7420 6e6f 7469 6679 2047 6174 6577  not notify Gatew
-000056b0: 6179 2229 0d0a 0d0a 2020 2020 6578 6365  ay")....    exce
-000056c0: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-000056d0: 6572 723a 0d0a 2020 2020 2020 2020 7072  err:..        pr
-000056e0: 696e 7428 2243 5249 5449 4341 4c3a 2022  int("CRITICAL: "
-000056f0: 2b65 7272 2e6d 7367 290d 0a20 2020 2020  +err.msg)..     
-00005700: 2020 2072 6169 7365 2065 7272 0d0a 2020     raise err..  
-00005710: 2020 7265 7475 726e 2054 7275 650d 0a0d    return True...
-00005720: 0a23 2320 5055 424c 4943 202d 2052 6573  .## PUBLIC - Res
-00005730: 6574 2063 6f6e 6e65 6374 696f 6e20 746f  et connection to
-00005740: 206c 6f63 616c 2067 6174 6577 6179 0d0a   local gateway..
-00005750: 6465 6620 6f73 6169 735f 7265 7365 7447  def osais_resetG
-00005760: 6174 6577 6179 285f 6c6f 6361 6c47 6174  ateway(_localGat
-00005770: 6577 6179 293a 0d0a 2020 2020 676c 6f62  eway):..    glob
-00005780: 616c 2067 4f72 6967 696e 4761 7465 7761  al gOriginGatewa
-00005790: 790d 0a20 2020 2067 4f72 6967 696e 4761  y..    gOriginGa
-000057a0: 7465 7761 793d 5f6c 6f63 616c 4761 7465  teway=_localGate
-000057b0: 7761 790d 0a20 2020 2074 7279 3a0d 0a20  way..    try:.. 
-000057c0: 2020 2020 2020 205f 6e6f 7469 6679 4761         _notifyGa
-000057d0: 7465 7761 7928 290d 0a20 2020 2065 7863  teway()..    exc
-000057e0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-000057f0: 2065 7272 3a0d 0a20 2020 2020 2020 2070   err:..        p
-00005800: 7269 6e74 2822 4352 4954 4943 414c 3a20  rint("CRITICAL: 
-00005810: 222b 6572 722e 6d73 6729 0d0a 2020 2020  "+err.msg)..    
-00005820: 2020 2020 7261 6973 6520 6572 720d 0a20      raise err.. 
-00005830: 2020 200d 0a20 2020 2070 7269 6e74 2822     ..    print("
-00005840: 3d3e 2054 6869 7320 4149 2069 7320 7265  => This AI is re
-00005850: 7365 7420 746f 2074 616c 6b20 746f 2047  set to talk to G
-00005860: 6174 6577 6179 2022 2b5f 6c6f 6361 6c47  ateway "+_localG
-00005870: 6174 6577 6179 290d 0a20 2020 2072 6574  ateway)..    ret
-00005880: 7572 6e20 5472 7565 0d0a 0d0a 2323 202d  urn True....## -
-00005890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000058a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000058b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000058c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000058d0: 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020 2020  -------..#      
-000058e0: 2061 7574 6865 6e74 6963 6174 6520 696e   authenticate in
-000058f0: 746f 204f 5341 4953 2061 7320 7669 7274  to OSAIS as virt
-00005900: 7561 6c20 4149 0d0a 2323 202d 2d2d 2d2d  ual AI..## -----
+00005480: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005490: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000054a0: 2d2d 2d0d 0a23 2020 2020 2020 2063 6f6e  ---..#       con
+000054b0: 6e65 6374 2074 6f20 4761 7465 7761 790d  nect to Gateway.
+000054c0: 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  .## ------------
+000054d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000054e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000054f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005500: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 0d0a  ------------....
+00005510: 2320 6e6f 7469 6679 2074 6865 2067 6174  # notify the gat
+00005520: 6577 6179 206f 6620 6f75 7220 4149 2063  eway of our AI c
+00005530: 6f6e 6669 6720 6669 6c65 0d0a 6465 6620  onfig file..def 
+00005540: 5f6e 6f74 6966 7947 6174 6577 6179 2829  _notifyGateway()
+00005550: 203a 200d 0a20 2020 2067 6c6f 6261 6c20   : ..    global 
+00005560: 674e 616d 650d 0a20 2020 2067 6c6f 6261  gName..    globa
+00005570: 6c20 674f 7269 6769 6e47 6174 6577 6179  l gOriginGateway
+00005580: 0d0a 0d0a 2020 2020 6865 6164 6572 7320  ....    headers 
+00005590: 3d20 7b0d 0a20 2020 2020 2020 2022 436f  = {..        "Co
+000055a0: 6e74 656e 742d 5479 7065 223a 2027 6170  ntent-Type": 'ap
+000055b0: 706c 6963 6174 696f 6e2f 6a73 6f6e 272c  plication/json',
+000055c0: 200d 0a20 2020 2020 2020 2027 4163 6365   ..        'Acce
+000055d0: 7074 273a 2027 7465 7874 2f70 6c61 696e  pt': 'text/plain
+000055e0: 272c 0d0a 2020 2020 7d0d 0a20 2020 206f  ',..    }..    o
+000055f0: 626a 5061 7261 6d3d 5f67 6574 4675 6c6c  bjParam=_getFull
+00005600: 436f 6e66 6967 2867 4e61 6d65 290d 0a0d  Config(gName)...
+00005610: 0a20 2020 2023 2320 6e6f 7469 6679 2067  .    ## notify g
+00005620: 6174 6577 6179 0d0a 2020 2020 7472 793a  ateway..    try:
+00005630: 0d0a 2020 2020 2020 2020 7265 7370 6f6e  ..        respon
+00005640: 7365 203d 2072 6571 7565 7374 732e 706f  se = requests.po
+00005650: 7374 2866 227b 674f 7269 6769 6e47 6174  st(f"{gOriginGat
+00005660: 6577 6179 7d61 7069 2f76 312f 7075 626c  eway}api/v1/publ
+00005670: 6963 2f61 692f 636f 6e66 6967 222c 2068  ic/ai/config", h
+00005680: 6561 6465 7273 3d68 6561 6465 7273 2c20  eaders=headers, 
+00005690: 6461 7461 3d6a 736f 6e2e 6475 6d70 7328  data=json.dumps(
+000056a0: 6f62 6a50 6172 616d 2929 0d0a 2020 2020  objParam))..    
+000056b0: 2020 2020 6f62 6a52 6573 3d72 6573 706f      objRes=respo
+000056c0: 6e73 652e 6a73 6f6e 2829 5b22 6461 7461  nse.json()["data
+000056d0: 225d 0d0a 2020 2020 2020 2020 6966 206f  "]..        if o
+000056e0: 626a 5265 7320 6973 204e 6f6e 653a 0d0a  bjRes is None:..
+000056f0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00005700: 6520 5661 6c75 6545 7272 6f72 2822 4352  e ValueError("CR
+00005710: 4954 4943 414c 3a20 636f 756c 6420 6e6f  ITICAL: could no
+00005720: 7420 6e6f 7469 6679 2047 6174 6577 6179  t notify Gateway
+00005730: 2229 0d0a 0d0a 2020 2020 6578 6365 7074  ")....    except
+00005740: 2045 7863 6570 7469 6f6e 2061 7320 6572   Exception as er
+00005750: 723a 0d0a 2020 2020 2020 2020 7072 696e  r:..        prin
+00005760: 7428 2243 5249 5449 4341 4c3a 2022 2b65  t("CRITICAL: "+e
+00005770: 7272 2e6d 7367 290d 0a20 2020 2020 2020  rr.msg)..       
+00005780: 2072 6169 7365 2065 7272 0d0a 2020 2020   raise err..    
+00005790: 7265 7475 726e 2054 7275 650d 0a0d 0a23  return True....#
+000057a0: 2320 5055 424c 4943 202d 2052 6573 6574  # PUBLIC - Reset
+000057b0: 2063 6f6e 6e65 6374 696f 6e20 746f 206c   connection to l
+000057c0: 6f63 616c 2067 6174 6577 6179 0d0a 6465  ocal gateway..de
+000057d0: 6620 6f73 6169 735f 7265 7365 7447 6174  f osais_resetGat
+000057e0: 6577 6179 285f 6c6f 6361 6c47 6174 6577  eway(_localGatew
+000057f0: 6179 293a 0d0a 2020 2020 676c 6f62 616c  ay):..    global
+00005800: 2067 4f72 6967 696e 4761 7465 7761 790d   gOriginGateway.
+00005810: 0a20 2020 2067 4f72 6967 696e 4761 7465  .    gOriginGate
+00005820: 7761 793d 5f6c 6f63 616c 4761 7465 7761  way=_localGatewa
+00005830: 790d 0a20 2020 2074 7279 3a0d 0a20 2020  y..    try:..   
+00005840: 2020 2020 205f 6e6f 7469 6679 4761 7465       _notifyGate
+00005850: 7761 7928 290d 0a20 2020 2065 7863 6570  way()..    excep
+00005860: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+00005870: 7272 3a0d 0a20 2020 2020 2020 2070 7269  rr:..        pri
+00005880: 6e74 2822 4352 4954 4943 414c 3a20 222b  nt("CRITICAL: "+
+00005890: 6572 722e 6d73 6729 0d0a 2020 2020 2020  err.msg)..      
+000058a0: 2020 7261 6973 6520 6572 720d 0a20 2020    raise err..   
+000058b0: 200d 0a20 2020 2070 7269 6e74 2822 3d3e   ..    print("=>
+000058c0: 2054 6869 7320 4149 2069 7320 7265 7365   This AI is rese
+000058d0: 7420 746f 2074 616c 6b20 746f 2047 6174  t to talk to Gat
+000058e0: 6577 6179 2022 2b5f 6c6f 6361 6c47 6174  eway "+_localGat
+000058f0: 6577 6179 290d 0a20 2020 2072 6574 7572  eway)..    retur
+00005900: 6e20 5472 7565 0d0a 0d0a 2323 202d 2d2d  n True....## ---
 00005910: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005920: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005930: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00005940: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00005950: 2d2d 2d0d 0a0d 0a23 2052 6567 6973 7465  ---....# Registe
-00005960: 7220 6f75 7220 5641 4920 696e 746f 204f  r our VAI into O
-00005970: 5341 4953 0d0a 6465 6620 5f72 6567 6973  SAIS..def _regis
-00005980: 7465 7256 4149 2829 3a0d 0a20 2020 2067  terVAI():..    g
-00005990: 6c6f 6261 6c20 674e 616d 650d 0a20 2020  lobal gName..   
-000059a0: 2067 6c6f 6261 6c20 6754 6f6b 656e 0d0a   global gToken..
-000059b0: 2020 2020 676c 6f62 616c 2067 5365 6372      global gSecr
-000059c0: 6574 0d0a 2020 2020 676c 6f62 616c 2067  et..    global g
-000059d0: 4f72 6967 696e 4f53 4149 530d 0a20 2020  OriginOSAIS..   
-000059e0: 2067 6c6f 6261 6c20 6754 6f6b 656e 4c6f   global gTokenLo
-000059f0: 6361 6c0d 0a20 2020 2067 6c6f 6261 6c20  cal..    global 
-00005a00: 6753 6563 7265 744c 6f63 616c 0d0a 2020  gSecretLocal..  
-00005a10: 2020 676c 6f62 616c 2067 4f72 6967 696e    global gOrigin
-00005a20: 4c6f 6361 6c4f 5341 4953 0d0a 2020 2020  LocalOSAIS..    
-00005a30: 676c 6f62 616c 2067 4973 4c6f 6361 6c0d  global gIsLocal.
-00005a40: 0a0d 0a20 2020 2068 6561 6465 7273 203d  ...    headers =
-00005a50: 207b 0d0a 2020 2020 2020 2020 2243 6f6e   {..        "Con
-00005a60: 7465 6e74 2d54 7970 6522 3a20 2761 7070  tent-Type": 'app
-00005a70: 6c69 6361 7469 6f6e 2f6a 736f 6e27 2c20  lication/json', 
-00005a80: 0d0a 2020 2020 2020 2020 2741 6363 6570  ..        'Accep
-00005a90: 7427 3a20 2774 6578 742f 706c 6169 6e27  t': 'text/plain'
-00005aa0: 2c0d 0a20 2020 207d 0d0a 2020 2020 6f62  ,..    }..    ob
-00005ab0: 6a50 6172 616d 3d5f 6765 7446 756c 6c43  jParam=_getFullC
-00005ac0: 6f6e 6669 6728 674e 616d 6529 0d0a 0d0a  onfig(gName)....
-00005ad0: 2020 2020 2323 2072 6567 2077 6974 6820      ## reg with 
-00005ae0: 5072 6f64 0d0a 2020 2020 6966 2067 4973  Prod..    if gIs
-00005af0: 4c6f 6361 6c3d 3d46 616c 7365 3a0d 0a20  Local==False:.. 
-00005b00: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
-00005b10: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
-00005b20: 6520 3d20 7265 7175 6573 7473 2e70 6f73  e = requests.pos
-00005b30: 7428 6622 7b67 4f72 6967 696e 4f53 4149  t(f"{gOriginOSAI
-00005b40: 537d 6170 692f 7631 2f70 7562 6c69 632f  S}api/v1/public/
-00005b50: 7669 7274 7561 6c61 692f 7265 6769 7374  virtualai/regist
-00005b60: 6572 222c 2068 6561 6465 7273 3d68 6561  er", headers=hea
-00005b70: 6465 7273 2c20 6461 7461 3d6a 736f 6e2e  ders, data=json.
-00005b80: 6475 6d70 7328 6f62 6a50 6172 616d 2929  dumps(objParam))
-00005b90: 0d0a 2020 2020 2020 2020 2020 2020 6f62  ..            ob
-00005ba0: 6a52 6573 3d72 6573 706f 6e73 652e 6a73  jRes=response.js
-00005bb0: 6f6e 2829 5b22 6461 7461 225d 0d0a 2020  on()["data"]..  
-00005bc0: 2020 2020 2020 2020 2020 6966 206f 626a            if obj
-00005bd0: 5265 7320 6973 204e 6f6e 653a 0d0a 2020  Res is None:..  
-00005be0: 2020 2020 2020 2020 2020 2020 2020 7072                pr
-00005bf0: 696e 7428 2243 4f55 4c44 204e 4f54 2052  int("COULD NOT R
-00005c00: 4547 4953 5445 522c 2073 746f 7070 696e  EGISTER, stoppin
-00005c10: 6720 6974 2068 6572 6522 290d 0a20 2020  g it here")..   
-00005c20: 2020 2020 2020 2020 2020 2020 2073 7973               sys
-00005c30: 2e65 7869 7428 290d 0a0d 0a20 2020 2020  .exit()....     
-00005c40: 2020 2020 2020 2067 546f 6b65 6e3d 6f62         gToken=ob
-00005c50: 6a52 6573 5b22 746f 6b65 6e22 5d0d 0a20  jRes["token"].. 
-00005c60: 2020 2020 2020 2020 2020 2067 5365 6372             gSecr
-00005c70: 6574 3d6f 626a 5265 735b 2273 6563 7265  et=objRes["secre
-00005c80: 7422 5d0d 0a20 2020 2020 2020 2020 2020  t"]..           
-00005c90: 2070 7269 6e74 2822 5765 2061 7265 2052   print("We are R
-00005ca0: 4547 4953 5445 5245 4420 7769 7468 204f  EGISTERED with O
-00005cb0: 5341 4953 2050 726f 6422 290d 0a20 2020  SAIS Prod")..   
-00005cc0: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00005cd0: 7074 696f 6e20 6173 2065 7272 3a0d 0a20  ption as err:.. 
-00005ce0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00005cf0: 2822 4352 4954 4943 414c 3a20 222b 6572  ("CRITICAL: "+er
-00005d00: 722e 6d73 6729 0d0a 2020 2020 2020 2020  r.msg)..        
-00005d10: 2020 2020 7261 6973 6520 6572 720d 0a0d      raise err...
-00005d20: 0a20 2020 2023 2320 7265 6720 7769 7468  .    ## reg with
-00005d30: 204c 6f63 616c 204f 5341 4953 2028 6465   Local OSAIS (de
-00005d40: 6275 6729 0d0a 2020 2020 656c 7365 3a0d  bug)..    else:.
-00005d50: 0a20 2020 2020 2020 2074 7279 3a0d 0a20  .        try:.. 
-00005d60: 2020 2020 2020 2020 2020 2072 6573 706f             respo
-00005d70: 6e73 6520 3d20 7265 7175 6573 7473 2e70  nse = requests.p
-00005d80: 6f73 7428 6622 7b67 4f72 6967 696e 4c6f  ost(f"{gOriginLo
-00005d90: 6361 6c4f 5341 4953 7d61 7069 2f76 312f  calOSAIS}api/v1/
-00005da0: 7075 626c 6963 2f76 6972 7475 616c 6169  public/virtualai
-00005db0: 2f72 6567 6973 7465 7222 2c20 6865 6164  /register", head
-00005dc0: 6572 733d 6865 6164 6572 732c 2064 6174  ers=headers, dat
-00005dd0: 613d 6a73 6f6e 2e64 756d 7073 286f 626a  a=json.dumps(obj
-00005de0: 5061 7261 6d29 290d 0a20 2020 2020 2020  Param))..       
-00005df0: 2020 2020 206f 626a 5265 733d 7265 7370       objRes=resp
-00005e00: 6f6e 7365 2e6a 736f 6e28 295b 2264 6174  onse.json()["dat
-00005e10: 6122 5d0d 0a20 2020 2020 2020 2020 2020  a"]..           
-00005e20: 2069 6620 6f62 6a52 6573 2069 7320 4e6f   if objRes is No
-00005e30: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00005e40: 2020 2020 2070 7269 6e74 2822 434f 554c       print("COUL
-00005e50: 4420 4e4f 5420 5245 4749 5354 4552 2077  D NOT REGISTER w
-00005e60: 6974 6820 6465 6275 6722 290d 0a0d 0a20  ith debug").... 
-00005e70: 2020 2020 2020 2020 2020 2067 546f 6b65             gToke
-00005e80: 6e4c 6f63 616c 3d6f 626a 5265 735b 2274  nLocal=objRes["t
-00005e90: 6f6b 656e 225d 0d0a 2020 2020 2020 2020  oken"]..        
-00005ea0: 2020 2020 6753 6563 7265 744c 6f63 616c      gSecretLocal
-00005eb0: 3d6f 626a 5265 735b 2273 6563 7265 7422  =objRes["secret"
-00005ec0: 5d0d 0a20 2020 2020 2020 2020 2020 2070  ]..            p
-00005ed0: 7269 6e74 2822 5765 2061 7265 2052 4547  rint("We are REG
-00005ee0: 4953 5445 5245 4420 7769 7468 204f 5341  ISTERED with OSA
-00005ef0: 4953 204c 6f63 616c 2028 6465 6275 6729  IS Local (debug)
-00005f00: 2229 0d0a 2020 2020 2020 2020 6578 6365  ")..        exce
-00005f10: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-00005f20: 6572 723a 0d0a 2020 2020 2020 2020 2020  err:..          
-00005f30: 2020 7072 696e 7428 2243 5249 5449 4341    print("CRITICA
-00005f40: 4c3a 2022 2b65 7272 2e6d 7367 290d 0a20  L: "+err.msg).. 
-00005f50: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00005f60: 2065 7272 0d0a 0d0a 2020 2020 7265 7475   err....    retu
-00005f70: 726e 2054 7275 650d 0a0d 0a23 2041 7574  rn True....# Aut
-00005f80: 6865 6e74 6963 6174 6520 696e 746f 204f  henticate into O
-00005f90: 5341 4953 0d0a 6465 6620 5f6c 6f67 696e  SAIS..def _login
-00005fa0: 5641 4928 293a 0d0a 2020 2020 676c 6f62  VAI():..    glob
-00005fb0: 616c 2067 546f 6b65 6e0d 0a20 2020 2067  al gToken..    g
-00005fc0: 6c6f 6261 6c20 6753 6563 7265 740d 0a20  lobal gSecret.. 
-00005fd0: 2020 2067 6c6f 6261 6c20 6741 7574 6854     global gAuthT
-00005fe0: 6f6b 656e 0d0a 2020 2020 676c 6f62 616c  oken..    global
-00005ff0: 2067 546f 6b65 6e4c 6f63 616c 0d0a 2020   gTokenLocal..  
-00006000: 2020 676c 6f62 616c 2067 5365 6372 6574    global gSecret
-00006010: 4c6f 6361 6c0d 0a20 2020 2067 6c6f 6261  Local..    globa
-00006020: 6c20 6741 7574 6854 6f6b 656e 4c6f 6361  l gAuthTokenLoca
-00006030: 6c0d 0a0d 0a20 2020 2068 6561 6465 7273  l....    headers
-00006040: 203d 207b 0d0a 2020 2020 2020 2020 2243   = {..        "C
-00006050: 6f6e 7465 6e74 2d54 7970 6522 3a20 2261  ontent-Type": "a
-00006060: 7070 6c69 6361 7469 6f6e 2f6a 736f 6e22  pplication/json"
-00006070: 0d0a 2020 2020 7d0d 0a0d 0a20 2020 2069  ..    }....    i
-00006080: 6620 6754 6f6b 656e 213d 204e 6f6e 653a  f gToken!= None:
-00006090: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-000060a0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-000060b0: 6f6e 7365 203d 2072 6571 7565 7374 732e  onse = requests.
-000060c0: 706f 7374 2866 227b 674f 7269 6769 6e4f  post(f"{gOriginO
-000060d0: 5341 4953 7d61 7069 2f76 312f 7075 626c  SAIS}api/v1/publ
-000060e0: 6963 2f76 6972 7475 616c 6169 2f6c 6f67  ic/virtualai/log
-000060f0: 696e 222c 2068 6561 6465 7273 3d68 6561  in", headers=hea
-00006100: 6465 7273 2c20 6461 7461 3d6a 736f 6e2e  ders, data=json.
-00006110: 6475 6d70 7328 7b0d 0a20 2020 2020 2020  dumps({..       
-00006120: 2020 2020 2020 2020 2022 746f 6b65 6e22           "token"
-00006130: 3a20 6754 6f6b 656e 2c0d 0a20 2020 2020  : gToken,..     
-00006140: 2020 2020 2020 2020 2020 2022 7365 6372             "secr
-00006150: 6574 223a 2067 5365 6372 6574 0d0a 2020  et": gSecret..  
-00006160: 2020 2020 2020 2020 2020 7d29 290d 0a0d            }))...
-00006170: 0a20 2020 2020 2020 2020 2020 206f 626a  .            obj
-00006180: 5265 733d 7265 7370 6f6e 7365 2e6a 736f  Res=response.jso
-00006190: 6e28 295b 2264 6174 6122 5d0d 0a20 2020  n()["data"]..   
-000061a0: 2020 2020 2020 2020 2069 6620 6f62 6a52           if objR
-000061b0: 6573 2069 7320 4e6f 6e65 3a0d 0a20 2020  es is None:..   
-000061c0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-000061d0: 6e74 2822 434f 554c 4420 4e4f 5420 4c4f  nt("COULD NOT LO
-000061e0: 4749 4e2c 2073 746f 7070 696e 6720 6974  GIN, stopping it
-000061f0: 2068 6572 6522 290d 0a20 2020 2020 2020   here")..       
-00006200: 2020 2020 2020 2020 2073 7973 2e65 7869           sys.exi
-00006210: 7428 290d 0a20 2020 2020 2020 2020 2020  t()..           
-00006220: 2070 7269 6e74 2822 5765 2067 6f74 2061   print("We got a
-00006230: 6e20 6175 7468 656e 7469 6361 7469 6f6e  n authentication
-00006240: 2074 6f6b 656e 2069 6e74 6f20 4f53 4149   token into OSAI
-00006250: 5322 290d 0a20 2020 2020 2020 2020 2020  S")..           
-00006260: 2067 4175 7468 546f 6b65 6e3d 6f62 6a52   gAuthToken=objR
-00006270: 6573 5b22 6175 7468 546f 6b65 6e22 5d20  es["authToken"] 
-00006280: 2020 200d 0a20 2020 2020 2020 2065 7863     ..        exc
-00006290: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-000062a0: 2065 7272 3a0d 0a20 2020 2020 2020 2020   err:..         
-000062b0: 2020 2070 7269 6e74 2822 4352 4954 4943     print("CRITIC
-000062c0: 414c 3a20 222b 6572 722e 6d73 6729 0d0a  AL: "+err.msg)..
-000062d0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000062e0: 6520 6572 720d 0a0d 0a20 2020 2069 6620  e err....    if 
-000062f0: 6754 6f6b 656e 4c6f 6361 6c21 3d20 4e6f  gTokenLocal!= No
-00006300: 6e65 3a0d 0a20 2020 2020 2020 2074 7279  ne:..        try
-00006310: 3a0d 0a20 2020 2020 2020 2020 2020 2072  :..            r
-00006320: 6573 706f 6e73 6520 3d20 7265 7175 6573  esponse = reques
-00006330: 7473 2e70 6f73 7428 6622 7b67 4f72 6967  ts.post(f"{gOrig
-00006340: 696e 4c6f 6361 6c4f 5341 4953 7d61 7069  inLocalOSAIS}api
-00006350: 2f76 312f 7075 626c 6963 2f76 6972 7475  /v1/public/virtu
-00006360: 616c 6169 2f6c 6f67 696e 222c 2068 6561  alai/login", hea
-00006370: 6465 7273 3d68 6561 6465 7273 2c20 6461  ders=headers, da
-00006380: 7461 3d6a 736f 6e2e 6475 6d70 7328 7b0d  ta=json.dumps({.
-00006390: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000063a0: 2022 746f 6b65 6e22 3a20 6754 6f6b 656e   "token": gToken
-000063b0: 4c6f 6361 6c2c 0d0a 2020 2020 2020 2020  Local,..        
-000063c0: 2020 2020 2020 2020 2273 6563 7265 7422          "secret"
-000063d0: 3a20 6753 6563 7265 744c 6f63 616c 0d0a  : gSecretLocal..
-000063e0: 2020 2020 2020 2020 2020 2020 7d29 290d              })).
-000063f0: 0a0d 0a20 2020 2020 2020 2020 2020 206f  ...            o
-00006400: 626a 5265 733d 7265 7370 6f6e 7365 2e6a  bjRes=response.j
-00006410: 736f 6e28 295b 2264 6174 6122 5d0d 0a20  son()["data"].. 
-00006420: 2020 2020 2020 2020 2020 2069 6620 6f62             if ob
-00006430: 6a52 6573 2069 7320 4e6f 6e65 3a0d 0a20  jRes is None:.. 
-00006440: 2020 2020 2020 2020 2020 2020 2020 2070                 p
-00006450: 7269 6e74 2822 434f 554c 4420 4e4f 5420  rint("COULD NOT 
-00006460: 4c4f 4749 4e20 696e 746f 204f 5341 4953  LOGIN into OSAIS
-00006470: 204c 6f63 616c 2229 0d0a 2020 2020 2020   Local")..      
-00006480: 2020 2020 2020 7072 696e 7428 2257 6520        print("We 
-00006490: 676f 7420 616e 2061 7574 6865 6e74 6963  got an authentic
-000064a0: 6174 696f 6e20 746f 6b65 6e20 696e 746f  ation token into
-000064b0: 204f 5341 4953 204c 6f63 616c 2028 6465   OSAIS Local (de
-000064c0: 6275 6729 2229 0d0a 2020 2020 2020 2020  bug)")..        
-000064d0: 2020 2020 6741 7574 6854 6f6b 656e 4c6f      gAuthTokenLo
-000064e0: 6361 6c3d 6f62 6a52 6573 5b22 6175 7468  cal=objRes["auth
-000064f0: 546f 6b65 6e22 5d20 2020 200d 0a20 2020  Token"]    ..   
-00006500: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00006510: 7074 696f 6e20 6173 2065 7272 3a0d 0a20  ption as err:.. 
-00006520: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00006530: 6e20 5472 7565 0d0a 0d0a 2020 2020 7265  n True....    re
-00006540: 7475 726e 2054 7275 650d 0a0d 0a0d 0a23  turn True......#
-00006550: 2320 5055 424c 4943 202d 2041 7574 6865  # PUBLIC - Authe
-00006560: 6e74 6963 6174 6520 7468 6520 5669 7274  nticate the Virt
-00006570: 7561 6c20 4149 2069 6e74 6f20 4f53 4149  ual AI into OSAI
-00006580: 530d 0a64 6566 206f 7361 6973 5f61 7574  S..def osais_aut
-00006590: 6865 6e74 6963 6174 6541 4928 293a 0d0a  henticateAI():..
-000065a0: 2020 2020 676c 6f62 616c 2067 4973 5669      global gIsVi
-000065b0: 7274 7561 6c41 490d 0a20 2020 2067 6c6f  rtualAI..    glo
-000065c0: 6261 6c20 674f 7269 6769 6e4f 5341 4953  bal gOriginOSAIS
-000065d0: 0d0a 2020 2020 676c 6f62 616c 2067 4973  ..    global gIs
-000065e0: 5363 6865 6475 6c65 640d 0a20 2020 200d  Scheduled..    .
-000065f0: 0a20 2020 2052 6573 703d 7b22 6461 7461  .    Resp={"data
-00006600: 223a 204e 6f6e 657d 0d0a 2020 2020 6966  ": None}..    if
-00006610: 2067 4973 5669 7274 7561 6c41 493a 0d0a   gIsVirtualAI:..
-00006620: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
-00006630: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-00006640: 3d20 5f72 6567 6973 7465 7256 4149 2829  = _registerVAI()
-00006650: 0d0a 2020 2020 2020 2020 2020 2020 7265  ..            re
-00006660: 7370 3d5f 6c6f 6769 6e56 4149 2829 0d0a  sp=_loginVAI()..
-00006670: 2020 2020 2020 2020 6578 6365 7074 2045          except E
-00006680: 7863 6570 7469 6f6e 2061 7320 6572 723a  xception as err:
-00006690: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
-000066a0: 696e 7428 2243 5249 5449 4341 4c3a 2022  int("CRITICAL: "
-000066b0: 2b65 7272 2e6d 7367 290d 0a20 2020 2020  +err.msg)..     
-000066c0: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
-000066d0: 0d0a 2020 2020 2020 2020 0d0a 2020 2020  ..        ..    
-000066e0: 2020 2020 2320 5275 6e20 7468 6520 7363      # Run the sc
-000066f0: 6865 6475 6c65 720d 0a20 2020 2020 2020  heduler..       
-00006700: 2069 6620 6749 7353 6368 6564 756c 6564   if gIsScheduled
-00006710: 3d3d 4661 6c73 653a 0d0a 2020 2020 2020  ==False:..      
-00006720: 2020 2020 2020 6749 7353 6368 6564 756c        gIsSchedul
-00006730: 6564 3d54 7275 650d 0a20 2020 2020 2020  ed=True..       
-00006740: 2020 2020 2073 6368 6564 756c 652e 6576       schedule.ev
-00006750: 6572 7928 292e 6461 792e 6174 2822 3130  ery().day.at("10
-00006760: 3a33 3022 292e 646f 285f 6c6f 6769 6e56  :30").do(_loginV
-00006770: 4149 290d 0a0d 0a20 2020 2072 6574 7572  AI)....    retur
-00006780: 6e20 7265 7370 0d0a 0d0a 2323 202d 2d2d  n resp....## ---
-00006790: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000067a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000067b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000067c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000067d0: 2d2d 2d2d 2d0d 0a23 2020 2020 2020 2052  -----..#       R
-000067e0: 756e 2074 6865 2041 490d 0a23 2320 2d2d  un the AI..## --
-000067f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006800: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00005950: 2d2d 2d2d 2d0d 0a23 2020 2020 2020 2061  -----..#       a
+00005960: 7574 6865 6e74 6963 6174 6520 696e 746f  uthenticate into
+00005970: 204f 5341 4953 2061 7320 7669 7274 7561   OSAIS as virtua
+00005980: 6c20 4149 0d0a 2323 202d 2d2d 2d2d 2d2d  l AI..## -------
+00005990: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000059a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000059b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000059c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000059d0: 2d0d 0a0d 0a23 2052 6567 6973 7465 7220  -....# Register 
+000059e0: 6f75 7220 5641 4920 696e 746f 204f 5341  our VAI into OSA
+000059f0: 4953 0d0a 6465 6620 5f72 6567 6973 7465  IS..def _registe
+00005a00: 7256 4149 2829 3a0d 0a20 2020 2067 6c6f  rVAI():..    glo
+00005a10: 6261 6c20 674e 616d 650d 0a20 2020 2067  bal gName..    g
+00005a20: 6c6f 6261 6c20 6754 6f6b 656e 0d0a 2020  lobal gToken..  
+00005a30: 2020 676c 6f62 616c 2067 5365 6372 6574    global gSecret
+00005a40: 0d0a 2020 2020 676c 6f62 616c 2067 4f72  ..    global gOr
+00005a50: 6967 696e 4f53 4149 530d 0a20 2020 2067  iginOSAIS..    g
+00005a60: 6c6f 6261 6c20 6754 6f6b 656e 4c6f 6361  lobal gTokenLoca
+00005a70: 6c0d 0a20 2020 2067 6c6f 6261 6c20 6753  l..    global gS
+00005a80: 6563 7265 744c 6f63 616c 0d0a 2020 2020  ecretLocal..    
+00005a90: 676c 6f62 616c 2067 4f72 6967 696e 4c6f  global gOriginLo
+00005aa0: 6361 6c4f 5341 4953 0d0a 2020 2020 676c  calOSAIS..    gl
+00005ab0: 6f62 616c 2067 4973 4c6f 6361 6c0d 0a0d  obal gIsLocal...
+00005ac0: 0a20 2020 2068 6561 6465 7273 203d 207b  .    headers = {
+00005ad0: 0d0a 2020 2020 2020 2020 2243 6f6e 7465  ..        "Conte
+00005ae0: 6e74 2d54 7970 6522 3a20 2761 7070 6c69  nt-Type": 'appli
+00005af0: 6361 7469 6f6e 2f6a 736f 6e27 2c20 0d0a  cation/json', ..
+00005b00: 2020 2020 2020 2020 2741 6363 6570 7427          'Accept'
+00005b10: 3a20 2774 6578 742f 706c 6169 6e27 2c0d  : 'text/plain',.
+00005b20: 0a20 2020 207d 0d0a 2020 2020 6f62 6a50  .    }..    objP
+00005b30: 6172 616d 3d5f 6765 7446 756c 6c43 6f6e  aram=_getFullCon
+00005b40: 6669 6728 674e 616d 6529 0d0a 0d0a 2020  fig(gName)....  
+00005b50: 2020 2323 2072 6567 2077 6974 6820 5072    ## reg with Pr
+00005b60: 6f64 0d0a 2020 2020 6966 2067 4973 4c6f  od..    if gIsLo
+00005b70: 6361 6c3d 3d46 616c 7365 3a0d 0a20 2020  cal==False:..   
+00005b80: 2020 2020 2074 7279 3a0d 0a20 2020 2020       try:..     
+00005b90: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00005ba0: 3d20 7265 7175 6573 7473 2e70 6f73 7428  = requests.post(
+00005bb0: 6622 7b67 4f72 6967 696e 4f53 4149 537d  f"{gOriginOSAIS}
+00005bc0: 6170 692f 7631 2f70 7562 6c69 632f 7669  api/v1/public/vi
+00005bd0: 7274 7561 6c61 692f 7265 6769 7374 6572  rtualai/register
+00005be0: 222c 2068 6561 6465 7273 3d68 6561 6465  ", headers=heade
+00005bf0: 7273 2c20 6461 7461 3d6a 736f 6e2e 6475  rs, data=json.du
+00005c00: 6d70 7328 6f62 6a50 6172 616d 2929 0d0a  mps(objParam))..
+00005c10: 2020 2020 2020 2020 2020 2020 6f62 6a52              objR
+00005c20: 6573 3d72 6573 706f 6e73 652e 6a73 6f6e  es=response.json
+00005c30: 2829 5b22 6461 7461 225d 0d0a 2020 2020  ()["data"]..    
+00005c40: 2020 2020 2020 2020 6966 206f 626a 5265          if objRe
+00005c50: 7320 6973 204e 6f6e 653a 0d0a 2020 2020  s is None:..    
+00005c60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00005c70: 7428 2243 4f55 4c44 204e 4f54 2052 4547  t("COULD NOT REG
+00005c80: 4953 5445 522c 2073 746f 7070 696e 6720  ISTER, stopping 
+00005c90: 6974 2068 6572 6522 290d 0a20 2020 2020  it here")..     
+00005ca0: 2020 2020 2020 2020 2020 2073 7973 2e65             sys.e
+00005cb0: 7869 7428 290d 0a0d 0a20 2020 2020 2020  xit()....       
+00005cc0: 2020 2020 2067 546f 6b65 6e3d 6f62 6a52       gToken=objR
+00005cd0: 6573 5b22 746f 6b65 6e22 5d0d 0a20 2020  es["token"]..   
+00005ce0: 2020 2020 2020 2020 2067 5365 6372 6574           gSecret
+00005cf0: 3d6f 626a 5265 735b 2273 6563 7265 7422  =objRes["secret"
+00005d00: 5d0d 0a20 2020 2020 2020 2020 2020 2070  ]..            p
+00005d10: 7269 6e74 2822 5765 2061 7265 2052 4547  rint("We are REG
+00005d20: 4953 5445 5245 4420 7769 7468 204f 5341  ISTERED with OSA
+00005d30: 4953 2050 726f 6422 290d 0a20 2020 2020  IS Prod")..     
+00005d40: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00005d50: 696f 6e20 6173 2065 7272 3a0d 0a20 2020  ion as err:..   
+00005d60: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+00005d70: 4352 4954 4943 414c 3a20 222b 6572 722e  CRITICAL: "+err.
+00005d80: 6d73 6729 0d0a 2020 2020 2020 2020 2020  msg)..          
+00005d90: 2020 7261 6973 6520 6572 720d 0a0d 0a20    raise err.... 
+00005da0: 2020 2023 2320 7265 6720 7769 7468 204c     ## reg with L
+00005db0: 6f63 616c 204f 5341 4953 2028 6465 6275  ocal OSAIS (debu
+00005dc0: 6729 0d0a 2020 2020 656c 7365 3a0d 0a20  g)..    else:.. 
+00005dd0: 2020 2020 2020 2074 7279 3a0d 0a20 2020         try:..   
+00005de0: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
+00005df0: 6520 3d20 7265 7175 6573 7473 2e70 6f73  e = requests.pos
+00005e00: 7428 6622 7b67 4f72 6967 696e 4c6f 6361  t(f"{gOriginLoca
+00005e10: 6c4f 5341 4953 7d61 7069 2f76 312f 7075  lOSAIS}api/v1/pu
+00005e20: 626c 6963 2f76 6972 7475 616c 6169 2f72  blic/virtualai/r
+00005e30: 6567 6973 7465 7222 2c20 6865 6164 6572  egister", header
+00005e40: 733d 6865 6164 6572 732c 2064 6174 613d  s=headers, data=
+00005e50: 6a73 6f6e 2e64 756d 7073 286f 626a 5061  json.dumps(objPa
+00005e60: 7261 6d29 290d 0a20 2020 2020 2020 2020  ram))..         
+00005e70: 2020 206f 626a 5265 733d 7265 7370 6f6e     objRes=respon
+00005e80: 7365 2e6a 736f 6e28 295b 2264 6174 6122  se.json()["data"
+00005e90: 5d0d 0a20 2020 2020 2020 2020 2020 2069  ]..            i
+00005ea0: 6620 6f62 6a52 6573 2069 7320 4e6f 6e65  f objRes is None
+00005eb0: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
+00005ec0: 2020 2070 7269 6e74 2822 434f 554c 4420     print("COULD 
+00005ed0: 4e4f 5420 5245 4749 5354 4552 2077 6974  NOT REGISTER wit
+00005ee0: 6820 6465 6275 6722 290d 0a0d 0a20 2020  h debug")....   
+00005ef0: 2020 2020 2020 2020 2067 546f 6b65 6e4c           gTokenL
+00005f00: 6f63 616c 3d6f 626a 5265 735b 2274 6f6b  ocal=objRes["tok
+00005f10: 656e 225d 0d0a 2020 2020 2020 2020 2020  en"]..          
+00005f20: 2020 6753 6563 7265 744c 6f63 616c 3d6f    gSecretLocal=o
+00005f30: 626a 5265 735b 2273 6563 7265 7422 5d0d  bjRes["secret"].
+00005f40: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
+00005f50: 6e74 2822 5765 2061 7265 2052 4547 4953  nt("We are REGIS
+00005f60: 5445 5245 4420 7769 7468 204f 5341 4953  TERED with OSAIS
+00005f70: 204c 6f63 616c 2028 6465 6275 6729 2229   Local (debug)")
+00005f80: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
+00005f90: 2045 7863 6570 7469 6f6e 2061 7320 6572   Exception as er
+00005fa0: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
+00005fb0: 7072 696e 7428 2243 5249 5449 4341 4c3a  print("CRITICAL:
+00005fc0: 2022 2b65 7272 2e6d 7367 290d 0a20 2020   "+err.msg)..   
+00005fd0: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
+00005fe0: 7272 0d0a 0d0a 2020 2020 7265 7475 726e  rr....    return
+00005ff0: 2054 7275 650d 0a0d 0a23 2041 7574 6865   True....# Authe
+00006000: 6e74 6963 6174 6520 696e 746f 204f 5341  nticate into OSA
+00006010: 4953 0d0a 6465 6620 5f6c 6f67 696e 5641  IS..def _loginVA
+00006020: 4928 293a 0d0a 2020 2020 676c 6f62 616c  I():..    global
+00006030: 2067 546f 6b65 6e0d 0a20 2020 2067 6c6f   gToken..    glo
+00006040: 6261 6c20 6753 6563 7265 740d 0a20 2020  bal gSecret..   
+00006050: 2067 6c6f 6261 6c20 6741 7574 6854 6f6b   global gAuthTok
+00006060: 656e 0d0a 2020 2020 676c 6f62 616c 2067  en..    global g
+00006070: 546f 6b65 6e4c 6f63 616c 0d0a 2020 2020  TokenLocal..    
+00006080: 676c 6f62 616c 2067 5365 6372 6574 4c6f  global gSecretLo
+00006090: 6361 6c0d 0a20 2020 2067 6c6f 6261 6c20  cal..    global 
+000060a0: 6741 7574 6854 6f6b 656e 4c6f 6361 6c0d  gAuthTokenLocal.
+000060b0: 0a0d 0a20 2020 2068 6561 6465 7273 203d  ...    headers =
+000060c0: 207b 0d0a 2020 2020 2020 2020 2243 6f6e   {..        "Con
+000060d0: 7465 6e74 2d54 7970 6522 3a20 2261 7070  tent-Type": "app
+000060e0: 6c69 6361 7469 6f6e 2f6a 736f 6e22 0d0a  lication/json"..
+000060f0: 2020 2020 7d0d 0a0d 0a20 2020 2069 6620      }....    if 
+00006100: 6754 6f6b 656e 213d 204e 6f6e 653a 0d0a  gToken!= None:..
+00006110: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+00006120: 2020 2020 2020 2020 2020 7265 7370 6f6e            respon
+00006130: 7365 203d 2072 6571 7565 7374 732e 706f  se = requests.po
+00006140: 7374 2866 227b 674f 7269 6769 6e4f 5341  st(f"{gOriginOSA
+00006150: 4953 7d61 7069 2f76 312f 7075 626c 6963  IS}api/v1/public
+00006160: 2f76 6972 7475 616c 6169 2f6c 6f67 696e  /virtualai/login
+00006170: 222c 2068 6561 6465 7273 3d68 6561 6465  ", headers=heade
+00006180: 7273 2c20 6461 7461 3d6a 736f 6e2e 6475  rs, data=json.du
+00006190: 6d70 7328 7b0d 0a20 2020 2020 2020 2020  mps({..         
+000061a0: 2020 2020 2020 2022 746f 6b65 6e22 3a20         "token": 
+000061b0: 6754 6f6b 656e 2c0d 0a20 2020 2020 2020  gToken,..       
+000061c0: 2020 2020 2020 2020 2022 7365 6372 6574           "secret
+000061d0: 223a 2067 5365 6372 6574 0d0a 2020 2020  ": gSecret..    
+000061e0: 2020 2020 2020 2020 7d29 290d 0a0d 0a20          })).... 
+000061f0: 2020 2020 2020 2020 2020 206f 626a 5265             objRe
+00006200: 733d 7265 7370 6f6e 7365 2e6a 736f 6e28  s=response.json(
+00006210: 295b 2264 6174 6122 5d0d 0a20 2020 2020  )["data"]..     
+00006220: 2020 2020 2020 2069 6620 6f62 6a52 6573         if objRes
+00006230: 2069 7320 4e6f 6e65 3a0d 0a20 2020 2020   is None:..     
+00006240: 2020 2020 2020 2020 2020 2070 7269 6e74             print
+00006250: 2822 434f 554c 4420 4e4f 5420 4c4f 4749  ("COULD NOT LOGI
+00006260: 4e2c 2073 746f 7070 696e 6720 6974 2068  N, stopping it h
+00006270: 6572 6522 290d 0a20 2020 2020 2020 2020  ere")..         
+00006280: 2020 2020 2020 2073 7973 2e65 7869 7428         sys.exit(
+00006290: 290d 0a20 2020 2020 2020 2020 2020 2070  )..            p
+000062a0: 7269 6e74 2822 5765 2067 6f74 2061 6e20  rint("We got an 
+000062b0: 6175 7468 656e 7469 6361 7469 6f6e 2074  authentication t
+000062c0: 6f6b 656e 2069 6e74 6f20 4f53 4149 5322  oken into OSAIS"
+000062d0: 290d 0a20 2020 2020 2020 2020 2020 2067  )..            g
+000062e0: 4175 7468 546f 6b65 6e3d 6f62 6a52 6573  AuthToken=objRes
+000062f0: 5b22 6175 7468 546f 6b65 6e22 5d20 2020  ["authToken"]   
+00006300: 200d 0a20 2020 2020 2020 2065 7863 6570   ..        excep
+00006310: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+00006320: 7272 3a0d 0a20 2020 2020 2020 2020 2020  rr:..           
+00006330: 2070 7269 6e74 2822 4352 4954 4943 414c   print("CRITICAL
+00006340: 3a20 222b 6572 722e 6d73 6729 0d0a 2020  : "+err.msg)..  
+00006350: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00006360: 6572 720d 0a0d 0a20 2020 2069 6620 6754  err....    if gT
+00006370: 6f6b 656e 4c6f 6361 6c21 3d20 4e6f 6e65  okenLocal!= None
+00006380: 3a0d 0a20 2020 2020 2020 2074 7279 3a0d  :..        try:.
+00006390: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+000063a0: 706f 6e73 6520 3d20 7265 7175 6573 7473  ponse = requests
+000063b0: 2e70 6f73 7428 6622 7b67 4f72 6967 696e  .post(f"{gOrigin
+000063c0: 4c6f 6361 6c4f 5341 4953 7d61 7069 2f76  LocalOSAIS}api/v
+000063d0: 312f 7075 626c 6963 2f76 6972 7475 616c  1/public/virtual
+000063e0: 6169 2f6c 6f67 696e 222c 2068 6561 6465  ai/login", heade
+000063f0: 7273 3d68 6561 6465 7273 2c20 6461 7461  rs=headers, data
+00006400: 3d6a 736f 6e2e 6475 6d70 7328 7b0d 0a20  =json.dumps({.. 
+00006410: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00006420: 746f 6b65 6e22 3a20 6754 6f6b 656e 4c6f  token": gTokenLo
+00006430: 6361 6c2c 0d0a 2020 2020 2020 2020 2020  cal,..          
+00006440: 2020 2020 2020 2273 6563 7265 7422 3a20        "secret": 
+00006450: 6753 6563 7265 744c 6f63 616c 0d0a 2020  gSecretLocal..  
+00006460: 2020 2020 2020 2020 2020 7d29 290d 0a0d            }))...
+00006470: 0a20 2020 2020 2020 2020 2020 206f 626a  .            obj
+00006480: 5265 733d 7265 7370 6f6e 7365 2e6a 736f  Res=response.jso
+00006490: 6e28 295b 2264 6174 6122 5d0d 0a20 2020  n()["data"]..   
+000064a0: 2020 2020 2020 2020 2069 6620 6f62 6a52           if objR
+000064b0: 6573 2069 7320 4e6f 6e65 3a0d 0a20 2020  es is None:..   
+000064c0: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+000064d0: 6e74 2822 434f 554c 4420 4e4f 5420 4c4f  nt("COULD NOT LO
+000064e0: 4749 4e20 696e 746f 204f 5341 4953 204c  GIN into OSAIS L
+000064f0: 6f63 616c 2229 0d0a 2020 2020 2020 2020  ocal")..        
+00006500: 2020 2020 7072 696e 7428 2257 6520 676f      print("We go
+00006510: 7420 616e 2061 7574 6865 6e74 6963 6174  t an authenticat
+00006520: 696f 6e20 746f 6b65 6e20 696e 746f 204f  ion token into O
+00006530: 5341 4953 204c 6f63 616c 2028 6465 6275  SAIS Local (debu
+00006540: 6729 2229 0d0a 2020 2020 2020 2020 2020  g)")..          
+00006550: 2020 6741 7574 6854 6f6b 656e 4c6f 6361    gAuthTokenLoca
+00006560: 6c3d 6f62 6a52 6573 5b22 6175 7468 546f  l=objRes["authTo
+00006570: 6b65 6e22 5d20 2020 200d 0a20 2020 2020  ken"]    ..     
+00006580: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+00006590: 696f 6e20 6173 2065 7272 3a0d 0a20 2020  ion as err:..   
+000065a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000065b0: 5472 7565 0d0a 0d0a 2020 2020 7265 7475  True....    retu
+000065c0: 726e 2054 7275 650d 0a0d 0a0d 0a23 2320  rn True......## 
+000065d0: 5055 424c 4943 202d 2041 7574 6865 6e74  PUBLIC - Authent
+000065e0: 6963 6174 6520 7468 6520 5669 7274 7561  icate the Virtua
+000065f0: 6c20 4149 2069 6e74 6f20 4f53 4149 530d  l AI into OSAIS.
+00006600: 0a64 6566 206f 7361 6973 5f61 7574 6865  .def osais_authe
+00006610: 6e74 6963 6174 6541 4928 293a 0d0a 2020  nticateAI():..  
+00006620: 2020 676c 6f62 616c 2067 4973 5669 7274    global gIsVirt
+00006630: 7561 6c41 490d 0a20 2020 2067 6c6f 6261  ualAI..    globa
+00006640: 6c20 674f 7269 6769 6e4f 5341 4953 0d0a  l gOriginOSAIS..
+00006650: 2020 2020 676c 6f62 616c 2067 4973 5363      global gIsSc
+00006660: 6865 6475 6c65 640d 0a20 2020 200d 0a20  heduled..    .. 
+00006670: 2020 2052 6573 703d 7b22 6461 7461 223a     Resp={"data":
+00006680: 204e 6f6e 657d 0d0a 2020 2020 6966 2067   None}..    if g
+00006690: 4973 5669 7274 7561 6c41 493a 0d0a 0d0a  IsVirtualAI:....
+000066a0: 2020 2020 2020 2020 7472 793a 0d0a 2020          try:..  
+000066b0: 2020 2020 2020 2020 2020 7265 7370 3d20            resp= 
+000066c0: 5f72 6567 6973 7465 7256 4149 2829 0d0a  _registerVAI()..
+000066d0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
+000066e0: 3d5f 6c6f 6769 6e56 4149 2829 0d0a 2020  =_loginVAI()..  
+000066f0: 2020 2020 2020 6578 6365 7074 2045 7863        except Exc
+00006700: 6570 7469 6f6e 2061 7320 6572 723a 0d0a  eption as err:..
+00006710: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00006720: 7428 2243 5249 5449 4341 4c3a 2022 2b65  t("CRITICAL: "+e
+00006730: 7272 2e6d 7367 290d 0a20 2020 2020 2020  rr.msg)..       
+00006740: 2020 2020 2072 6169 7365 2065 7272 0d0a       raise err..
+00006750: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+00006760: 2020 2320 5275 6e20 7468 6520 7363 6865    # Run the sche
+00006770: 6475 6c65 720d 0a20 2020 2020 2020 2069  duler..        i
+00006780: 6620 6749 7353 6368 6564 756c 6564 3d3d  f gIsScheduled==
+00006790: 4661 6c73 653a 0d0a 2020 2020 2020 2020  False:..        
+000067a0: 2020 2020 6749 7353 6368 6564 756c 6564      gIsScheduled
+000067b0: 3d54 7275 650d 0a20 2020 2020 2020 2020  =True..         
+000067c0: 2020 2073 6368 6564 756c 652e 6576 6572     schedule.ever
+000067d0: 7928 292e 6461 792e 6174 2822 3130 3a33  y().day.at("10:3
+000067e0: 3022 292e 646f 285f 6c6f 6769 6e56 4149  0").do(_loginVAI
+000067f0: 290d 0a0d 0a20 2020 2072 6574 7572 6e20  )....    return 
+00006800: 7265 7370 0d0a 0d0a 2323 202d 2d2d 2d2d  resp....## -----
 00006810: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00006820: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00006830: 2d2d 2d2d 2d2d 0d0a 0d0a 2323 2050 5542  ------....## PUB
-00006840: 4c49 4320 2d20 7061 7273 6520 6172 6773  LIC - parse args
-00006850: 2066 6f72 204f 5341 4953 2028 6e6f 7420   for OSAIS (not 
-00006860: 7468 6f73 6520 666f 7220 4149 290d 0a64  those for AI)..d
-00006870: 6566 206f 7361 6973 5f69 6e69 7450 6172  ef osais_initPar
-00006880: 7365 7228 6141 7267 293a 0d0a 2020 2020  ser(aArg):..    
-00006890: 676c 6f62 616c 2067 4172 6773 4f53 4149  global gArgsOSAI
-000068a0: 530d 0a20 2020 2067 6c6f 6261 6c20 6749  S..    global gI
-000068b0: 6e70 7574 4469 720d 0a20 2020 2067 6c6f  nputDir..    glo
-000068c0: 6261 6c20 674f 7574 7075 7444 6972 0d0a  bal gOutputDir..
-000068d0: 2020 2020 676c 6f62 616c 2067 4973 5761      global gIsWa
-000068e0: 726d 7570 0d0a 0d0a 2020 2020 2320 4372  rmup....    # Cr
-000068f0: 6561 7465 2074 6865 2070 6172 7365 720d  eate the parser.
-00006900: 0a20 2020 2076 715f 7061 7273 6572 203d  .    vq_parser =
-00006910: 2061 7267 7061 7273 652e 4172 6775 6d65   argparse.Argume
-00006920: 6e74 5061 7273 6572 2864 6573 6372 6970  ntParser(descrip
-00006930: 7469 6f6e 3d27 4172 6720 7061 7273 6572  tion='Arg parser
-00006940: 2069 6e69 7420 6279 204f 5341 4953 2729   init by OSAIS')
-00006950: 0d0a 0d0a 2020 2020 2320 4164 6420 7468  ....    # Add th
-00006960: 6520 4149 2047 6174 6577 6179 202f 204f  e AI Gateway / O
-00006970: 7065 6e53 6f75 7263 6541 4973 2061 7267  penSourceAIs arg
-00006980: 756d 656e 7473 0d0a 2020 2020 7671 5f70  uments..    vq_p
-00006990: 6172 7365 722e 6164 645f 6172 6775 6d65  arser.add_argume
-000069a0: 6e74 2822 2d6f 7269 6722 2c20 2022 2d2d  nt("-orig",  "--
-000069b0: 6f72 6967 696e 222c 2074 7970 653d 7374  origin", type=st
-000069c0: 722c 2068 656c 703d 2241 4920 4761 7465  r, help="AI Gate
-000069d0: 7761 7920 7365 7276 6572 206f 7269 6769  way server origi
-000069e0: 6e22 2c20 6465 6661 756c 743d 6622 6874  n", default=f"ht
-000069f0: 7470 3a2f 2f7b 6749 504c 6f63 616c 7d3a  tp://{gIPLocal}:
-00006a00: 7b67 506f 7274 4761 7465 7761 797d 2f22  {gPortGateway}/"
-00006a10: 202c 2064 6573 743d 274f 5341 4953 5f6f   , dest='OSAIS_o
-00006a20: 7269 6769 6e27 2920 2020 2020 2323 2020  rigin')     ##  
-00006a30: 7468 6973 2069 7320 666f 7220 636f 6d6d  this is for comm
-00006a40: 7320 7769 7468 2041 4920 4761 7465 7761  s with AI Gatewa
-00006a50: 790d 0a20 2020 2076 715f 7061 7273 6572  y..    vq_parser
-00006a60: 2e61 6464 5f61 7267 756d 656e 7428 222d  .add_argument("-
-00006a70: 7422 2c20 2022 2d2d 746f 6b65 6e22 2c20  t",  "--token", 
-00006a80: 7479 7065 3d73 7472 2c20 6865 6c70 3d22  type=str, help="
-00006a90: 4f70 656e 536f 7572 6365 4149 7320 746f  OpenSourceAIs to
-00006aa0: 6b65 6e22 2c20 6465 6661 756c 743d 2230  ken", default="0
-00006ab0: 222c 2064 6573 743d 2774 6f6b 656e 4149  ", dest='tokenAI
-00006ac0: 2729 2020 2020 2020 2020 2020 2020 2020  ')              
-00006ad0: 2023 2320 2074 6869 7320 6973 2066 6f72   ##  this is for
-00006ae0: 2063 6f6d 6d73 2077 6974 6820 4f70 656e   comms with Open
-00006af0: 536f 7572 6365 4149 730d 0a20 2020 2076  SourceAIs..    v
-00006b00: 715f 7061 7273 6572 2e61 6464 5f61 7267  q_parser.add_arg
-00006b10: 756d 656e 7428 222d 7522 2c20 2022 2d2d  ument("-u",  "--
-00006b20: 7573 6572 6e61 6d65 222c 2074 7970 653d  username", type=
-00006b30: 7374 722c 2068 656c 703d 224f 7065 6e53  str, help="OpenS
-00006b40: 6f75 7263 6541 4973 2075 7365 726e 616d  ourceAIs usernam
-00006b50: 6522 2c20 6465 6661 756c 743d 2222 2c20  e", default="", 
-00006b60: 6465 7374 3d27 7573 6572 6e61 6d65 2729  dest='username')
-00006b70: 2020 2020 2020 2023 2320 2074 6869 7320         ##  this 
-00006b80: 6973 2066 6f72 2063 6f6d 6d73 2077 6974  is for comms wit
-00006b90: 6820 4f70 656e 536f 7572 6365 4149 730d  h OpenSourceAIs.
-00006ba0: 0a20 2020 2076 715f 7061 7273 6572 2e61  .    vq_parser.a
-00006bb0: 6464 5f61 7267 756d 656e 7428 222d 7569  dd_argument("-ui
-00006bc0: 6422 2c20 2022 2d2d 756e 6971 7565 5f69  d",  "--unique_i
-00006bd0: 6422 2c20 7479 7065 3d69 6e74 2c20 6865  d", type=int, he
-00006be0: 6c70 3d22 556e 6971 7565 2049 4420 6f66  lp="Unique ID of
-00006bf0: 2074 6869 7320 4149 2073 6573 7369 6f6e   this AI session
-00006c00: 222c 2064 6566 6175 6c74 3d30 2c20 6465  ", default=0, de
-00006c10: 7374 3d27 7569 6427 2920 2020 2023 2320  st='uid')    ## 
-00006c20: 2074 6869 7320 6973 2066 6f72 2063 6f6d   this is for com
-00006c30: 6d73 2077 6974 6820 4f70 656e 536f 7572  ms with OpenSour
-00006c40: 6365 4149 730d 0a20 2020 2076 715f 7061  ceAIs..    vq_pa
-00006c50: 7273 6572 2e61 6464 5f61 7267 756d 656e  rser.add_argumen
-00006c60: 7428 222d 6f64 6972 222c 2022 2d2d 6f75  t("-odir", "--ou
-00006c70: 7464 6972 222c 2074 7970 653d 7374 722c  tdir", type=str,
-00006c80: 2068 656c 703d 224f 7574 7075 7420 6469   help="Output di
-00006c90: 7265 6374 6f72 7922 2c20 6465 6661 756c  rectory", defaul
-00006ca0: 743d 674f 7574 7075 7444 6972 2c20 6465  t=gOutputDir, de
-00006cb0: 7374 3d27 6f75 7464 6972 2729 0d0a 2020  st='outdir')..  
-00006cc0: 2020 7671 5f70 6172 7365 722e 6164 645f    vq_parser.add_
-00006cd0: 6172 6775 6d65 6e74 2822 2d69 6469 7222  argument("-idir"
-00006ce0: 2c20 222d 2d69 6e64 6972 222c 2074 7970  , "--indir", typ
-00006cf0: 653d 7374 722c 2068 656c 703d 2269 6e70  e=str, help="inp
-00006d00: 7574 2064 6972 6563 746f 7279 222c 2064  ut directory", d
-00006d10: 6566 6175 6c74 3d67 496e 7075 7444 6972  efault=gInputDir
-00006d20: 2c20 6465 7374 3d27 696e 6469 7227 290d  , dest='indir').
-00006d30: 0a20 2020 2076 715f 7061 7273 6572 2e61  .    vq_parser.a
-00006d40: 6464 5f61 7267 756d 656e 7428 222d 6c6f  dd_argument("-lo
-00006d50: 6361 6c22 2c20 222d 2d69 736c 6f63 616c  cal", "--islocal
-00006d60: 222c 2074 7970 653d 626f 6f6c 2c20 6865  ", type=bool, he
-00006d70: 6c70 3d22 6973 206c 6f63 616c 206f 7220  lp="is local or 
-00006d80: 7072 6f64 3f22 2c20 6465 6661 756c 743d  prod?", default=
-00006d90: 4661 6c73 652c 2064 6573 743d 2769 734c  False, dest='isL
-00006da0: 6f63 616c 2729 0d0a 2020 2020 7671 5f70  ocal')..    vq_p
-00006db0: 6172 7365 722e 6164 645f 6172 6775 6d65  arser.add_argume
-00006dc0: 6e74 2822 2d63 7963 6c65 222c 2022 2d2d  nt("-cycle", "--
-00006dd0: 6379 636c 6522 2c20 7479 7065 3d69 6e74  cycle", type=int
-00006de0: 2c20 6865 6c70 3d22 6379 636c 6522 2c20  , help="cycle", 
-00006df0: 6465 6661 756c 743d 302c 2064 6573 743d  default=0, dest=
-00006e00: 2763 7963 6c65 2729 0d0a 2020 2020 7671  'cycle')..    vq
-00006e10: 5f70 6172 7365 722e 6164 645f 6172 6775  _parser.add_argu
-00006e20: 6d65 6e74 2822 2d66 696c 656e 616d 6522  ment("-filename"
-00006e30: 2c20 222d 2d66 696c 656e 616d 6522 2c20  , "--filename", 
-00006e40: 7479 7065 3d73 7472 2c20 6865 6c70 3d22  type=str, help="
-00006e50: 6669 6c65 6e61 6d65 222c 2064 6566 6175  filename", defau
-00006e60: 6c74 3d22 6465 6661 756c 7422 2c20 6465  lt="default", de
-00006e70: 7374 3d27 6669 6c65 6e61 6d65 2729 0d0a  st='filename')..
-00006e80: 2020 2020 7671 5f70 6172 7365 722e 6164      vq_parser.ad
-00006e90: 645f 6172 6775 6d65 6e74 2822 2d77 6172  d_argument("-war
-00006ea0: 6d75 7022 2c20 222d 2d77 6172 6d75 7022  mup", "--warmup"
-00006eb0: 2c20 7479 7065 3d62 6f6f 6c2c 2068 656c  , type=bool, hel
-00006ec0: 703d 2277 6172 6d75 7022 2c20 6465 6661  p="warmup", defa
-00006ed0: 756c 743d 4661 6c73 652c 2064 6573 743d  ult=False, dest=
-00006ee0: 2777 6172 6d75 7027 290d 0a0d 0a20 2020  'warmup')....   
-00006ef0: 2067 4172 6773 4f53 4149 5320 3d20 7671   gArgsOSAIS = vq
-00006f00: 5f70 6172 7365 722e 7061 7273 655f 6172  _parser.parse_ar
-00006f10: 6773 2861 4172 6729 0d0a 2020 2020 6749  gs(aArg)..    gI
-00006f20: 7357 6172 6d75 703d 6741 7267 734f 5341  sWarmup=gArgsOSA
-00006f30: 4953 2e77 6172 6d75 700d 0a20 2020 2072  IS.warmup..    r
-00006f40: 6574 7572 6e20 5472 7565 0d0a 0d0a 2323  eturn True....##
-00006f50: 2050 5542 4c49 4320 2d20 7275 6e20 7468   PUBLIC - run th
-00006f60: 6520 4149 2028 6174 206c 6561 7374 2074  e AI (at least t
-00006f70: 7279 290d 0a64 6566 206f 7361 6973 5f72  ry)..def osais_r
-00006f80: 756e 4149 282a 6172 6773 293a 0d0a 2020  unAI(*args):..  
-00006f90: 2020 676c 6f62 616c 2067 4973 4275 7379    global gIsBusy
-00006fa0: 0d0a 2020 2020 676c 6f62 616c 2067 4150  ..    global gAP
-00006fb0: 726f 6365 7373 6564 0d0a 2020 2020 676c  rocessed..    gl
-00006fc0: 6f62 616c 2067 4e61 6d65 200d 0a20 2020  obal gName ..   
-00006fd0: 2067 6c6f 6261 6c20 674c 6173 7450 726f   global gLastPro
-00006fe0: 6365 7373 5374 6172 745f 6174 0d0a 0d0a  cessStart_at....
-00006ff0: 2020 2020 2323 2067 6574 2061 7267 730d      ## get args.
-00007000: 0a20 2020 2066 6e5f 7275 6e3d 6172 6773  .    fn_run=args
-00007010: 5b30 5d0d 0a20 2020 205f 6172 6773 3d61  [0]..    _args=a
-00007020: 7267 735b 315d 0d0a 0d0a 2020 2020 2323  rgs[1]....    ##
-00007030: 2064 6f20 6e6f 7420 7072 6f63 6573 7320   do not process 
-00007040: 7477 6963 6520 7361 6d65 2075 6964 0d0a  twice same uid..
-00007050: 2020 2020 5f75 6964 3d5f 6172 6773 2e67      _uid=_args.g
-00007060: 6574 2827 2d75 6964 2729 0d0a 2020 2020  et('-uid')..    
-00007070: 6966 205f 7569 6420 696e 2067 4150 726f  if _uid in gAPro
-00007080: 6365 7373 6564 3a0d 0a20 2020 2020 2020  cessed:..       
-00007090: 2072 6574 7572 6e20 2022 6e6f 7420 7072   return  "not pr
-000070a0: 6f63 6573 7369 6e67 2c20 616c 7265 6164  ocessing, alread
-000070b0: 7920 7472 6965 642e 2e2e 220d 0a0d 0a20  y tried...".... 
-000070c0: 2020 2023 2320 7374 6172 7420 7469 6d65     ## start time
-000070d0: 0d0a 2020 2020 6749 7342 7573 793d 5472  ..    gIsBusy=Tr
-000070e0: 7565 0d0a 2020 2020 6265 675f 6461 7465  ue..    beg_date
-000070f0: 203d 2064 6174 6574 696d 652e 7574 636e   = datetime.utcn
-00007100: 6f77 2829 0d0a 0d0a 2020 2020 2323 2072  ow()....    ## r
-00007110: 6570 726f 6365 7373 2041 4920 6172 6773  eprocess AI args
-00007120: 0d0a 2020 2020 6141 7267 466f 7270 6172  ..    aArgForpar
-00007130: 7365 7241 493d 5f67 6574 4172 6773 285f  serAI=_getArgs(_
-00007140: 6172 6773 290d 0a20 2020 2061 7267 735f  args)..    args_
-00007150: 4578 636c 7573 6976 654f 5341 4953 3d5b  ExclusiveOSAIS=[
-00007160: 272d 6f72 6967 272c 2027 2d74 272c 2027  '-orig', '-t', '
-00007170: 2d75 272c 2027 2d75 6964 272c 2027 2d6c  -u', '-uid', '-l
-00007180: 6f63 616c 272c 2027 2d63 7963 6c65 272c  ocal', '-cycle',
-00007190: 2027 2d77 6172 6d75 7027 5d0d 0a20 2020   '-warmup']..   
-000071a0: 2061 4172 6746 6f72 7061 7273 6572 4149   aArgForparserAI
-000071b0: 3d5f 6172 6773 4672 6f6d 4669 6c74 6572  =_argsFromFilter
-000071c0: 2861 4172 6746 6f72 7061 7273 6572 4149  (aArgForparserAI
-000071d0: 2c20 6172 6773 5f45 7863 6c75 7369 7665  , args_Exclusive
-000071e0: 4f53 4149 532c 2046 616c 7365 290d 0a0d  OSAIS, False)...
-000071f0: 0a20 2020 2023 2320 7072 6f63 6573 7320  .    ## process 
-00007200: 7468 6520 6669 6c65 6e61 6d65 2070 6173  the filename pas
-00007210: 7365 6420 696e 2064 6972 2028 6361 7365  sed in dir (case
-00007220: 206c 6f63 616c 686f 7374 202f 2041 4920   localhost / AI 
-00007230: 4761 7465 7761 7929 2c20 6f72 2064 6f77  Gateway), or dow
-00007240: 6e6c 6f61 6420 6669 6c65 2066 726f 6d20  nload file from 
-00007250: 5552 4c20 2863 6173 6520 4149 2072 756e  URL (case AI run
-00007260: 6e69 6e67 2061 7320 5669 7274 7561 6c20  ning as Virtual 
-00007270: 4149 290d 0a20 2020 205f 696e 7075 743d  AI)..    _input=
-00007280: 4e6f 6e65 0d0a 2020 2020 5f66 696c 656e  None..    _filen
-00007290: 616d 653d 5f61 7267 732e 6765 7428 272d  ame=_args.get('-
-000072a0: 6669 6c65 6e61 6d65 2729 0d0a 2020 2020  filename')..    
-000072b0: 5f75 726c 5570 6c6f 6164 3d5f 6172 6773  _urlUpload=_args
-000072c0: 2e67 6574 2827 7572 6c5f 7570 6c6f 6164  .get('url_upload
-000072d0: 2729 0d0a 2020 2020 6966 206e 6f74 205f  ')..    if not _
-000072e0: 6669 6c65 6e61 6d65 2061 6e64 205f 7572  filename and _ur
-000072f0: 6c55 706c 6f61 643a 0d0a 2020 2020 2020  lUpload:..      
-00007300: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
-00007310: 2020 2020 5f69 6e70 7574 3d64 6f77 6e6c      _input=downl
-00007320: 6f61 6449 6d61 6765 285f 7572 6c55 706c  oadImage(_urlUpl
-00007330: 6f61 6429 0d0a 2020 2020 2020 2020 2020  oad)..          
-00007340: 2020 6966 205f 696e 7075 743a 0d0a 2020    if _input:..  
-00007350: 2020 2020 2020 2020 2020 2020 2020 6141                aA
-00007360: 7267 466f 7270 6172 7365 7241 492e 6170  rgForparserAI.ap
-00007370: 7065 6e64 2822 2d66 696c 656e 616d 6522  pend("-filename"
-00007380: 290d 0a20 2020 2020 2020 2020 2020 2020  )..             
-00007390: 2020 2061 4172 6746 6f72 7061 7273 6572     aArgForparser
-000073a0: 4149 2e61 7070 656e 6428 5f69 6e70 7574  AI.append(_input
-000073b0: 290d 0a20 2020 2020 2020 2020 2020 2065  )..            e
-000073c0: 6c73 653a 0d0a 2020 2020 2020 2020 2020  lse:..          
-000073d0: 2020 2020 2020 2323 206d 696e 2072 6571        ## min req
-000073e0: 7569 7265 6d65 6e74 730d 0a20 2020 2020  uirements..     
-000073f0: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00007400: 2822 6e6f 2069 6d61 6765 2074 6f20 7072  ("no image to pr
-00007410: 6f63 6573 7322 290d 0a20 2020 2020 2020  ocess")..       
-00007420: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00007430: 2269 6e70 7574 2072 6571 7569 7265 6422  "input required"
-00007440: 0d0a 2020 2020 2020 2020 6578 6365 7074  ..        except
-00007450: 2045 7863 6570 7469 6f6e 2061 7320 6572   Exception as er
-00007460: 723a 0d0a 2020 2020 2020 2020 2020 2020  r:..            
-00007470: 7072 696e 7428 2243 5249 5449 4341 4c3a  print("CRITICAL:
-00007480: 2022 2b65 7272 2e6d 7367 290d 0a20 2020   "+err.msg)..   
-00007490: 2020 2020 2020 2020 2072 6169 7365 2065           raise e
-000074a0: 7272 0d0a 2020 2020 0d0a 2020 2020 2323  rr..    ..    ##
-000074b0: 2049 6e69 7420 4f53 4149 5320 5061 7261   Init OSAIS Para
-000074c0: 6d73 2028 6672 6f6d 2061 6c6c 2061 7267  ms (from all arg
-000074d0: 732c 206b 6565 7020 6f6e 6c79 2074 686f  s, keep only tho
-000074e0: 7365 2066 6f72 204f 5341 4953 290d 0a20  se for OSAIS).. 
-000074f0: 2020 2061 4172 6746 6f72 5061 7273 6572     aArgForParser
-00007500: 4f53 4149 533d 5f67 6574 4172 6773 285f  OSAIS=_getArgs(_
-00007510: 6172 6773 290d 0a20 2020 2061 7267 735f  args)..    args_
-00007520: 4578 636c 7573 6976 654f 5341 4953 2e61  ExclusiveOSAIS.a
-00007530: 7070 656e 6428 272d 6f64 6972 2729 0d0a  ppend('-odir')..
-00007540: 2020 2020 6172 6773 5f45 7863 6c75 7369      args_Exclusi
-00007550: 7665 4f53 4149 532e 6170 7065 6e64 2827  veOSAIS.append('
-00007560: 2d69 6469 7227 290d 0a20 2020 2061 4172  -idir')..    aAr
-00007570: 6746 6f72 5061 7273 6572 4f53 4149 533d  gForParserOSAIS=
-00007580: 5f61 7267 7346 726f 6d46 696c 7465 7228  _argsFromFilter(
-00007590: 6141 7267 466f 7250 6172 7365 724f 5341  aArgForParserOSA
-000075a0: 4953 2c20 6172 6773 5f45 7863 6c75 7369  IS, args_Exclusi
-000075b0: 7665 4f53 4149 532c 2054 7275 6529 0d0a  veOSAIS, True)..
-000075c0: 2020 2020 6f73 6169 735f 696e 6974 5061      osais_initPa
-000075d0: 7273 6572 2861 4172 6746 6f72 5061 7273  rser(aArgForPars
-000075e0: 6572 4f53 4149 5329 0d0a 0d0a 2020 2020  erOSAIS)....    
-000075f0: 6966 2067 4973 5761 726d 7570 3a0d 0a20  if gIsWarmup:.. 
-00007600: 2020 2020 2020 2070 7269 6e74 2822 5c72         print("\r
-00007610: 5c6e 3d3e 2057 6172 6d69 6e67 2075 702e  \n=> Warming up.
-00007620: 2e2e 205c 725c 6e22 290d 0a20 2020 2065  .. \r\n")..    e
-00007630: 6c73 653a 0d0a 2020 2020 2020 2020 7072  lse:..        pr
-00007640: 696e 7428 225c 725c 6e3d 3e20 6265 666f  int("\r\n=> befo
-00007650: 7265 2072 756e 3a20 7072 6f63 6573 7365  re run: processe
-00007660: 6420 6172 6773 2066 726f 6d20 7572 6c3a  d args from url:
-00007670: 2022 2b73 7472 2861 4172 6746 6f72 7061   "+str(aArgForpa
-00007680: 7273 6572 4149 292b 225c 725c 6e22 290d  rserAI)+"\r\n").
-00007690: 0a0d 0a20 2020 2023 23c2 a070 726f 6365  ...    ##..proce
-000076a0: 7373 696e 6720 6163 6365 7074 6564 0d0a  ssing accepted..
-000076b0: 2020 2020 674c 6173 7450 726f 6365 7373      gLastProcess
-000076c0: 5374 6172 745f 6174 3d64 6174 6574 696d  Start_at=datetim
-000076d0: 652e 7574 636e 6f77 2829 0d0a 2020 2020  e.utcnow()..    
-000076e0: 6741 5072 6f63 6573 7365 642e 6170 7065  gAProcessed.appe
-000076f0: 6e64 285f 7569 6429 0d0a 0d0a 2020 2020  nd(_uid)....    
-00007700: 2323 206e 6f74 6966 7920 4f53 4149 5320  ## notify OSAIS 
-00007710: 2873 7461 7274 290d 0a20 2020 2043 7265  (start)..    Cre
-00007720: 6473 5061 7261 6d3d 6765 7443 7265 6473  dsParam=getCreds
-00007730: 5061 7261 6d73 2829 0d0a 2020 2020 4d6f  Params()..    Mo
-00007740: 7270 6869 6e67 5061 7261 6d3d 6765 744d  rphingParam=getM
-00007750: 6f72 7068 696e 6750 6172 616d 7328 290d  orphingParams().
-00007760: 0a20 2020 2053 7461 6765 5061 7261 6d3d  .    StageParam=
-00007770: 6765 7453 7461 6765 5061 7261 6d73 2841  getStageParams(A
-00007780: 495f 5052 4f47 5245 5353 5f41 495f 5354  I_PROGRESS_AI_ST
-00007790: 4152 5445 442c 2030 290d 0a20 2020 206f  ARTED, 0)..    o
-000077a0: 7361 6973 5f6e 6f74 6966 7928 4372 6564  sais_notify(Cred
-000077b0: 7350 6172 616d 2c20 4d6f 7270 6869 6e67  sParam, Morphing
-000077c0: 5061 7261 6d20 2c20 5374 6167 6550 6172  Param , StagePar
-000077d0: 616d 290d 0a0d 0a20 2020 2023 2320 7374  am)....    ## st
-000077e0: 6172 7420 7761 7463 6820 6669 6c65 2063  art watch file c
-000077f0: 7265 6174 696f 6e0d 0a20 2020 205f 6f75  reation..    _ou
-00007800: 7470 7574 3d5f 6765 744f 7574 7075 7444  tput=_getOutputD
-00007810: 6972 2829 0d0a 2020 2020 7761 7463 685f  ir()..    watch_
-00007820: 6469 7265 6374 6f72 7928 5f6f 7574 7075  directory(_outpu
-00007830: 742c 206f 7361 6973 5f6f 6e4e 6f74 6966  t, osais_onNotif
-00007840: 7946 696c 6543 7265 6174 6564 2c20 5f61  yFileCreated, _a
-00007850: 7267 7329 0d0a 0d0a 2020 2020 2323 204e  rgs)....    ## N
-00007860: 6f74 6966 204f 5341 4953 0d0a 2020 2020  otif OSAIS..    
-00007870: 5374 6167 6550 6172 616d 3d67 6574 5374  StageParam=getSt
-00007880: 6167 6550 6172 616d 7328 4149 5f50 524f  ageParams(AI_PRO
-00007890: 4752 4553 535f 494e 4954 5f49 4d41 4745  GRESS_INIT_IMAGE
-000078a0: 2c20 3029 0d0a 2020 2020 6f73 6169 735f  , 0)..    osais_
-000078b0: 6e6f 7469 6679 2843 7265 6473 5061 7261  notify(CredsPara
-000078c0: 6d2c 204d 6f72 7068 696e 6750 6172 616d  m, MorphingParam
-000078d0: 202c 2053 7461 6765 5061 7261 6d29 0d0a   , StageParam)..
-000078e0: 0d0a 2020 2020 2323 2072 756e 2041 490d  ..    ## run AI.
-000078f0: 0a20 2020 2072 6573 706f 6e73 653d 4e6f  .    response=No
-00007900: 6e65 0d0a 2020 2020 7472 793a 0d0a 2020  ne..    try:..  
-00007910: 2020 2020 2020 6966 206c 656e 2861 7267        if len(arg
-00007920: 7329 3d3d 323a 0d0a 2020 2020 2020 2020  s)==2:..        
-00007930: 2020 2020 7265 7370 6f6e 7365 3d66 6e5f      response=fn_
-00007940: 7275 6e28 6141 7267 466f 7270 6172 7365  run(aArgForparse
-00007950: 7241 4929 0d0a 2020 2020 2020 2020 656c  rAI)..        el
-00007960: 7365 3a0d 0a20 2020 2020 2020 2020 2020  se:..           
-00007970: 2069 6620 6c65 6e28 6172 6773 293d 3d33   if len(args)==3
-00007980: 3a0d 0a20 2020 2020 2020 2020 2020 2020  :..             
-00007990: 2020 2072 6573 706f 6e73 653d 666e 5f72     response=fn_r
-000079a0: 756e 2861 4172 6746 6f72 7061 7273 6572  un(aArgForparser
-000079b0: 4149 2c20 6172 6773 5b32 5d29 0d0a 2020  AI, args[2])..  
-000079c0: 2020 2020 2020 2020 2020 656c 7365 3a0d            else:.
-000079d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000079e0: 2072 6573 706f 6e73 653d 666e 5f72 756e   response=fn_run
-000079f0: 2861 4172 6746 6f72 7061 7273 6572 4149  (aArgForparserAI
-00007a00: 2c20 6172 6773 5b32 5d2c 2061 7267 735b  , args[2], args[
-00007a10: 335d 290d 0a20 2020 2065 7863 6570 7420  3])..    except 
-00007a20: 4578 6365 7074 696f 6e20 6173 2065 7272  Exception as err
-00007a30: 3a0d 0a20 2020 2020 2020 2070 7269 6e74  :..        print
-00007a40: 2822 4352 4954 4943 414c 3a20 222b 6572  ("CRITICAL: "+er
-00007a50: 722e 6d73 6729 0d0a 2020 2020 2020 2020  r.msg)..        
-00007a60: 7261 6973 6520 6572 720d 0a0d 0a20 2020  raise err....   
-00007a70: 2023 2320 6361 6c63 756c 6174 6520 636f   ## calculate co
-00007a80: 7374 0d0a 2020 2020 6749 7342 7573 793d  st..    gIsBusy=
-00007a90: 4661 6c73 650d 0a20 2020 2065 6e64 5f64  False..    end_d
-00007aa0: 6174 6520 3d20 6461 7465 7469 6d65 2e75  ate = datetime.u
-00007ab0: 7463 6e6f 7728 290d 0a20 2020 2063 6f73  tcnow()..    cos
-00007ac0: 7420 3d20 2865 6e64 5f64 6174 6520 2d20  t = (end_date - 
-00007ad0: 6265 675f 6461 7465 292e 746f 7461 6c5f  beg_date).total_
-00007ae0: 7365 636f 6e64 7328 290d 0a20 2020 205f  seconds()..    _
-00007af0: 6164 6443 6f73 7428 636f 7374 290d 0a0d  addCost(cost)...
-00007b00: 0a20 2020 2023 2320 6e6f 7469 6679 2065  .    ## notify e
-00007b10: 6e64 0d0a 2020 2020 5374 6167 6550 6172  nd..    StagePar
-00007b20: 616d 3d67 6574 5374 6167 6550 6172 616d  am=getStageParam
-00007b30: 7328 4149 5f50 524f 4752 4553 535f 4149  s(AI_PROGRESS_AI
-00007b40: 5f53 544f 5050 4544 2c20 636f 7374 290d  _STOPPED, cost).
-00007b50: 0a20 2020 206f 7361 6973 5f6e 6f74 6966  .    osais_notif
-00007b60: 7928 4372 6564 7350 6172 616d 2c20 4d6f  y(CredsParam, Mo
-00007b70: 7270 6869 6e67 5061 7261 6d20 2c20 5374  rphingParam , St
-00007b80: 6167 6550 6172 616d 290d 0a0d 0a20 2020  ageParam)....   
-00007b90: 2023 2320 6465 6661 756c 7420 4f4b 2072   ## default OK r
-00007ba0: 6573 706f 6e73 6520 6966 2074 6865 2041  esponse if the A
-00007bb0: 4920 646f 6573 206e 6f74 2073 656e 6420  I does not send 
-00007bc0: 616e 790d 0a20 2020 2069 6620 7265 7370  any..    if resp
-00007bd0: 6f6e 7365 3d3d 4e6f 6e65 3a0d 0a20 2020  onse==None:..   
-00007be0: 2020 2020 2072 6573 706f 6e73 653d 5472       response=Tr
-00007bf0: 7565 0d0a 2020 2020 7265 7475 726e 2072  ue..    return r
-00007c00: 6573 706f 6e73 650d 0a0d 0a23 2320 2d2d  esponse....## --
-00007c10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007c50: 2d2d 2d2d 2d2d 0d0a 2320 2020 2020 2020  ------..#       
-00007c60: 6765 7420 666f 726d 6174 7465 6420 7061  get formatted pa
-00007c70: 7261 6d73 2066 726f 6d20 4149 2063 7572  rams from AI cur
-00007c80: 7265 6e74 2073 7461 7465 0d0a 2323 202d  rent state..## -
+00006830: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006840: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006850: 2d2d 2d0d 0a23 2020 2020 2020 2052 756e  ---..#       Run
+00006860: 2074 6865 2041 490d 0a23 2320 2d2d 2d2d   the AI..## ----
+00006870: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006880: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00006890: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000068a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000068b0: 2d2d 2d2d 0d0a 0d0a 2323 2050 5542 4c49  ----....## PUBLI
+000068c0: 4320 2d20 7061 7273 6520 6172 6773 2066  C - parse args f
+000068d0: 6f72 204f 5341 4953 2028 6e6f 7420 7468  or OSAIS (not th
+000068e0: 6f73 6520 666f 7220 4149 290d 0a64 6566  ose for AI)..def
+000068f0: 206f 7361 6973 5f69 6e69 7450 6172 7365   osais_initParse
+00006900: 7228 6141 7267 293a 0d0a 2020 2020 676c  r(aArg):..    gl
+00006910: 6f62 616c 2067 4172 6773 4f53 4149 530d  obal gArgsOSAIS.
+00006920: 0a20 2020 2067 6c6f 6261 6c20 6749 6e70  .    global gInp
+00006930: 7574 4469 720d 0a20 2020 2067 6c6f 6261  utDir..    globa
+00006940: 6c20 674f 7574 7075 7444 6972 0d0a 2020  l gOutputDir..  
+00006950: 2020 676c 6f62 616c 2067 4973 5761 726d    global gIsWarm
+00006960: 7570 0d0a 0d0a 2020 2020 2320 4372 6561  up....    # Crea
+00006970: 7465 2074 6865 2070 6172 7365 720d 0a20  te the parser.. 
+00006980: 2020 2076 715f 7061 7273 6572 203d 2061     vq_parser = a
+00006990: 7267 7061 7273 652e 4172 6775 6d65 6e74  rgparse.Argument
+000069a0: 5061 7273 6572 2864 6573 6372 6970 7469  Parser(descripti
+000069b0: 6f6e 3d27 4172 6720 7061 7273 6572 2069  on='Arg parser i
+000069c0: 6e69 7420 6279 204f 5341 4953 2729 0d0a  nit by OSAIS')..
+000069d0: 0d0a 2020 2020 2320 4164 6420 7468 6520  ..    # Add the 
+000069e0: 4149 2047 6174 6577 6179 202f 204f 7065  AI Gateway / Ope
+000069f0: 6e53 6f75 7263 6541 4973 2061 7267 756d  nSourceAIs argum
+00006a00: 656e 7473 0d0a 2020 2020 7671 5f70 6172  ents..    vq_par
+00006a10: 7365 722e 6164 645f 6172 6775 6d65 6e74  ser.add_argument
+00006a20: 2822 2d6f 7269 6722 2c20 2022 2d2d 6f72  ("-orig",  "--or
+00006a30: 6967 696e 222c 2074 7970 653d 7374 722c  igin", type=str,
+00006a40: 2068 656c 703d 2241 4920 4761 7465 7761   help="AI Gatewa
+00006a50: 7920 7365 7276 6572 206f 7269 6769 6e22  y server origin"
+00006a60: 2c20 6465 6661 756c 743d 6622 6874 7470  , default=f"http
+00006a70: 3a2f 2f7b 6749 504c 6f63 616c 7d3a 7b67  ://{gIPLocal}:{g
+00006a80: 506f 7274 4761 7465 7761 797d 2f22 202c  PortGateway}/" ,
+00006a90: 2064 6573 743d 274f 5341 4953 5f6f 7269   dest='OSAIS_ori
+00006aa0: 6769 6e27 2920 2020 2020 2323 2020 7468  gin')     ##  th
+00006ab0: 6973 2069 7320 666f 7220 636f 6d6d 7320  is is for comms 
+00006ac0: 7769 7468 2041 4920 4761 7465 7761 790d  with AI Gateway.
+00006ad0: 0a20 2020 2076 715f 7061 7273 6572 2e61  .    vq_parser.a
+00006ae0: 6464 5f61 7267 756d 656e 7428 222d 7422  dd_argument("-t"
+00006af0: 2c20 2022 2d2d 746f 6b65 6e22 2c20 7479  ,  "--token", ty
+00006b00: 7065 3d73 7472 2c20 6865 6c70 3d22 4f70  pe=str, help="Op
+00006b10: 656e 536f 7572 6365 4149 7320 746f 6b65  enSourceAIs toke
+00006b20: 6e22 2c20 6465 6661 756c 743d 2230 222c  n", default="0",
+00006b30: 2064 6573 743d 2774 6f6b 656e 4149 2729   dest='tokenAI')
+00006b40: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+00006b50: 2320 2074 6869 7320 6973 2066 6f72 2063  #  this is for c
+00006b60: 6f6d 6d73 2077 6974 6820 4f70 656e 536f  omms with OpenSo
+00006b70: 7572 6365 4149 730d 0a20 2020 2076 715f  urceAIs..    vq_
+00006b80: 7061 7273 6572 2e61 6464 5f61 7267 756d  parser.add_argum
+00006b90: 656e 7428 222d 7522 2c20 2022 2d2d 7573  ent("-u",  "--us
+00006ba0: 6572 6e61 6d65 222c 2074 7970 653d 7374  ername", type=st
+00006bb0: 722c 2068 656c 703d 224f 7065 6e53 6f75  r, help="OpenSou
+00006bc0: 7263 6541 4973 2075 7365 726e 616d 6522  rceAIs username"
+00006bd0: 2c20 6465 6661 756c 743d 2222 2c20 6465  , default="", de
+00006be0: 7374 3d27 7573 6572 6e61 6d65 2729 2020  st='username')  
+00006bf0: 2020 2020 2023 2320 2074 6869 7320 6973       ##  this is
+00006c00: 2066 6f72 2063 6f6d 6d73 2077 6974 6820   for comms with 
+00006c10: 4f70 656e 536f 7572 6365 4149 730d 0a20  OpenSourceAIs.. 
+00006c20: 2020 2076 715f 7061 7273 6572 2e61 6464     vq_parser.add
+00006c30: 5f61 7267 756d 656e 7428 222d 7569 6422  _argument("-uid"
+00006c40: 2c20 2022 2d2d 756e 6971 7565 5f69 6422  ,  "--unique_id"
+00006c50: 2c20 7479 7065 3d69 6e74 2c20 6865 6c70  , type=int, help
+00006c60: 3d22 556e 6971 7565 2049 4420 6f66 2074  ="Unique ID of t
+00006c70: 6869 7320 4149 2073 6573 7369 6f6e 222c  his AI session",
+00006c80: 2064 6566 6175 6c74 3d30 2c20 6465 7374   default=0, dest
+00006c90: 3d27 7569 6427 2920 2020 2023 2320 2074  ='uid')    ##  t
+00006ca0: 6869 7320 6973 2066 6f72 2063 6f6d 6d73  his is for comms
+00006cb0: 2077 6974 6820 4f70 656e 536f 7572 6365   with OpenSource
+00006cc0: 4149 730d 0a20 2020 2076 715f 7061 7273  AIs..    vq_pars
+00006cd0: 6572 2e61 6464 5f61 7267 756d 656e 7428  er.add_argument(
+00006ce0: 222d 6f64 6972 222c 2022 2d2d 6f75 7464  "-odir", "--outd
+00006cf0: 6972 222c 2074 7970 653d 7374 722c 2068  ir", type=str, h
+00006d00: 656c 703d 224f 7574 7075 7420 6469 7265  elp="Output dire
+00006d10: 6374 6f72 7922 2c20 6465 6661 756c 743d  ctory", default=
+00006d20: 674f 7574 7075 7444 6972 2c20 6465 7374  gOutputDir, dest
+00006d30: 3d27 6f75 7464 6972 2729 0d0a 2020 2020  ='outdir')..    
+00006d40: 7671 5f70 6172 7365 722e 6164 645f 6172  vq_parser.add_ar
+00006d50: 6775 6d65 6e74 2822 2d69 6469 7222 2c20  gument("-idir", 
+00006d60: 222d 2d69 6e64 6972 222c 2074 7970 653d  "--indir", type=
+00006d70: 7374 722c 2068 656c 703d 2269 6e70 7574  str, help="input
+00006d80: 2064 6972 6563 746f 7279 222c 2064 6566   directory", def
+00006d90: 6175 6c74 3d67 496e 7075 7444 6972 2c20  ault=gInputDir, 
+00006da0: 6465 7374 3d27 696e 6469 7227 290d 0a20  dest='indir').. 
+00006db0: 2020 2076 715f 7061 7273 6572 2e61 6464     vq_parser.add
+00006dc0: 5f61 7267 756d 656e 7428 222d 6c6f 6361  _argument("-loca
+00006dd0: 6c22 2c20 222d 2d69 736c 6f63 616c 222c  l", "--islocal",
+00006de0: 2074 7970 653d 626f 6f6c 2c20 6865 6c70   type=bool, help
+00006df0: 3d22 6973 206c 6f63 616c 206f 7220 7072  ="is local or pr
+00006e00: 6f64 3f22 2c20 6465 6661 756c 743d 4661  od?", default=Fa
+00006e10: 6c73 652c 2064 6573 743d 2769 734c 6f63  lse, dest='isLoc
+00006e20: 616c 2729 0d0a 2020 2020 7671 5f70 6172  al')..    vq_par
+00006e30: 7365 722e 6164 645f 6172 6775 6d65 6e74  ser.add_argument
+00006e40: 2822 2d63 7963 6c65 222c 2022 2d2d 6379  ("-cycle", "--cy
+00006e50: 636c 6522 2c20 7479 7065 3d69 6e74 2c20  cle", type=int, 
+00006e60: 6865 6c70 3d22 6379 636c 6522 2c20 6465  help="cycle", de
+00006e70: 6661 756c 743d 302c 2064 6573 743d 2763  fault=0, dest='c
+00006e80: 7963 6c65 2729 0d0a 2020 2020 7671 5f70  ycle')..    vq_p
+00006e90: 6172 7365 722e 6164 645f 6172 6775 6d65  arser.add_argume
+00006ea0: 6e74 2822 2d66 696c 656e 616d 6522 2c20  nt("-filename", 
+00006eb0: 222d 2d66 696c 656e 616d 6522 2c20 7479  "--filename", ty
+00006ec0: 7065 3d73 7472 2c20 6865 6c70 3d22 6669  pe=str, help="fi
+00006ed0: 6c65 6e61 6d65 222c 2064 6566 6175 6c74  lename", default
+00006ee0: 3d22 6465 6661 756c 7422 2c20 6465 7374  ="default", dest
+00006ef0: 3d27 6669 6c65 6e61 6d65 2729 0d0a 2020  ='filename')..  
+00006f00: 2020 7671 5f70 6172 7365 722e 6164 645f    vq_parser.add_
+00006f10: 6172 6775 6d65 6e74 2822 2d77 6172 6d75  argument("-warmu
+00006f20: 7022 2c20 222d 2d77 6172 6d75 7022 2c20  p", "--warmup", 
+00006f30: 7479 7065 3d62 6f6f 6c2c 2068 656c 703d  type=bool, help=
+00006f40: 2277 6172 6d75 7022 2c20 6465 6661 756c  "warmup", defaul
+00006f50: 743d 4661 6c73 652c 2064 6573 743d 2777  t=False, dest='w
+00006f60: 6172 6d75 7027 290d 0a0d 0a20 2020 2067  armup')....    g
+00006f70: 4172 6773 4f53 4149 5320 3d20 7671 5f70  ArgsOSAIS = vq_p
+00006f80: 6172 7365 722e 7061 7273 655f 6172 6773  arser.parse_args
+00006f90: 2861 4172 6729 0d0a 2020 2020 6749 7357  (aArg)..    gIsW
+00006fa0: 6172 6d75 703d 6741 7267 734f 5341 4953  armup=gArgsOSAIS
+00006fb0: 2e77 6172 6d75 700d 0a20 2020 2072 6574  .warmup..    ret
+00006fc0: 7572 6e20 5472 7565 0d0a 0d0a 2323 2050  urn True....## P
+00006fd0: 5542 4c49 4320 2d20 7275 6e20 7468 6520  UBLIC - run the 
+00006fe0: 4149 2028 6174 206c 6561 7374 2074 7279  AI (at least try
+00006ff0: 290d 0a64 6566 206f 7361 6973 5f72 756e  )..def osais_run
+00007000: 4149 282a 6172 6773 293a 0d0a 2020 2020  AI(*args):..    
+00007010: 676c 6f62 616c 2067 4973 4275 7379 0d0a  global gIsBusy..
+00007020: 2020 2020 676c 6f62 616c 2067 4150 726f      global gAPro
+00007030: 6365 7373 6564 0d0a 2020 2020 676c 6f62  cessed..    glob
+00007040: 616c 2067 4e61 6d65 200d 0a20 2020 2067  al gName ..    g
+00007050: 6c6f 6261 6c20 674c 6173 7450 726f 6365  lobal gLastProce
+00007060: 7373 5374 6172 745f 6174 0d0a 0d0a 2020  ssStart_at....  
+00007070: 2020 2323 2067 6574 2061 7267 730d 0a20    ## get args.. 
+00007080: 2020 2066 6e5f 7275 6e3d 6172 6773 5b30     fn_run=args[0
+00007090: 5d0d 0a20 2020 205f 6172 6773 3d61 7267  ]..    _args=arg
+000070a0: 735b 315d 0d0a 0d0a 2020 2020 2323 2064  s[1]....    ## d
+000070b0: 6f20 6e6f 7420 7072 6f63 6573 7320 7477  o not process tw
+000070c0: 6963 6520 7361 6d65 2075 6964 0d0a 2020  ice same uid..  
+000070d0: 2020 5f75 6964 3d5f 6172 6773 2e67 6574    _uid=_args.get
+000070e0: 2827 2d75 6964 2729 0d0a 2020 2020 6966  ('-uid')..    if
+000070f0: 205f 7569 6420 696e 2067 4150 726f 6365   _uid in gAProce
+00007100: 7373 6564 3a0d 0a20 2020 2020 2020 2072  ssed:..        r
+00007110: 6574 7572 6e20 2022 6e6f 7420 7072 6f63  eturn  "not proc
+00007120: 6573 7369 6e67 2c20 616c 7265 6164 7920  essing, already 
+00007130: 7472 6965 642e 2e2e 220d 0a0d 0a20 2020  tried..."....   
+00007140: 2023 2320 7374 6172 7420 7469 6d65 0d0a   ## start time..
+00007150: 2020 2020 6749 7342 7573 793d 5472 7565      gIsBusy=True
+00007160: 0d0a 2020 2020 6265 675f 6461 7465 203d  ..    beg_date =
+00007170: 2064 6174 6574 696d 652e 7574 636e 6f77   datetime.utcnow
+00007180: 2829 0d0a 0d0a 2020 2020 2323 2072 6570  ()....    ## rep
+00007190: 726f 6365 7373 2041 4920 6172 6773 0d0a  rocess AI args..
+000071a0: 2020 2020 6141 7267 466f 7270 6172 7365      aArgForparse
+000071b0: 7241 493d 5f67 6574 4172 6773 285f 6172  rAI=_getArgs(_ar
+000071c0: 6773 290d 0a20 2020 2061 7267 735f 4578  gs)..    args_Ex
+000071d0: 636c 7573 6976 654f 5341 4953 3d5b 272d  clusiveOSAIS=['-
+000071e0: 6f72 6967 272c 2027 2d74 272c 2027 2d75  orig', '-t', '-u
+000071f0: 272c 2027 2d75 6964 272c 2027 2d6c 6f63  ', '-uid', '-loc
+00007200: 616c 272c 2027 2d63 7963 6c65 272c 2027  al', '-cycle', '
+00007210: 2d77 6172 6d75 7027 5d0d 0a20 2020 2061  -warmup']..    a
+00007220: 4172 6746 6f72 7061 7273 6572 4149 3d5f  ArgForparserAI=_
+00007230: 6172 6773 4672 6f6d 4669 6c74 6572 2861  argsFromFilter(a
+00007240: 4172 6746 6f72 7061 7273 6572 4149 2c20  ArgForparserAI, 
+00007250: 6172 6773 5f45 7863 6c75 7369 7665 4f53  args_ExclusiveOS
+00007260: 4149 532c 2046 616c 7365 290d 0a0d 0a20  AIS, False).... 
+00007270: 2020 2023 2320 7072 6f63 6573 7320 7468     ## process th
+00007280: 6520 6669 6c65 6e61 6d65 2070 6173 7365  e filename passe
+00007290: 6420 696e 2064 6972 2028 6361 7365 206c  d in dir (case l
+000072a0: 6f63 616c 686f 7374 202f 2041 4920 4761  ocalhost / AI Ga
+000072b0: 7465 7761 7929 2c20 6f72 2064 6f77 6e6c  teway), or downl
+000072c0: 6f61 6420 6669 6c65 2066 726f 6d20 5552  oad file from UR
+000072d0: 4c20 2863 6173 6520 4149 2072 756e 6e69  L (case AI runni
+000072e0: 6e67 2061 7320 5669 7274 7561 6c20 4149  ng as Virtual AI
+000072f0: 290d 0a20 2020 205f 696e 7075 743d 4e6f  )..    _input=No
+00007300: 6e65 0d0a 2020 2020 5f66 696c 656e 616d  ne..    _filenam
+00007310: 653d 5f61 7267 732e 6765 7428 272d 6669  e=_args.get('-fi
+00007320: 6c65 6e61 6d65 2729 0d0a 2020 2020 5f75  lename')..    _u
+00007330: 726c 5570 6c6f 6164 3d5f 6172 6773 2e67  rlUpload=_args.g
+00007340: 6574 2827 7572 6c5f 7570 6c6f 6164 2729  et('url_upload')
+00007350: 0d0a 2020 2020 6966 206e 6f74 205f 6669  ..    if not _fi
+00007360: 6c65 6e61 6d65 2061 6e64 205f 7572 6c55  lename and _urlU
+00007370: 706c 6f61 643a 0d0a 2020 2020 2020 2020  pload:..        
+00007380: 7472 793a 0d0a 2020 2020 2020 2020 2020  try:..          
+00007390: 2020 5f69 6e70 7574 3d64 6f77 6e6c 6f61    _input=downloa
+000073a0: 6449 6d61 6765 285f 7572 6c55 706c 6f61  dImage(_urlUploa
+000073b0: 6429 0d0a 2020 2020 2020 2020 2020 2020  d)..            
+000073c0: 6966 205f 696e 7075 743a 0d0a 2020 2020  if _input:..    
+000073d0: 2020 2020 2020 2020 2020 2020 6141 7267              aArg
+000073e0: 466f 7270 6172 7365 7241 492e 6170 7065  ForparserAI.appe
+000073f0: 6e64 2822 2d66 696c 656e 616d 6522 290d  nd("-filename").
+00007400: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007410: 2061 4172 6746 6f72 7061 7273 6572 4149   aArgForparserAI
+00007420: 2e61 7070 656e 6428 5f69 6e70 7574 290d  .append(_input).
+00007430: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
+00007440: 653a 0d0a 2020 2020 2020 2020 2020 2020  e:..            
+00007450: 2020 2020 2323 206d 696e 2072 6571 7569      ## min requi
+00007460: 7265 6d65 6e74 730d 0a20 2020 2020 2020  rements..       
+00007470: 2020 2020 2020 2020 2070 7269 6e74 2822           print("
+00007480: 6e6f 2069 6d61 6765 2074 6f20 7072 6f63  no image to proc
+00007490: 6573 7322 290d 0a20 2020 2020 2020 2020  ess")..         
+000074a0: 2020 2020 2020 2072 6574 7572 6e20 2269         return "i
+000074b0: 6e70 7574 2072 6571 7569 7265 6422 0d0a  nput required"..
+000074c0: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+000074d0: 7863 6570 7469 6f6e 2061 7320 6572 723a  xception as err:
+000074e0: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
+000074f0: 696e 7428 2243 5249 5449 4341 4c3a 2022  int("CRITICAL: "
+00007500: 2b65 7272 2e6d 7367 290d 0a20 2020 2020  +err.msg)..     
+00007510: 2020 2020 2020 2072 6169 7365 2065 7272         raise err
+00007520: 0d0a 2020 2020 0d0a 2020 2020 2323 2049  ..    ..    ## I
+00007530: 6e69 7420 4f53 4149 5320 5061 7261 6d73  nit OSAIS Params
+00007540: 2028 6672 6f6d 2061 6c6c 2061 7267 732c   (from all args,
+00007550: 206b 6565 7020 6f6e 6c79 2074 686f 7365   keep only those
+00007560: 2066 6f72 204f 5341 4953 290d 0a20 2020   for OSAIS)..   
+00007570: 2061 4172 6746 6f72 5061 7273 6572 4f53   aArgForParserOS
+00007580: 4149 533d 5f67 6574 4172 6773 285f 6172  AIS=_getArgs(_ar
+00007590: 6773 290d 0a20 2020 2061 7267 735f 4578  gs)..    args_Ex
+000075a0: 636c 7573 6976 654f 5341 4953 2e61 7070  clusiveOSAIS.app
+000075b0: 656e 6428 272d 6f64 6972 2729 0d0a 2020  end('-odir')..  
+000075c0: 2020 6172 6773 5f45 7863 6c75 7369 7665    args_Exclusive
+000075d0: 4f53 4149 532e 6170 7065 6e64 2827 2d69  OSAIS.append('-i
+000075e0: 6469 7227 290d 0a20 2020 2061 4172 6746  dir')..    aArgF
+000075f0: 6f72 5061 7273 6572 4f53 4149 533d 5f61  orParserOSAIS=_a
+00007600: 7267 7346 726f 6d46 696c 7465 7228 6141  rgsFromFilter(aA
+00007610: 7267 466f 7250 6172 7365 724f 5341 4953  rgForParserOSAIS
+00007620: 2c20 6172 6773 5f45 7863 6c75 7369 7665  , args_Exclusive
+00007630: 4f53 4149 532c 2054 7275 6529 0d0a 2020  OSAIS, True)..  
+00007640: 2020 6f73 6169 735f 696e 6974 5061 7273    osais_initPars
+00007650: 6572 2861 4172 6746 6f72 5061 7273 6572  er(aArgForParser
+00007660: 4f53 4149 5329 0d0a 0d0a 2020 2020 6966  OSAIS)....    if
+00007670: 2067 4973 5761 726d 7570 3a0d 0a20 2020   gIsWarmup:..   
+00007680: 2020 2020 2070 7269 6e74 2822 5c72 5c6e       print("\r\n
+00007690: 3d3e 2057 6172 6d69 6e67 2075 702e 2e2e  => Warming up...
+000076a0: 205c 725c 6e22 290d 0a20 2020 2065 6c73   \r\n")..    els
+000076b0: 653a 0d0a 2020 2020 2020 2020 7072 696e  e:..        prin
+000076c0: 7428 225c 725c 6e3d 3e20 6265 666f 7265  t("\r\n=> before
+000076d0: 2072 756e 3a20 7072 6f63 6573 7365 6420   run: processed 
+000076e0: 6172 6773 2066 726f 6d20 7572 6c3a 2022  args from url: "
+000076f0: 2b73 7472 2861 4172 6746 6f72 7061 7273  +str(aArgForpars
+00007700: 6572 4149 292b 225c 725c 6e22 290d 0a0d  erAI)+"\r\n")...
+00007710: 0a20 2020 2023 23c2 a070 726f 6365 7373  .    ##..process
+00007720: 696e 6720 6163 6365 7074 6564 0d0a 2020  ing accepted..  
+00007730: 2020 674c 6173 7450 726f 6365 7373 5374    gLastProcessSt
+00007740: 6172 745f 6174 3d64 6174 6574 696d 652e  art_at=datetime.
+00007750: 7574 636e 6f77 2829 0d0a 2020 2020 6741  utcnow()..    gA
+00007760: 5072 6f63 6573 7365 642e 6170 7065 6e64  Processed.append
+00007770: 285f 7569 6429 0d0a 0d0a 2020 2020 2323  (_uid)....    ##
+00007780: 206e 6f74 6966 7920 4f53 4149 5320 2873   notify OSAIS (s
+00007790: 7461 7274 290d 0a20 2020 2043 7265 6473  tart)..    Creds
+000077a0: 5061 7261 6d3d 6765 7443 7265 6473 5061  Param=getCredsPa
+000077b0: 7261 6d73 2829 0d0a 2020 2020 4d6f 7270  rams()..    Morp
+000077c0: 6869 6e67 5061 7261 6d3d 6765 744d 6f72  hingParam=getMor
+000077d0: 7068 696e 6750 6172 616d 7328 290d 0a20  phingParams().. 
+000077e0: 2020 2053 7461 6765 5061 7261 6d3d 6765     StageParam=ge
+000077f0: 7453 7461 6765 5061 7261 6d73 2841 495f  tStageParams(AI_
+00007800: 5052 4f47 5245 5353 5f41 495f 5354 4152  PROGRESS_AI_STAR
+00007810: 5445 442c 2030 290d 0a20 2020 206f 7361  TED, 0)..    osa
+00007820: 6973 5f6e 6f74 6966 7928 4372 6564 7350  is_notify(CredsP
+00007830: 6172 616d 2c20 4d6f 7270 6869 6e67 5061  aram, MorphingPa
+00007840: 7261 6d20 2c20 5374 6167 6550 6172 616d  ram , StageParam
+00007850: 290d 0a0d 0a20 2020 2023 2320 7374 6172  )....    ## star
+00007860: 7420 7761 7463 6820 6669 6c65 2063 7265  t watch file cre
+00007870: 6174 696f 6e0d 0a20 2020 205f 6f75 7470  ation..    _outp
+00007880: 7574 3d5f 6765 744f 7574 7075 7444 6972  ut=_getOutputDir
+00007890: 2829 0d0a 2020 2020 7761 7463 685f 6469  ()..    watch_di
+000078a0: 7265 6374 6f72 7928 5f6f 7574 7075 742c  rectory(_output,
+000078b0: 206f 7361 6973 5f6f 6e4e 6f74 6966 7946   osais_onNotifyF
+000078c0: 696c 6543 7265 6174 6564 2c20 5f61 7267  ileCreated, _arg
+000078d0: 7329 0d0a 0d0a 2020 2020 2323 204e 6f74  s)....    ## Not
+000078e0: 6966 204f 5341 4953 0d0a 2020 2020 5374  if OSAIS..    St
+000078f0: 6167 6550 6172 616d 3d67 6574 5374 6167  ageParam=getStag
+00007900: 6550 6172 616d 7328 4149 5f50 524f 4752  eParams(AI_PROGR
+00007910: 4553 535f 494e 4954 5f49 4d41 4745 2c20  ESS_INIT_IMAGE, 
+00007920: 3029 0d0a 2020 2020 6f73 6169 735f 6e6f  0)..    osais_no
+00007930: 7469 6679 2843 7265 6473 5061 7261 6d2c  tify(CredsParam,
+00007940: 204d 6f72 7068 696e 6750 6172 616d 202c   MorphingParam ,
+00007950: 2053 7461 6765 5061 7261 6d29 0d0a 0d0a   StageParam)....
+00007960: 2020 2020 2323 2072 756e 2041 490d 0a20      ## run AI.. 
+00007970: 2020 2072 6573 706f 6e73 653d 4e6f 6e65     response=None
+00007980: 0d0a 2020 2020 7472 793a 0d0a 2020 2020  ..    try:..    
+00007990: 2020 2020 6966 206c 656e 2861 7267 7329      if len(args)
+000079a0: 3d3d 323a 0d0a 2020 2020 2020 2020 2020  ==2:..          
+000079b0: 2020 7265 7370 6f6e 7365 3d66 6e5f 7275    response=fn_ru
+000079c0: 6e28 6141 7267 466f 7270 6172 7365 7241  n(aArgForparserA
+000079d0: 4929 0d0a 2020 2020 2020 2020 656c 7365  I)..        else
+000079e0: 3a0d 0a20 2020 2020 2020 2020 2020 2069  :..            i
+000079f0: 6620 6c65 6e28 6172 6773 293d 3d33 3a0d  f len(args)==3:.
+00007a00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007a10: 2072 6573 706f 6e73 653d 666e 5f72 756e   response=fn_run
+00007a20: 2861 4172 6746 6f72 7061 7273 6572 4149  (aArgForparserAI
+00007a30: 2c20 6172 6773 5b32 5d29 0d0a 2020 2020  , args[2])..    
+00007a40: 2020 2020 2020 2020 656c 7365 3a0d 0a20          else:.. 
+00007a50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00007a60: 6573 706f 6e73 653d 666e 5f72 756e 2861  esponse=fn_run(a
+00007a70: 4172 6746 6f72 7061 7273 6572 4149 2c20  ArgForparserAI, 
+00007a80: 6172 6773 5b32 5d2c 2061 7267 735b 335d  args[2], args[3]
+00007a90: 290d 0a20 2020 2065 7863 6570 7420 4578  )..    except Ex
+00007aa0: 6365 7074 696f 6e20 6173 2065 7272 3a0d  ception as err:.
+00007ab0: 0a20 2020 2020 2020 2070 7269 6e74 2822  .        print("
+00007ac0: 4352 4954 4943 414c 3a20 222b 6572 722e  CRITICAL: "+err.
+00007ad0: 6d73 6729 0d0a 2020 2020 2020 2020 7261  msg)..        ra
+00007ae0: 6973 6520 6572 720d 0a0d 0a20 2020 2023  ise err....    #
+00007af0: 2320 6361 6c63 756c 6174 6520 636f 7374  # calculate cost
+00007b00: 0d0a 2020 2020 6749 7342 7573 793d 4661  ..    gIsBusy=Fa
+00007b10: 6c73 650d 0a20 2020 2065 6e64 5f64 6174  lse..    end_dat
+00007b20: 6520 3d20 6461 7465 7469 6d65 2e75 7463  e = datetime.utc
+00007b30: 6e6f 7728 290d 0a20 2020 2063 6f73 7420  now()..    cost 
+00007b40: 3d20 2865 6e64 5f64 6174 6520 2d20 6265  = (end_date - be
+00007b50: 675f 6461 7465 292e 746f 7461 6c5f 7365  g_date).total_se
+00007b60: 636f 6e64 7328 290d 0a20 2020 205f 6164  conds()..    _ad
+00007b70: 6443 6f73 7428 636f 7374 290d 0a0d 0a20  dCost(cost).... 
+00007b80: 2020 2023 2320 6e6f 7469 6679 2065 6e64     ## notify end
+00007b90: 0d0a 2020 2020 5374 6167 6550 6172 616d  ..    StageParam
+00007ba0: 3d67 6574 5374 6167 6550 6172 616d 7328  =getStageParams(
+00007bb0: 4149 5f50 524f 4752 4553 535f 4149 5f53  AI_PROGRESS_AI_S
+00007bc0: 544f 5050 4544 2c20 636f 7374 290d 0a20  TOPPED, cost).. 
+00007bd0: 2020 206f 7361 6973 5f6e 6f74 6966 7928     osais_notify(
+00007be0: 4372 6564 7350 6172 616d 2c20 4d6f 7270  CredsParam, Morp
+00007bf0: 6869 6e67 5061 7261 6d20 2c20 5374 6167  hingParam , Stag
+00007c00: 6550 6172 616d 290d 0a0d 0a20 2020 2023  eParam)....    #
+00007c10: 2320 6465 6661 756c 7420 4f4b 2072 6573  # default OK res
+00007c20: 706f 6e73 6520 6966 2074 6865 2041 4920  ponse if the AI 
+00007c30: 646f 6573 206e 6f74 2073 656e 6420 616e  does not send an
+00007c40: 790d 0a20 2020 2069 6620 7265 7370 6f6e  y..    if respon
+00007c50: 7365 3d3d 4e6f 6e65 3a0d 0a20 2020 2020  se==None:..     
+00007c60: 2020 2072 6573 706f 6e73 653d 5472 7565     response=True
+00007c70: 0d0a 2020 2020 7265 7475 726e 2072 6573  ..    return res
+00007c80: 706f 6e73 650d 0a0d 0a23 2320 2d2d 2d2d  ponse....## ----
 00007c90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007ca0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007cb0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00007cc0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00007cd0: 2d2d 2d2d 2d2d 2d0d 0a0d 0a64 6566 2067  -------....def g
-00007ce0: 6574 4372 6564 7350 6172 616d 7328 2920  etCredsParams() 
-00007cf0: 3a0d 0a20 2020 2067 6c6f 6261 6c20 674e  :..    global gN
-00007d00: 616d 650d 0a20 2020 2067 6c6f 6261 6c20  ame..    global 
-00007d10: 6741 7267 734f 5341 4953 0d0a 2020 2020  gArgsOSAIS..    
-00007d20: 7265 7475 726e 207b 0d0a 2020 2020 2020  return {..      
-00007d30: 2020 2265 6e67 696e 6522 3a20 674e 616d    "engine": gNam
-00007d40: 652c 200d 0a20 2020 2020 2020 2022 746f  e, ..        "to
-00007d50: 6b65 6e41 4922 3a20 6741 7267 734f 5341  kenAI": gArgsOSA
-00007d60: 4953 2e74 6f6b 656e 4149 2c0d 0a20 2020  IS.tokenAI,..   
-00007d70: 2020 2020 2022 7573 6572 6e61 6d65 223a       "username":
-00007d80: 2067 4172 6773 4f53 4149 532e 7573 6572   gArgsOSAIS.user
-00007d90: 6e61 6d65 2c0d 0a20 2020 2020 2020 2022  name,..        "
-00007da0: 6973 4c6f 6361 6c22 3a20 6741 7267 734f  isLocal": gArgsO
-00007db0: 5341 4953 2e69 734c 6f63 616c 0d0a 2020  SAIS.isLocal..  
-00007dc0: 2020 7d20 0d0a 0d0a 6465 6620 6765 744d    } ....def getM
-00007dd0: 6f72 7068 696e 6750 6172 616d 7328 2920  orphingParams() 
-00007de0: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6741  :..    global gA
-00007df0: 7267 734f 5341 4953 0d0a 2020 2020 7265  rgsOSAIS..    re
-00007e00: 7475 726e 207b 0d0a 2020 2020 2020 2020  turn {..        
-00007e10: 2275 6964 223a 2067 4172 6773 4f53 4149  "uid": gArgsOSAI
-00007e20: 532e 7569 642c 0d0a 2020 2020 2020 2020  S.uid,..        
-00007e30: 2263 7963 6c65 223a 2067 4172 6773 4f53  "cycle": gArgsOS
-00007e40: 4149 532e 6379 636c 652c 0d0a 2020 2020  AIS.cycle,..    
-00007e50: 2020 2020 2266 696c 656e 616d 6522 3a20      "filename": 
-00007e60: 6741 7267 734f 5341 4953 2e66 696c 656e  gArgsOSAIS.filen
-00007e70: 616d 652c 200d 0a20 2020 2020 2020 2022  ame, ..        "
-00007e80: 6f64 6972 223a 205f 6765 744f 7574 7075  odir": _getOutpu
-00007e90: 7444 6972 2829 0d0a 2020 2020 7d0d 0a0d  tDir()..    }...
-00007ea0: 0a64 6566 2067 6574 5374 6167 6550 6172  .def getStagePar
-00007eb0: 616d 7328 5f73 7461 6765 2c20 5f63 6f73  ams(_stage, _cos
-00007ec0: 7429 203a 0d0a 2020 2020 676c 6f62 616c  t) :..    global
-00007ed0: 2067 4172 6773 4f53 4149 530d 0a20 2020   gArgsOSAIS..   
-00007ee0: 2069 6620 5f73 7461 6765 3d3d 4149 5f50   if _stage==AI_P
-00007ef0: 524f 4752 4553 535f 4152 4753 3a0d 0a20  ROGRESS_ARGS:.. 
-00007f00: 2020 2020 2020 2072 6574 7572 6e20 7b22         return {"
-00007f10: 7374 6167 6522 3a20 4149 5f50 524f 4752  stage": AI_PROGR
-00007f20: 4553 535f 4149 5f53 5441 5254 4544 2c20  ESS_AI_STARTED, 
-00007f30: 2264 6573 6372 223a 224a 7573 7420 7061  "descr":"Just pa
-00007f40: 7273 6564 2041 4920 7061 7261 6d73 227d  rsed AI params"}
-00007f50: 0d0a 2020 2020 6966 205f 7374 6167 653d  ..    if _stage=
-00007f60: 3d41 495f 5052 4f47 5245 5353 5f45 5252  =AI_PROGRESS_ERR
-00007f70: 4f52 3a0d 0a20 2020 2020 2020 2072 6574  OR:..        ret
-00007f80: 7572 6e20 7b22 7374 6167 6522 3a20 4149  urn {"stage": AI
-00007f90: 5f50 524f 4752 4553 535f 4149 5f53 544f  _PROGRESS_AI_STO
-00007fa0: 5050 4544 2c20 2264 6573 6372 223a 2241  PPED, "descr":"A
-00007fb0: 4920 7374 6f70 7065 6420 7769 7468 2065  I stopped with e
-00007fc0: 7272 6f72 227d 0d0a 2020 2020 6966 205f  rror"}..    if _
-00007fd0: 7374 6167 653d 3d41 495f 5052 4f47 5245  stage==AI_PROGRE
-00007fe0: 5353 5f41 495f 5354 4152 5445 443a 0d0a  SS_AI_STARTED:..
-00007ff0: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-00008000: 2273 7461 6765 223a 2041 495f 5052 4f47  "stage": AI_PROG
-00008010: 5245 5353 5f41 495f 5354 4152 5445 442c  RESS_AI_STARTED,
-00008020: 2022 6465 7363 7222 3a22 4149 2073 7461   "descr":"AI sta
-00008030: 7274 6564 227d 0d0a 2020 2020 6966 205f  rted"}..    if _
-00008040: 7374 6167 653d 3d41 495f 5052 4f47 5245  stage==AI_PROGRE
-00008050: 5353 5f41 495f 5354 4f50 5045 443a 0d0a  SS_AI_STOPPED:..
-00008060: 2020 2020 2020 2020 7265 7475 726e 207b          return {
-00008070: 2273 7461 6765 223a 2041 495f 5052 4f47  "stage": AI_PROG
-00008080: 5245 5353 5f41 495f 5354 4f50 5045 442c  RESS_AI_STOPPED,
-00008090: 2022 6465 7363 7222 3a22 4149 2073 746f   "descr":"AI sto
-000080a0: 7070 6564 222c 2022 636f 7374 223a 205f  pped", "cost": _
-000080b0: 636f 7374 7d0d 0a20 2020 2069 6620 5f73  cost}..    if _s
-000080c0: 7461 6765 3d3d 4149 5f50 524f 4752 4553  tage==AI_PROGRES
-000080d0: 535f 494e 4954 5f49 4d41 4745 3a0d 0a20  S_INIT_IMAGE:.. 
-000080e0: 2020 2020 2020 2072 6574 7572 6e20 7b22         return {"
-000080f0: 7374 6167 6522 3a20 4149 5f50 524f 4752  stage": AI_PROGR
-00008100: 4553 535f 494e 4954 5f49 4d41 4745 2c20  ESS_INIT_IMAGE, 
-00008110: 2264 6573 6372 223a 2264 6573 7469 6e61  "descr":"destina
-00008120: 7469 6f6e 2069 6d61 6765 203d 2022 2b67  tion image = "+g
-00008130: 4172 6773 4f53 4149 532e 6669 6c65 6e61  ArgsOSAIS.filena
-00008140: 6d65 7d0d 0a20 2020 2069 6620 5f73 7461  me}..    if _sta
-00008150: 6765 3d3d 4149 5f50 524f 4752 4553 535f  ge==AI_PROGRESS_
-00008160: 444f 4e45 5f49 4d41 4745 3a0d 0a20 2020  DONE_IMAGE:..   
-00008170: 2020 2020 2072 6574 7572 6e20 7b22 7374       return {"st
-00008180: 6167 6522 3a20 4149 5f50 524f 4752 4553  age": AI_PROGRES
-00008190: 535f 444f 4e45 5f49 4d41 4745 2c20 2264  S_DONE_IMAGE, "d
-000081a0: 6573 6372 223a 2263 6f70 6965 6420 696e  escr":"copied in
-000081b0: 7075 7420 696d 6167 6520 746f 2064 6573  put image to des
-000081c0: 7469 6e61 7469 6f6e 2069 6d61 6765 227d  tination image"}
-000081d0: 0d0a 2020 2020 7265 7475 726e 207b 2273  ..    return {"s
-000081e0: 7461 6765 223a 2041 495f 5052 4f47 5245  tage": AI_PROGRE
-000081f0: 5353 5f45 5252 4f52 2c20 2264 6573 6372  SS_ERROR, "descr
-00008200: 223a 2265 7272 6f72 227d 0d0a 0d0a 2323  ":"error"}....##
-00008210: 202d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d   ---------------
-00008220: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008230: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008240: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00008250: 2d2d 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020  ---------..#    
-00008260: 2020 204e 6f74 6966 6963 6174 696f 6e73     Notifications
-00008270: 2074 6f20 4761 7465 7761 7920 2f20 4f53   to Gateway / OS
-00008280: 4149 530d 0a23 2320 2d2d 2d2d 2d2d 2d2d  AIS..## --------
+00007cd0: 2d2d 2d2d 0d0a 2320 2020 2020 2020 6765  ----..#       ge
+00007ce0: 7420 666f 726d 6174 7465 6420 7061 7261  t formatted para
+00007cf0: 6d73 2066 726f 6d20 4149 2063 7572 7265  ms from AI curre
+00007d00: 6e74 2073 7461 7465 0d0a 2323 202d 2d2d  nt state..## ---
+00007d10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d20: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d30: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d40: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00007d50: 2d2d 2d2d 2d0d 0a0d 0a64 6566 2067 6574  -----....def get
+00007d60: 4372 6564 7350 6172 616d 7328 2920 3a0d  CredsParams() :.
+00007d70: 0a20 2020 2067 6c6f 6261 6c20 674e 616d  .    global gNam
+00007d80: 650d 0a20 2020 2067 6c6f 6261 6c20 6741  e..    global gA
+00007d90: 7267 734f 5341 4953 0d0a 2020 2020 7265  rgsOSAIS..    re
+00007da0: 7475 726e 207b 0d0a 2020 2020 2020 2020  turn {..        
+00007db0: 2265 6e67 696e 6522 3a20 674e 616d 652c  "engine": gName,
+00007dc0: 200d 0a20 2020 2020 2020 2022 746f 6b65   ..        "toke
+00007dd0: 6e41 4922 3a20 6741 7267 734f 5341 4953  nAI": gArgsOSAIS
+00007de0: 2e74 6f6b 656e 4149 2c0d 0a20 2020 2020  .tokenAI,..     
+00007df0: 2020 2022 7573 6572 6e61 6d65 223a 2067     "username": g
+00007e00: 4172 6773 4f53 4149 532e 7573 6572 6e61  ArgsOSAIS.userna
+00007e10: 6d65 2c0d 0a20 2020 2020 2020 2022 6973  me,..        "is
+00007e20: 4c6f 6361 6c22 3a20 6741 7267 734f 5341  Local": gArgsOSA
+00007e30: 4953 2e69 734c 6f63 616c 0d0a 2020 2020  IS.isLocal..    
+00007e40: 7d20 0d0a 0d0a 6465 6620 6765 744d 6f72  } ....def getMor
+00007e50: 7068 696e 6750 6172 616d 7328 2920 3a0d  phingParams() :.
+00007e60: 0a20 2020 2067 6c6f 6261 6c20 6741 7267  .    global gArg
+00007e70: 734f 5341 4953 0d0a 2020 2020 7265 7475  sOSAIS..    retu
+00007e80: 726e 207b 0d0a 2020 2020 2020 2020 2275  rn {..        "u
+00007e90: 6964 223a 2067 4172 6773 4f53 4149 532e  id": gArgsOSAIS.
+00007ea0: 7569 642c 0d0a 2020 2020 2020 2020 2263  uid,..        "c
+00007eb0: 7963 6c65 223a 2067 4172 6773 4f53 4149  ycle": gArgsOSAI
+00007ec0: 532e 6379 636c 652c 0d0a 2020 2020 2020  S.cycle,..      
+00007ed0: 2020 2266 696c 656e 616d 6522 3a20 6741    "filename": gA
+00007ee0: 7267 734f 5341 4953 2e66 696c 656e 616d  rgsOSAIS.filenam
+00007ef0: 652c 200d 0a20 2020 2020 2020 2022 6f64  e, ..        "od
+00007f00: 6972 223a 205f 6765 744f 7574 7075 7444  ir": _getOutputD
+00007f10: 6972 2829 0d0a 2020 2020 7d0d 0a0d 0a64  ir()..    }....d
+00007f20: 6566 2067 6574 5374 6167 6550 6172 616d  ef getStageParam
+00007f30: 7328 5f73 7461 6765 2c20 5f63 6f73 7429  s(_stage, _cost)
+00007f40: 203a 0d0a 2020 2020 676c 6f62 616c 2067   :..    global g
+00007f50: 4172 6773 4f53 4149 530d 0a20 2020 2069  ArgsOSAIS..    i
+00007f60: 6620 5f73 7461 6765 3d3d 4149 5f50 524f  f _stage==AI_PRO
+00007f70: 4752 4553 535f 4152 4753 3a0d 0a20 2020  GRESS_ARGS:..   
+00007f80: 2020 2020 2072 6574 7572 6e20 7b22 7374       return {"st
+00007f90: 6167 6522 3a20 4149 5f50 524f 4752 4553  age": AI_PROGRES
+00007fa0: 535f 4149 5f53 5441 5254 4544 2c20 2264  S_AI_STARTED, "d
+00007fb0: 6573 6372 223a 224a 7573 7420 7061 7273  escr":"Just pars
+00007fc0: 6564 2041 4920 7061 7261 6d73 227d 0d0a  ed AI params"}..
+00007fd0: 2020 2020 6966 205f 7374 6167 653d 3d41      if _stage==A
+00007fe0: 495f 5052 4f47 5245 5353 5f45 5252 4f52  I_PROGRESS_ERROR
+00007ff0: 3a0d 0a20 2020 2020 2020 2072 6574 7572  :..        retur
+00008000: 6e20 7b22 7374 6167 6522 3a20 4149 5f50  n {"stage": AI_P
+00008010: 524f 4752 4553 535f 4149 5f53 544f 5050  ROGRESS_AI_STOPP
+00008020: 4544 2c20 2264 6573 6372 223a 2241 4920  ED, "descr":"AI 
+00008030: 7374 6f70 7065 6420 7769 7468 2065 7272  stopped with err
+00008040: 6f72 227d 0d0a 2020 2020 6966 205f 7374  or"}..    if _st
+00008050: 6167 653d 3d41 495f 5052 4f47 5245 5353  age==AI_PROGRESS
+00008060: 5f41 495f 5354 4152 5445 443a 0d0a 2020  _AI_STARTED:..  
+00008070: 2020 2020 2020 7265 7475 726e 207b 2273        return {"s
+00008080: 7461 6765 223a 2041 495f 5052 4f47 5245  tage": AI_PROGRE
+00008090: 5353 5f41 495f 5354 4152 5445 442c 2022  SS_AI_STARTED, "
+000080a0: 6465 7363 7222 3a22 4149 2073 7461 7274  descr":"AI start
+000080b0: 6564 227d 0d0a 2020 2020 6966 205f 7374  ed"}..    if _st
+000080c0: 6167 653d 3d41 495f 5052 4f47 5245 5353  age==AI_PROGRESS
+000080d0: 5f41 495f 5354 4f50 5045 443a 0d0a 2020  _AI_STOPPED:..  
+000080e0: 2020 2020 2020 7265 7475 726e 207b 2273        return {"s
+000080f0: 7461 6765 223a 2041 495f 5052 4f47 5245  tage": AI_PROGRE
+00008100: 5353 5f41 495f 5354 4f50 5045 442c 2022  SS_AI_STOPPED, "
+00008110: 6465 7363 7222 3a22 4149 2073 746f 7070  descr":"AI stopp
+00008120: 6564 222c 2022 636f 7374 223a 205f 636f  ed", "cost": _co
+00008130: 7374 7d0d 0a20 2020 2069 6620 5f73 7461  st}..    if _sta
+00008140: 6765 3d3d 4149 5f50 524f 4752 4553 535f  ge==AI_PROGRESS_
+00008150: 494e 4954 5f49 4d41 4745 3a0d 0a20 2020  INIT_IMAGE:..   
+00008160: 2020 2020 2072 6574 7572 6e20 7b22 7374       return {"st
+00008170: 6167 6522 3a20 4149 5f50 524f 4752 4553  age": AI_PROGRES
+00008180: 535f 494e 4954 5f49 4d41 4745 2c20 2264  S_INIT_IMAGE, "d
+00008190: 6573 6372 223a 2264 6573 7469 6e61 7469  escr":"destinati
+000081a0: 6f6e 2069 6d61 6765 203d 2022 2b67 4172  on image = "+gAr
+000081b0: 6773 4f53 4149 532e 6669 6c65 6e61 6d65  gsOSAIS.filename
+000081c0: 7d0d 0a20 2020 2069 6620 5f73 7461 6765  }..    if _stage
+000081d0: 3d3d 4149 5f50 524f 4752 4553 535f 444f  ==AI_PROGRESS_DO
+000081e0: 4e45 5f49 4d41 4745 3a0d 0a20 2020 2020  NE_IMAGE:..     
+000081f0: 2020 2072 6574 7572 6e20 7b22 7374 6167     return {"stag
+00008200: 6522 3a20 4149 5f50 524f 4752 4553 535f  e": AI_PROGRESS_
+00008210: 444f 4e45 5f49 4d41 4745 2c20 2264 6573  DONE_IMAGE, "des
+00008220: 6372 223a 2263 6f70 6965 6420 696e 7075  cr":"copied inpu
+00008230: 7420 696d 6167 6520 746f 2064 6573 7469  t image to desti
+00008240: 6e61 7469 6f6e 2069 6d61 6765 227d 0d0a  nation image"}..
+00008250: 2020 2020 7265 7475 726e 207b 2273 7461      return {"sta
+00008260: 6765 223a 2041 495f 5052 4f47 5245 5353  ge": AI_PROGRESS
+00008270: 5f45 5252 4f52 2c20 2264 6573 6372 223a  _ERROR, "descr":
+00008280: 2265 7272 6f72 227d 0d0a 0d0a 2323 202d  "error"}....## -
 00008290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000082a0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000082b0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 000082c0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-000082d0: 0d0a 0d0a 2320 5570 6c6f 6164 2069 6d61  ....# Upload ima
-000082e0: 6765 2074 6f20 4f53 4149 5320 0d0a 6465  ge to OSAIS ..de
-000082f0: 6620 5f75 706c 6f61 6449 6d61 6765 546f  f _uploadImageTo
-00008300: 4f53 4149 5328 6f62 6a50 6172 616d 2c20  OSAIS(objParam, 
-00008310: 6973 4c6f 6361 6c29 3a0d 0a20 2020 2069  isLocal):..    i
-00008320: 6620 6749 7356 6972 7475 616c 4149 3d3d  f gIsVirtualAI==
-00008330: 4661 6c73 653a 0d0a 2020 2020 2020 2020  False:..        
-00008340: 7265 7475 726e 204e 6f6e 650d 0a20 2020  return None..   
-00008350: 200d 0a20 2020 2067 6c6f 6261 6c20 6741   ..    global gA
-00008360: 7574 6854 6f6b 656e 0d0a 2020 2020 676c  uthToken..    gl
-00008370: 6f62 616c 2067 4f72 6967 696e 4f53 4149  obal gOriginOSAI
-00008380: 530d 0a20 2020 2067 6c6f 6261 6c20 6741  S..    global gA
-00008390: 7574 6854 6f6b 656e 4c6f 6361 6c0d 0a20  uthTokenLocal.. 
-000083a0: 2020 2067 6c6f 6261 6c20 674f 7269 6769     global gOrigi
-000083b0: 6e4c 6f63 616c 4f53 4149 530d 0a0d 0a20  nLocalOSAIS.... 
-000083c0: 2020 205f 6175 7468 3d67 4175 7468 546f     _auth=gAuthTo
-000083d0: 6b65 6e0d 0a20 2020 2069 6620 6973 4c6f  ken..    if isLo
-000083e0: 6361 6c3a 0d0a 2020 2020 2020 2020 5f61  cal:..        _a
-000083f0: 7574 683d 6741 7574 6854 6f6b 656e 4c6f  uth=gAuthTokenLo
-00008400: 6361 6c0d 0a20 2020 205f 6f73 6169 733d  cal..    _osais=
-00008410: 674f 7269 6769 6e4f 5341 4953 0d0a 2020  gOriginOSAIS..  
-00008420: 2020 6966 2069 734c 6f63 616c 3a0d 0a20    if isLocal:.. 
-00008430: 2020 2020 2020 205f 6f73 6169 733d 674f         _osais=gO
-00008440: 7269 6769 6e4c 6f63 616c 4f53 4149 530d  riginLocalOSAIS.
-00008450: 0a0d 0a20 2020 2023 206c 6574 7320 676f  ...    # lets go
-00008460: 2063 616c 6c20 4f53 4149 5320 4149 2047   call OSAIS AI G
-00008470: 6174 6577 6179 202f 206f 7220 4f53 4149  ateway / or OSAI
-00008480: 5320 6974 7365 6c66 0d0a 2020 2020 6865  S itself..    he
-00008490: 6164 6572 7320 3d20 7b0d 0a20 2020 2020  aders = {..     
-000084a0: 2020 2022 436f 6e74 656e 742d 5479 7065     "Content-Type
-000084b0: 223a 2027 6170 706c 6963 6174 696f 6e2f  ": 'application/
-000084c0: 6a73 6f6e 272c 200d 0a20 2020 2020 2020  json', ..       
-000084d0: 2027 4163 6365 7074 273a 2027 7465 7874   'Accept': 'text
-000084e0: 2f70 6c61 696e 272c 0d0a 2020 2020 2020  /plain',..      
-000084f0: 2020 2241 7574 686f 7269 7a61 7469 6f6e    "Authorization
-00008500: 223a 2066 2242 6561 7265 7220 7b5f 6175  ": f"Bearer {_au
-00008510: 7468 7d22 0d0a 2020 2020 7d0d 0a0d 0a20  th}"..    }.... 
-00008520: 2020 2061 7069 5f75 726c 3d66 227b 5f6f     api_url=f"{_o
-00008530: 7361 6973 7d61 7069 2f76 312f 7072 6976  sais}api/v1/priv
-00008540: 6174 652f 7570 6c6f 6164 2220 2020 2020  ate/upload"     
-00008550: 2020 200d 0a20 2020 2070 6179 6c6f 6164     ..    payload
-00008560: 203d 206a 736f 6e2e 6475 6d70 7328 6f62   = json.dumps(ob
-00008570: 6a50 6172 616d 290d 0a20 2020 2072 6573  jParam)..    res
-00008580: 706f 6e73 6520 3d20 7265 7175 6573 7473  ponse = requests
-00008590: 2e70 6f73 7428 6170 695f 7572 6c2c 2068  .post(api_url, h
-000085a0: 6561 6465 7273 3d68 6561 6465 7273 2c20  eaders=headers, 
-000085b0: 6461 7461 3d70 6179 6c6f 6164 2029 0d0a  data=payload )..
-000085c0: 2020 2020 6f62 6a52 6573 3d72 6573 706f      objRes=respo
-000085d0: 6e73 652e 6a73 6f6e 2829 0d0a 2020 2020  nse.json()..    
-000085e0: 7265 7475 726e 206f 626a 5265 7320 2020  return objRes   
-000085f0: 200d 0a0d 0a64 6566 206f 7361 6973 5f6f   ....def osais_o
-00008600: 6e4e 6f74 6966 7946 696c 6543 7265 6174  nNotifyFileCreat
-00008610: 6564 285f 6469 722c 205f 6669 6c65 6e61  ed(_dir, _filena
-00008620: 6d65 2c20 5f61 7267 7329 3a0d 0a20 2020  me, _args):..   
-00008630: 2067 4172 6773 4f53 4149 532e 6669 6c65   gArgsOSAIS.file
-00008640: 6e61 6d65 3d5f 6669 6c65 6e61 6d65 0d0a  name=_filename..
-00008650: 2020 2020 5f73 7461 6765 5061 7261 6d3d      _stageParam=
-00008660: 6765 7453 7461 6765 5061 7261 6d73 2841  getStageParams(A
-00008670: 495f 5052 4f47 5245 5353 5f44 4f4e 455f  I_PROGRESS_DONE_
-00008680: 494d 4147 452c 2030 290d 0a20 2020 205f  IMAGE, 0)..    _
-00008690: 6d6f 7270 6869 6e67 5061 7261 6d3d 6765  morphingParam=ge
-000086a0: 744d 6f72 7068 696e 6750 6172 616d 7328  tMorphingParams(
-000086b0: 290d 0a20 2020 205f 6372 6564 7350 6172  )..    _credsPar
-000086c0: 616d 3d67 6574 4372 6564 7350 6172 616d  am=getCredsParam
-000086d0: 7328 290d 0a20 2020 206f 7361 6973 5f6e  s()..    osais_n
-000086e0: 6f74 6966 7928 5f63 7265 6473 5061 7261  otify(_credsPara
-000086f0: 6d2c 205f 6d6f 7270 6869 6e67 5061 7261  m, _morphingPara
-00008700: 6d2c 205f 7374 6167 6550 6172 616d 2920  m, _stageParam) 
-00008710: 2020 2020 2020 2020 2020 2023 204f 5341             # OSA
-00008720: 4953 204e 6f74 6966 6963 6174 696f 6e0d  IS Notification.
-00008730: 0a20 2020 2072 6574 7572 6e20 5472 7565  .    return True
-00008740: 0d0a 0d0a 2320 4469 7265 6374 204e 6f74  ....# Direct Not
-00008750: 6966 7920 4f53 4149 5320 0d0a 6465 6620  ify OSAIS ..def 
-00008760: 6f73 6169 735f 6e6f 7469 6679 2843 7265  osais_notify(Cre
-00008770: 6450 6172 616d 2c20 4d6f 7270 6869 6e67  dParam, Morphing
-00008780: 5061 7261 6d2c 2053 7461 6765 5061 7261  Param, StagePara
-00008790: 6d29 3a0d 0a20 2020 2067 6c6f 6261 6c20  m):..    global 
-000087a0: 6749 504c 6f63 616c 0d0a 2020 2020 676c  gIPLocal..    gl
-000087b0: 6f62 616c 2067 506f 7274 4761 7465 7761  obal gPortGatewa
-000087c0: 790d 0a20 2020 2067 6c6f 6261 6c20 674f  y..    global gO
-000087d0: 7269 6769 6e4f 5341 4953 0d0a 2020 2020  riginOSAIS..    
-000087e0: 676c 6f62 616c 2067 4f72 6967 696e 4c6f  global gOriginLo
-000087f0: 6361 6c4f 5341 4953 0d0a 2020 2020 676c  calOSAIS..    gl
-00008800: 6f62 616c 2067 4973 5669 7274 7561 6c41  obal gIsVirtualA
-00008810: 490d 0a20 2020 2067 6c6f 6261 6c20 6741  I..    global gA
-00008820: 7574 6854 6f6b 656e 0d0a 2020 2020 676c  uthToken..    gl
-00008830: 6f62 616c 2067 4175 7468 546f 6b65 6e4c  obal gAuthTokenL
-00008840: 6f63 616c 0d0a 2020 2020 676c 6f62 616c  ocal..    global
-00008850: 2067 4c61 7374 4368 6563 6b65 645f 6174   gLastChecked_at
-00008860: 0d0a 2020 2020 676c 6f62 616c 2067 4973  ..    global gIs
-00008870: 5761 726d 7570 0d0a 0d0a 2020 2020 2323  Warmup....    ##
-00008880: 206e 6f20 6e6f 7469 6669 6361 7469 6f6e   no notification
-00008890: 206f 6620 7761 726d 7570 0d0a 2020 2020   of warmup..    
-000088a0: 6966 2067 4973 5761 726d 7570 3a0d 0a20  if gIsWarmup:.. 
-000088b0: 2020 2020 2020 2072 6574 7572 6e20 4e6f         return No
-000088c0: 6e65 0d0a 2020 2020 0d0a 2020 2020 674c  ne..    ..    gL
-000088d0: 6173 7443 6865 636b 6564 5f61 7420 3d20  astChecked_at = 
-000088e0: 6461 7465 7469 6d65 2e75 7463 6e6f 7728  datetime.utcnow(
-000088f0: 290d 0a0d 0a20 2020 2023 206e 6f74 6966  )....    # notif
-00008900: 6963 6174 696f 6e20 636f 6e73 6f6c 6520  ication console 
-00008910: 6c6f 670d 0a20 2020 206d 6572 6765 6420  log..    merged 
-00008920: 3d20 6469 6374 2829 0d0a 2020 2020 6d65  = dict()..    me
-00008930: 7267 6564 2e75 7064 6174 6528 4372 6564  rged.update(Cred
-00008940: 5061 7261 6d29 0d0a 2020 2020 6d65 7267  Param)..    merg
-00008950: 6564 2e75 7064 6174 6528 4d6f 7270 6869  ed.update(Morphi
-00008960: 6e67 5061 7261 6d29 0d0a 2020 2020 7072  ngParam)..    pr
-00008970: 696e 7428 224e 6f74 6966 794f 5341 4953  int("NotifyOSAIS
-00008980: 2028 222b 7374 7228 5374 6167 6550 6172   ("+str(StagePar
-00008990: 616d 5b22 7374 6167 6522 5d29 2b22 2f20  am["stage"])+"/ 
-000089a0: 222b 5374 6167 6550 6172 616d 5b22 6465  "+StageParam["de
-000089b0: 7363 7222 5d2b 2229 3a20 222b 7374 7228  scr"]+"): "+str(
-000089c0: 6d65 7267 6564 2929 0d0a 2020 2020 7072  merged))..    pr
-000089d0: 696e 7428 225c 725c 6e22 290d 0a0d 0a20  int("\r\n").... 
-000089e0: 2020 205f 6669 6c65 6e61 6d65 3d22 220d     _filename="".
-000089f0: 0a20 2020 2069 6620 4d6f 7270 6869 6e67  .    if Morphing
-00008a00: 5061 7261 6d5b 2266 696c 656e 616d 6522  Param["filename"
-00008a10: 5d21 3d22 223a 0d0a 2020 2020 2020 2020  ]!="":..        
-00008a20: 5f66 696c 656e 616d 653d 4d6f 7270 6869  _filename=Morphi
-00008a30: 6e67 5061 7261 6d5b 2266 696c 656e 616d  ngParam["filenam
-00008a40: 6522 5d0d 0a0d 0a20 2020 2023 206c 6574  e"]....    # let
-00008a50: 7320 676f 2063 616c 6c20 4f53 4149 5320  s go call OSAIS 
-00008a60: 4149 2047 6174 6577 6179 202f 206f 7220  AI Gateway / or 
-00008a70: 4f53 4149 5320 6974 7365 6c66 0d0a 2020  OSAIS itself..  
-00008a80: 2020 6865 6164 6572 7320 3d20 7b0d 0a20    headers = {.. 
-00008a90: 2020 2020 2020 2022 436f 6e74 656e 742d         "Content-
-00008aa0: 5479 7065 223a 2022 6170 706c 6963 6174  Type": "applicat
-00008ab0: 696f 6e2f 6a73 6f6e 220d 0a20 2020 207d  ion/json"..    }
-00008ac0: 0d0a 0d0a 2020 2020 2323 2063 6f6e 6669  ....    ## confi
-00008ad0: 6720 666f 7220 6361 6c6c 696e 6720 6761  g for calling ga
-00008ae0: 7465 7761 790d 0a20 2020 2061 7069 5f75  teway..    api_u
-00008af0: 726c 203d 2066 227b 674f 7269 6769 6e47  rl = f"{gOriginG
-00008b00: 6174 6577 6179 7d61 7069 2f76 312f 7075  ateway}api/v1/pu
-00008b10: 626c 6963 2f6e 6f74 6966 7922 0d0a 0d0a  blic/notify"....
-00008b20: 2020 2020 2323 2063 6f6e 6669 6720 666f      ## config fo
-00008b30: 7220 6361 6c6c 696e 6720 4f53 4149 5320  r calling OSAIS 
-00008b40: 286e 6f20 6761 7465 7761 7929 0d0a 2020  (no gateway)..  
-00008b50: 2020 6966 2067 4973 5669 7274 7561 6c41    if gIsVirtualA
-00008b60: 493a 0d0a 2020 2020 2020 2020 5f6f 7361  I:..        _osa
-00008b70: 6973 3d67 4f72 6967 696e 4f53 4149 530d  is=gOriginOSAIS.
-00008b80: 0a20 2020 2020 2020 205f 6175 7468 3d67  .        _auth=g
-00008b90: 4175 7468 546f 6b65 6e0d 0a0d 0a20 2020  AuthToken....   
-00008ba0: 2020 2020 2069 6620 4372 6564 5061 7261       if CredPara
-00008bb0: 6d5b 2269 734c 6f63 616c 225d 3a0d 0a20  m["isLocal"]:.. 
-00008bc0: 2020 2020 2020 2020 2020 205f 6f73 6169             _osai
-00008bd0: 733d 674f 7269 6769 6e4c 6f63 616c 4f53  s=gOriginLocalOS
-00008be0: 4149 530d 0a20 2020 2020 2020 2020 2020  AIS..           
-00008bf0: 205f 6175 7468 3d67 4175 7468 546f 6b65   _auth=gAuthToke
-00008c00: 6e4c 6f63 616c 0d0a 0d0a 2020 2020 2020  nLocal....      
-00008c10: 2020 6966 2067 4973 5669 7274 7561 6c41    if gIsVirtualA
-00008c20: 493d 3d54 7275 653a 0d0a 2020 2020 2020  I==True:..      
-00008c30: 2020 2020 2020 6865 6164 6572 735b 2241        headers["A
-00008c40: 7574 686f 7269 7a61 7469 6f6e 225d 3d20  uthorization"]= 
-00008c50: 6622 4265 6172 6572 207b 5f61 7574 687d  f"Bearer {_auth}
-00008c60: 220d 0a20 2020 2020 2020 2020 2020 2061  "..            a
-00008c70: 7069 5f75 726c 3d66 227b 5f6f 7361 6973  pi_url=f"{_osais
-00008c80: 7d61 7069 2f76 312f 7072 6976 6174 652f  }api/v1/private/
-00008c90: 6e6f 7469 6679 220d 0a0d 0a20 2020 206f  notify"....    o
-00008ca0: 626a 5061 7261 6d3d 7b0d 0a20 2020 2020  bjParam={..     
-00008cb0: 2020 2022 7265 7370 6f6e 7365 223a 207b     "response": {
-00008cc0: 0d0a 2020 2020 2020 2020 2020 2020 2274  ..            "t
-00008cd0: 6f6b 656e 223a 2043 7265 6450 6172 616d  oken": CredParam
-00008ce0: 5b22 746f 6b65 6e41 4922 5d2c 0d0a 2020  ["tokenAI"],..  
-00008cf0: 2020 2020 2020 2020 2020 2275 6964 223a            "uid":
-00008d00: 2073 7472 284d 6f72 7068 696e 6750 6172   str(MorphingPar
-00008d10: 616d 5b22 7569 6422 5d29 2c0d 0a20 2020  am["uid"]),..   
-00008d20: 2020 2020 2020 2020 2022 7374 6167 6522           "stage"
-00008d30: 3a20 7374 7228 5374 6167 6550 6172 616d  : str(StageParam
-00008d40: 5b22 7374 6167 6522 5d29 2c0d 0a20 2020  ["stage"]),..   
-00008d50: 2020 2020 2020 2020 2022 6379 636c 6522           "cycle"
-00008d60: 3a20 7374 7228 4d6f 7270 6869 6e67 5061  : str(MorphingPa
-00008d70: 7261 6d5b 2263 7963 6c65 225d 292c 0d0a  ram["cycle"]),..
-00008d80: 2020 2020 2020 2020 2020 2020 2265 6e67              "eng
-00008d90: 696e 6522 3a20 4372 6564 5061 7261 6d5b  ine": CredParam[
-00008da0: 2265 6e67 696e 6522 5d2c 0d0a 2020 2020  "engine"],..    
-00008db0: 2020 2020 2020 2020 2275 7365 726e 616d          "usernam
-00008dc0: 6522 3a20 4372 6564 5061 7261 6d5b 2275  e": CredParam["u
-00008dd0: 7365 726e 616d 6522 5d2c 0d0a 2020 2020  sername"],..    
-00008de0: 2020 2020 2020 2020 2264 6573 6372 223a          "descr":
-00008df0: 2053 7461 6765 5061 7261 6d5b 2264 6573   StageParam["des
-00008e00: 6372 225d 2c0d 0a20 2020 2020 2020 2020  cr"],..         
-00008e10: 2020 2022 6669 6c65 6e61 6d65 223a 205f     "filename": _
-00008e20: 6669 6c65 6e61 6d65 0d0a 2020 2020 2020  filename..      
-00008e30: 2020 7d0d 0a20 2020 207d 0d0a 0d0a 2020    }..    }....  
-00008e40: 2020 6966 2022 636f 7374 2220 696e 2053    if "cost" in S
-00008e50: 7461 6765 5061 7261 6d3a 0d0a 2020 2020  tageParam:..    
-00008e60: 2020 2020 6f62 6a50 6172 616d 5b22 7265      objParam["re
-00008e70: 7370 6f6e 7365 225d 5b22 636f 7374 225d  sponse"]["cost"]
-00008e80: 3d20 7374 7228 5374 6167 6550 6172 616d  = str(StageParam
-00008e90: 5b22 636f 7374 225d 290d 0a20 2020 200d  ["cost"])..    .
-00008ea0: 0a20 2020 2072 6573 706f 6e73 6520 3d20  .    response = 
-00008eb0: 7265 7175 6573 7473 2e70 6f73 7428 6170  requests.post(ap
-00008ec0: 695f 7572 6c2c 2068 6561 6465 7273 3d68  i_url, headers=h
-00008ed0: 6561 6465 7273 2c20 6461 7461 3d6a 736f  eaders, data=jso
-00008ee0: 6e2e 6475 6d70 7328 6f62 6a50 6172 616d  n.dumps(objParam
-00008ef0: 2920 290d 0a20 2020 206f 626a 5265 733d  ) )..    objRes=
-00008f00: 7265 7370 6f6e 7365 2e6a 736f 6e28 290d  response.json().
-00008f10: 0a0d 0a20 2020 2069 6620 5374 6167 6550  ...    if StageP
-00008f20: 6172 616d 5b22 7374 6167 6522 5d3d 3d41  aram["stage"]==A
-00008f30: 495f 5052 4f47 5245 5353 5f44 4f4e 455f  I_PROGRESS_DONE_
-00008f40: 494d 4147 453a 0d0a 2020 2020 2020 2020  IMAGE:..        
-00008f50: 6966 2067 4973 5669 7274 7561 6c41 493d  if gIsVirtualAI=
-00008f60: 3d54 7275 653a 0d0a 2020 2020 2020 2020  =True:..        
-00008f70: 2020 2020 5f64 6972 3d4d 6f72 7068 696e      _dir=Morphin
-00008f80: 6750 6172 616d 5b22 6f64 6972 225d 0d0a  gParam["odir"]..
-00008f90: 2020 2020 2020 2020 2020 2020 6966 205f              if _
-00008fa0: 6469 723d 3d4e 6f6e 653a 0d0a 2020 2020  dir==None:..    
-00008fb0: 2020 2020 2020 2020 2020 2020 5f64 6972              _dir
-00008fc0: 3d67 4f75 7470 7574 4469 720d 0a20 2020  =gOutputDir..   
-00008fd0: 2020 2020 2020 2020 205f 6469 7249 6d61           _dirIma
-00008fe0: 6765 3d5f 6469 722b 5f66 696c 656e 616d  ge=_dir+_filenam
-00008ff0: 650d 0a0d 0a20 2020 2020 2020 2020 2020  e....           
-00009000: 2077 6974 6820 6f70 656e 285f 6469 7249   with open(_dirI
-00009010: 6d61 6765 2c20 2272 6222 2920 6173 2069  mage, "rb") as i
-00009020: 6d61 6765 5f66 696c 653a 0d0a 2020 2020  mage_file:..    
-00009030: 2020 2020 2020 2020 2020 2020 696d 6167              imag
-00009040: 655f 6461 7461 203d 2069 6d61 6765 5f66  e_data = image_f
-00009050: 696c 652e 7265 6164 2829 0d0a 0d0a 2020  ile.read()....  
-00009060: 2020 2020 2020 2020 2020 696d 5f62 3634            im_b64
-00009070: 203d 2062 6173 6536 342e 6236 3465 6e63   = base64.b64enc
-00009080: 6f64 6528 696d 6167 655f 6461 7461 292e  ode(image_data).
-00009090: 6465 636f 6465 2822 7574 6638 2229 0d0a  decode("utf8")..
-000090a0: 2020 2020 2020 2020 2020 2020 7061 7261              para
-000090b0: 6d3d 7b0d 0a20 2020 2020 2020 2020 2020  m={..           
-000090c0: 2020 2020 2022 696d 6167 6522 3a20 696d       "image": im
-000090d0: 5f62 3634 2c0d 0a20 2020 2020 2020 2020  _b64,..         
-000090e0: 2020 2020 2020 2022 7569 6422 3a20 7374         "uid": st
-000090f0: 7228 4d6f 7270 6869 6e67 5061 7261 6d5b  r(MorphingParam[
-00009100: 2275 6964 225d 292c 0d0a 2020 2020 2020  "uid"]),..      
-00009110: 2020 2020 2020 2020 2020 2263 7963 6c65            "cycle
-00009120: 223a 2073 7472 284d 6f72 7068 696e 6750  ": str(MorphingP
-00009130: 6172 616d 5b22 6379 636c 6522 5d29 2c0d  aram["cycle"]),.
-00009140: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00009150: 2022 656e 6769 6e65 223a 2043 7265 6450   "engine": CredP
-00009160: 6172 616d 5b22 656e 6769 6e65 225d 2c0d  aram["engine"],.
-00009170: 0a20 2020 2020 2020 2020 2020 207d 2020  .            }  
-00009180: 2020 2020 2020 2020 2020 0d0a 2020 2020            ..    
-00009190: 2020 2020 2020 2020 5f75 706c 6f61 6449          _uploadI
-000091a0: 6d61 6765 546f 4f53 4149 5328 7061 7261  mageToOSAIS(para
-000091b0: 6d2c 2043 7265 6450 6172 616d 5b22 6973  m, CredParam["is
-000091c0: 4c6f 6361 6c22 5d29 0d0a 2020 2020 7265  Local"])..    re
-000091d0: 7475 726e 206f 626a 5265 730d 0a0d 0a23  turn objRes....#
-000091e0: 2320 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  # --------------
-000091f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009200: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009210: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009220: 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2020  ----------..#   
-00009230: 2020 2020 496e 6974 2070 726f 6365 7373      Init process
-00009240: 696e 670d 0a23 2320 2d2d 2d2d 2d2d 2d2d  ing..## --------
-00009250: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000082d0: 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020 2020  -------..#      
+000082e0: 204e 6f74 6966 6963 6174 696f 6e73 2074   Notifications t
+000082f0: 6f20 4761 7465 7761 7920 2f20 4f53 4149  o Gateway / OSAI
+00008300: 530d 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d  S..## ----------
+00008310: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008320: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008330: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00008340: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00008350: 0d0a 2320 5570 6c6f 6164 2069 6d61 6765  ..# Upload image
+00008360: 2074 6f20 4f53 4149 5320 0d0a 6465 6620   to OSAIS ..def 
+00008370: 5f75 706c 6f61 6449 6d61 6765 546f 4f53  _uploadImageToOS
+00008380: 4149 5328 6f62 6a50 6172 616d 2c20 6973  AIS(objParam, is
+00008390: 4c6f 6361 6c29 3a0d 0a20 2020 2069 6620  Local):..    if 
+000083a0: 6749 7356 6972 7475 616c 4149 3d3d 4661  gIsVirtualAI==Fa
+000083b0: 6c73 653a 0d0a 2020 2020 2020 2020 7265  lse:..        re
+000083c0: 7475 726e 204e 6f6e 650d 0a20 2020 200d  turn None..    .
+000083d0: 0a20 2020 2067 6c6f 6261 6c20 6741 7574  .    global gAut
+000083e0: 6854 6f6b 656e 0d0a 2020 2020 676c 6f62  hToken..    glob
+000083f0: 616c 2067 4f72 6967 696e 4f53 4149 530d  al gOriginOSAIS.
+00008400: 0a20 2020 2067 6c6f 6261 6c20 6741 7574  .    global gAut
+00008410: 6854 6f6b 656e 4c6f 6361 6c0d 0a20 2020  hTokenLocal..   
+00008420: 2067 6c6f 6261 6c20 674f 7269 6769 6e4c   global gOriginL
+00008430: 6f63 616c 4f53 4149 530d 0a0d 0a20 2020  ocalOSAIS....   
+00008440: 205f 6175 7468 3d67 4175 7468 546f 6b65   _auth=gAuthToke
+00008450: 6e0d 0a20 2020 2069 6620 6973 4c6f 6361  n..    if isLoca
+00008460: 6c3a 0d0a 2020 2020 2020 2020 5f61 7574  l:..        _aut
+00008470: 683d 6741 7574 6854 6f6b 656e 4c6f 6361  h=gAuthTokenLoca
+00008480: 6c0d 0a20 2020 205f 6f73 6169 733d 674f  l..    _osais=gO
+00008490: 7269 6769 6e4f 5341 4953 0d0a 2020 2020  riginOSAIS..    
+000084a0: 6966 2069 734c 6f63 616c 3a0d 0a20 2020  if isLocal:..   
+000084b0: 2020 2020 205f 6f73 6169 733d 674f 7269       _osais=gOri
+000084c0: 6769 6e4c 6f63 616c 4f53 4149 530d 0a0d  ginLocalOSAIS...
+000084d0: 0a20 2020 2023 206c 6574 7320 676f 2063  .    # lets go c
+000084e0: 616c 6c20 4f53 4149 5320 4149 2047 6174  all OSAIS AI Gat
+000084f0: 6577 6179 202f 206f 7220 4f53 4149 5320  eway / or OSAIS 
+00008500: 6974 7365 6c66 0d0a 2020 2020 6865 6164  itself..    head
+00008510: 6572 7320 3d20 7b0d 0a20 2020 2020 2020  ers = {..       
+00008520: 2022 436f 6e74 656e 742d 5479 7065 223a   "Content-Type":
+00008530: 2027 6170 706c 6963 6174 696f 6e2f 6a73   'application/js
+00008540: 6f6e 272c 200d 0a20 2020 2020 2020 2027  on', ..        '
+00008550: 4163 6365 7074 273a 2027 7465 7874 2f70  Accept': 'text/p
+00008560: 6c61 696e 272c 0d0a 2020 2020 2020 2020  lain',..        
+00008570: 2241 7574 686f 7269 7a61 7469 6f6e 223a  "Authorization":
+00008580: 2066 2242 6561 7265 7220 7b5f 6175 7468   f"Bearer {_auth
+00008590: 7d22 0d0a 2020 2020 7d0d 0a0d 0a20 2020  }"..    }....   
+000085a0: 2061 7069 5f75 726c 3d66 227b 5f6f 7361   api_url=f"{_osa
+000085b0: 6973 7d61 7069 2f76 312f 7072 6976 6174  is}api/v1/privat
+000085c0: 652f 7570 6c6f 6164 2220 2020 2020 2020  e/upload"       
+000085d0: 200d 0a20 2020 2070 6179 6c6f 6164 203d   ..    payload =
+000085e0: 206a 736f 6e2e 6475 6d70 7328 6f62 6a50   json.dumps(objP
+000085f0: 6172 616d 290d 0a20 2020 2072 6573 706f  aram)..    respo
+00008600: 6e73 6520 3d20 7265 7175 6573 7473 2e70  nse = requests.p
+00008610: 6f73 7428 6170 695f 7572 6c2c 2068 6561  ost(api_url, hea
+00008620: 6465 7273 3d68 6561 6465 7273 2c20 6461  ders=headers, da
+00008630: 7461 3d70 6179 6c6f 6164 2029 0d0a 2020  ta=payload )..  
+00008640: 2020 6f62 6a52 6573 3d72 6573 706f 6e73    objRes=respons
+00008650: 652e 6a73 6f6e 2829 0d0a 2020 2020 7265  e.json()..    re
+00008660: 7475 726e 206f 626a 5265 7320 2020 200d  turn objRes    .
+00008670: 0a0d 0a64 6566 206f 7361 6973 5f6f 6e4e  ...def osais_onN
+00008680: 6f74 6966 7946 696c 6543 7265 6174 6564  otifyFileCreated
+00008690: 285f 6469 722c 205f 6669 6c65 6e61 6d65  (_dir, _filename
+000086a0: 2c20 5f61 7267 7329 3a0d 0a20 2020 2067  , _args):..    g
+000086b0: 4172 6773 4f53 4149 532e 6669 6c65 6e61  ArgsOSAIS.filena
+000086c0: 6d65 3d5f 6669 6c65 6e61 6d65 0d0a 2020  me=_filename..  
+000086d0: 2020 5f73 7461 6765 5061 7261 6d3d 6765    _stageParam=ge
+000086e0: 7453 7461 6765 5061 7261 6d73 2841 495f  tStageParams(AI_
+000086f0: 5052 4f47 5245 5353 5f44 4f4e 455f 494d  PROGRESS_DONE_IM
+00008700: 4147 452c 2030 290d 0a20 2020 205f 6d6f  AGE, 0)..    _mo
+00008710: 7270 6869 6e67 5061 7261 6d3d 6765 744d  rphingParam=getM
+00008720: 6f72 7068 696e 6750 6172 616d 7328 290d  orphingParams().
+00008730: 0a20 2020 205f 6372 6564 7350 6172 616d  .    _credsParam
+00008740: 3d67 6574 4372 6564 7350 6172 616d 7328  =getCredsParams(
+00008750: 290d 0a20 2020 206f 7361 6973 5f6e 6f74  )..    osais_not
+00008760: 6966 7928 5f63 7265 6473 5061 7261 6d2c  ify(_credsParam,
+00008770: 205f 6d6f 7270 6869 6e67 5061 7261 6d2c   _morphingParam,
+00008780: 205f 7374 6167 6550 6172 616d 2920 2020   _stageParam)   
+00008790: 2020 2020 2020 2020 2023 204f 5341 4953           # OSAIS
+000087a0: 204e 6f74 6966 6963 6174 696f 6e0d 0a20   Notification.. 
+000087b0: 2020 2072 6574 7572 6e20 5472 7565 0d0a     return True..
+000087c0: 0d0a 2320 4469 7265 6374 204e 6f74 6966  ..# Direct Notif
+000087d0: 7920 4f53 4149 5320 0d0a 6465 6620 6f73  y OSAIS ..def os
+000087e0: 6169 735f 6e6f 7469 6679 2843 7265 6450  ais_notify(CredP
+000087f0: 6172 616d 2c20 4d6f 7270 6869 6e67 5061  aram, MorphingPa
+00008800: 7261 6d2c 2053 7461 6765 5061 7261 6d29  ram, StageParam)
+00008810: 3a0d 0a20 2020 2067 6c6f 6261 6c20 6749  :..    global gI
+00008820: 504c 6f63 616c 0d0a 2020 2020 676c 6f62  PLocal..    glob
+00008830: 616c 2067 506f 7274 4761 7465 7761 790d  al gPortGateway.
+00008840: 0a20 2020 2067 6c6f 6261 6c20 674f 7269  .    global gOri
+00008850: 6769 6e4f 5341 4953 0d0a 2020 2020 676c  ginOSAIS..    gl
+00008860: 6f62 616c 2067 4f72 6967 696e 4c6f 6361  obal gOriginLoca
+00008870: 6c4f 5341 4953 0d0a 2020 2020 676c 6f62  lOSAIS..    glob
+00008880: 616c 2067 4973 5669 7274 7561 6c41 490d  al gIsVirtualAI.
+00008890: 0a20 2020 2067 6c6f 6261 6c20 6741 7574  .    global gAut
+000088a0: 6854 6f6b 656e 0d0a 2020 2020 676c 6f62  hToken..    glob
+000088b0: 616c 2067 4175 7468 546f 6b65 6e4c 6f63  al gAuthTokenLoc
+000088c0: 616c 0d0a 2020 2020 676c 6f62 616c 2067  al..    global g
+000088d0: 4c61 7374 4368 6563 6b65 645f 6174 0d0a  LastChecked_at..
+000088e0: 2020 2020 676c 6f62 616c 2067 4973 5761      global gIsWa
+000088f0: 726d 7570 0d0a 0d0a 2020 2020 2323 206e  rmup....    ## n
+00008900: 6f20 6e6f 7469 6669 6361 7469 6f6e 206f  o notification o
+00008910: 6620 7761 726d 7570 0d0a 2020 2020 6966  f warmup..    if
+00008920: 2067 4973 5761 726d 7570 3a0d 0a20 2020   gIsWarmup:..   
+00008930: 2020 2020 2072 6574 7572 6e20 4e6f 6e65       return None
+00008940: 0d0a 2020 2020 0d0a 2020 2020 674c 6173  ..    ..    gLas
+00008950: 7443 6865 636b 6564 5f61 7420 3d20 6461  tChecked_at = da
+00008960: 7465 7469 6d65 2e75 7463 6e6f 7728 290d  tetime.utcnow().
+00008970: 0a0d 0a20 2020 2023 206e 6f74 6966 6963  ...    # notific
+00008980: 6174 696f 6e20 636f 6e73 6f6c 6520 6c6f  ation console lo
+00008990: 670d 0a20 2020 206d 6572 6765 6420 3d20  g..    merged = 
+000089a0: 6469 6374 2829 0d0a 2020 2020 6d65 7267  dict()..    merg
+000089b0: 6564 2e75 7064 6174 6528 4372 6564 5061  ed.update(CredPa
+000089c0: 7261 6d29 0d0a 2020 2020 6d65 7267 6564  ram)..    merged
+000089d0: 2e75 7064 6174 6528 4d6f 7270 6869 6e67  .update(Morphing
+000089e0: 5061 7261 6d29 0d0a 2020 2020 7072 696e  Param)..    prin
+000089f0: 7428 224e 6f74 6966 794f 5341 4953 2028  t("NotifyOSAIS (
+00008a00: 222b 7374 7228 5374 6167 6550 6172 616d  "+str(StageParam
+00008a10: 5b22 7374 6167 6522 5d29 2b22 2f20 222b  ["stage"])+"/ "+
+00008a20: 5374 6167 6550 6172 616d 5b22 6465 7363  StageParam["desc
+00008a30: 7222 5d2b 2229 3a20 222b 7374 7228 6d65  r"]+"): "+str(me
+00008a40: 7267 6564 2929 0d0a 2020 2020 7072 696e  rged))..    prin
+00008a50: 7428 225c 725c 6e22 290d 0a0d 0a20 2020  t("\r\n")....   
+00008a60: 205f 6669 6c65 6e61 6d65 3d22 220d 0a20   _filename="".. 
+00008a70: 2020 2069 6620 4d6f 7270 6869 6e67 5061     if MorphingPa
+00008a80: 7261 6d5b 2266 696c 656e 616d 6522 5d21  ram["filename"]!
+00008a90: 3d22 223a 0d0a 2020 2020 2020 2020 5f66  ="":..        _f
+00008aa0: 696c 656e 616d 653d 4d6f 7270 6869 6e67  ilename=Morphing
+00008ab0: 5061 7261 6d5b 2266 696c 656e 616d 6522  Param["filename"
+00008ac0: 5d0d 0a0d 0a20 2020 2023 206c 6574 7320  ]....    # lets 
+00008ad0: 676f 2063 616c 6c20 4f53 4149 5320 4149  go call OSAIS AI
+00008ae0: 2047 6174 6577 6179 202f 206f 7220 4f53   Gateway / or OS
+00008af0: 4149 5320 6974 7365 6c66 0d0a 2020 2020  AIS itself..    
+00008b00: 6865 6164 6572 7320 3d20 7b0d 0a20 2020  headers = {..   
+00008b10: 2020 2020 2022 436f 6e74 656e 742d 5479       "Content-Ty
+00008b20: 7065 223a 2022 6170 706c 6963 6174 696f  pe": "applicatio
+00008b30: 6e2f 6a73 6f6e 220d 0a20 2020 207d 0d0a  n/json"..    }..
+00008b40: 0d0a 2020 2020 2323 2063 6f6e 6669 6720  ..    ## config 
+00008b50: 666f 7220 6361 6c6c 696e 6720 6761 7465  for calling gate
+00008b60: 7761 790d 0a20 2020 2061 7069 5f75 726c  way..    api_url
+00008b70: 203d 2066 227b 674f 7269 6769 6e47 6174   = f"{gOriginGat
+00008b80: 6577 6179 7d61 7069 2f76 312f 7075 626c  eway}api/v1/publ
+00008b90: 6963 2f6e 6f74 6966 7922 0d0a 0d0a 2020  ic/notify"....  
+00008ba0: 2020 2323 2063 6f6e 6669 6720 666f 7220    ## config for 
+00008bb0: 6361 6c6c 696e 6720 4f53 4149 5320 286e  calling OSAIS (n
+00008bc0: 6f20 6761 7465 7761 7929 0d0a 2020 2020  o gateway)..    
+00008bd0: 6966 2067 4973 5669 7274 7561 6c41 493a  if gIsVirtualAI:
+00008be0: 0d0a 2020 2020 2020 2020 5f6f 7361 6973  ..        _osais
+00008bf0: 3d67 4f72 6967 696e 4f53 4149 530d 0a20  =gOriginOSAIS.. 
+00008c00: 2020 2020 2020 205f 6175 7468 3d67 4175         _auth=gAu
+00008c10: 7468 546f 6b65 6e0d 0a0d 0a20 2020 2020  thToken....     
+00008c20: 2020 2069 6620 4372 6564 5061 7261 6d5b     if CredParam[
+00008c30: 2269 734c 6f63 616c 225d 3a0d 0a20 2020  "isLocal"]:..   
+00008c40: 2020 2020 2020 2020 205f 6f73 6169 733d           _osais=
+00008c50: 674f 7269 6769 6e4c 6f63 616c 4f53 4149  gOriginLocalOSAI
+00008c60: 530d 0a20 2020 2020 2020 2020 2020 205f  S..            _
+00008c70: 6175 7468 3d67 4175 7468 546f 6b65 6e4c  auth=gAuthTokenL
+00008c80: 6f63 616c 0d0a 0d0a 2020 2020 2020 2020  ocal....        
+00008c90: 6966 2067 4973 5669 7274 7561 6c41 493d  if gIsVirtualAI=
+00008ca0: 3d54 7275 653a 0d0a 2020 2020 2020 2020  =True:..        
+00008cb0: 2020 2020 6865 6164 6572 735b 2241 7574      headers["Aut
+00008cc0: 686f 7269 7a61 7469 6f6e 225d 3d20 6622  horization"]= f"
+00008cd0: 4265 6172 6572 207b 5f61 7574 687d 220d  Bearer {_auth}".
+00008ce0: 0a20 2020 2020 2020 2020 2020 2061 7069  .            api
+00008cf0: 5f75 726c 3d66 227b 5f6f 7361 6973 7d61  _url=f"{_osais}a
+00008d00: 7069 2f76 312f 7072 6976 6174 652f 6e6f  pi/v1/private/no
+00008d10: 7469 6679 220d 0a0d 0a20 2020 206f 626a  tify"....    obj
+00008d20: 5061 7261 6d3d 7b0d 0a20 2020 2020 2020  Param={..       
+00008d30: 2022 7265 7370 6f6e 7365 223a 207b 0d0a   "response": {..
+00008d40: 2020 2020 2020 2020 2020 2020 2274 6f6b              "tok
+00008d50: 656e 223a 2043 7265 6450 6172 616d 5b22  en": CredParam["
+00008d60: 746f 6b65 6e41 4922 5d2c 0d0a 2020 2020  tokenAI"],..    
+00008d70: 2020 2020 2020 2020 2275 6964 223a 2073          "uid": s
+00008d80: 7472 284d 6f72 7068 696e 6750 6172 616d  tr(MorphingParam
+00008d90: 5b22 7569 6422 5d29 2c0d 0a20 2020 2020  ["uid"]),..     
+00008da0: 2020 2020 2020 2022 7374 6167 6522 3a20         "stage": 
+00008db0: 7374 7228 5374 6167 6550 6172 616d 5b22  str(StageParam["
+00008dc0: 7374 6167 6522 5d29 2c0d 0a20 2020 2020  stage"]),..     
+00008dd0: 2020 2020 2020 2022 6379 636c 6522 3a20         "cycle": 
+00008de0: 7374 7228 4d6f 7270 6869 6e67 5061 7261  str(MorphingPara
+00008df0: 6d5b 2263 7963 6c65 225d 292c 0d0a 2020  m["cycle"]),..  
+00008e00: 2020 2020 2020 2020 2020 2265 6e67 696e            "engin
+00008e10: 6522 3a20 4372 6564 5061 7261 6d5b 2265  e": CredParam["e
+00008e20: 6e67 696e 6522 5d2c 0d0a 2020 2020 2020  ngine"],..      
+00008e30: 2020 2020 2020 2275 7365 726e 616d 6522        "username"
+00008e40: 3a20 4372 6564 5061 7261 6d5b 2275 7365  : CredParam["use
+00008e50: 726e 616d 6522 5d2c 0d0a 2020 2020 2020  rname"],..      
+00008e60: 2020 2020 2020 2264 6573 6372 223a 2053        "descr": S
+00008e70: 7461 6765 5061 7261 6d5b 2264 6573 6372  tageParam["descr
+00008e80: 225d 2c0d 0a20 2020 2020 2020 2020 2020  "],..           
+00008e90: 2022 6669 6c65 6e61 6d65 223a 205f 6669   "filename": _fi
+00008ea0: 6c65 6e61 6d65 0d0a 2020 2020 2020 2020  lename..        
+00008eb0: 7d0d 0a20 2020 207d 0d0a 0d0a 2020 2020  }..    }....    
+00008ec0: 6966 2022 636f 7374 2220 696e 2053 7461  if "cost" in Sta
+00008ed0: 6765 5061 7261 6d3a 0d0a 2020 2020 2020  geParam:..      
+00008ee0: 2020 6f62 6a50 6172 616d 5b22 7265 7370    objParam["resp
+00008ef0: 6f6e 7365 225d 5b22 636f 7374 225d 3d20  onse"]["cost"]= 
+00008f00: 7374 7228 5374 6167 6550 6172 616d 5b22  str(StageParam["
+00008f10: 636f 7374 225d 290d 0a20 2020 200d 0a20  cost"])..    .. 
+00008f20: 2020 2072 6573 706f 6e73 6520 3d20 7265     response = re
+00008f30: 7175 6573 7473 2e70 6f73 7428 6170 695f  quests.post(api_
+00008f40: 7572 6c2c 2068 6561 6465 7273 3d68 6561  url, headers=hea
+00008f50: 6465 7273 2c20 6461 7461 3d6a 736f 6e2e  ders, data=json.
+00008f60: 6475 6d70 7328 6f62 6a50 6172 616d 2920  dumps(objParam) 
+00008f70: 290d 0a20 2020 206f 626a 5265 733d 7265  )..    objRes=re
+00008f80: 7370 6f6e 7365 2e6a 736f 6e28 290d 0a0d  sponse.json()...
+00008f90: 0a20 2020 2069 6620 5374 6167 6550 6172  .    if StagePar
+00008fa0: 616d 5b22 7374 6167 6522 5d3d 3d41 495f  am["stage"]==AI_
+00008fb0: 5052 4f47 5245 5353 5f44 4f4e 455f 494d  PROGRESS_DONE_IM
+00008fc0: 4147 453a 0d0a 2020 2020 2020 2020 6966  AGE:..        if
+00008fd0: 2067 4973 5669 7274 7561 6c41 493d 3d54   gIsVirtualAI==T
+00008fe0: 7275 653a 0d0a 2020 2020 2020 2020 2020  rue:..          
+00008ff0: 2020 5f64 6972 3d4d 6f72 7068 696e 6750    _dir=MorphingP
+00009000: 6172 616d 5b22 6f64 6972 225d 0d0a 2020  aram["odir"]..  
+00009010: 2020 2020 2020 2020 2020 6966 205f 6469            if _di
+00009020: 723d 3d4e 6f6e 653a 0d0a 2020 2020 2020  r==None:..      
+00009030: 2020 2020 2020 2020 2020 5f64 6972 3d67            _dir=g
+00009040: 4f75 7470 7574 4469 720d 0a20 2020 2020  OutputDir..     
+00009050: 2020 2020 2020 205f 6469 7249 6d61 6765         _dirImage
+00009060: 3d5f 6469 722b 5f66 696c 656e 616d 650d  =_dir+_filename.
+00009070: 0a0d 0a20 2020 2020 2020 2020 2020 2077  ...            w
+00009080: 6974 6820 6f70 656e 285f 6469 7249 6d61  ith open(_dirIma
+00009090: 6765 2c20 2272 6222 2920 6173 2069 6d61  ge, "rb") as ima
+000090a0: 6765 5f66 696c 653a 0d0a 2020 2020 2020  ge_file:..      
+000090b0: 2020 2020 2020 2020 2020 696d 6167 655f            image_
+000090c0: 6461 7461 203d 2069 6d61 6765 5f66 696c  data = image_fil
+000090d0: 652e 7265 6164 2829 0d0a 0d0a 2020 2020  e.read()....    
+000090e0: 2020 2020 2020 2020 696d 5f62 3634 203d          im_b64 =
+000090f0: 2062 6173 6536 342e 6236 3465 6e63 6f64   base64.b64encod
+00009100: 6528 696d 6167 655f 6461 7461 292e 6465  e(image_data).de
+00009110: 636f 6465 2822 7574 6638 2229 0d0a 2020  code("utf8")..  
+00009120: 2020 2020 2020 2020 2020 7061 7261 6d3d            param=
+00009130: 7b0d 0a20 2020 2020 2020 2020 2020 2020  {..             
+00009140: 2020 2022 696d 6167 6522 3a20 696d 5f62     "image": im_b
+00009150: 3634 2c0d 0a20 2020 2020 2020 2020 2020  64,..           
+00009160: 2020 2020 2022 7569 6422 3a20 7374 7228       "uid": str(
+00009170: 4d6f 7270 6869 6e67 5061 7261 6d5b 2275  MorphingParam["u
+00009180: 6964 225d 292c 0d0a 2020 2020 2020 2020  id"]),..        
+00009190: 2020 2020 2020 2020 2263 7963 6c65 223a          "cycle":
+000091a0: 2073 7472 284d 6f72 7068 696e 6750 6172   str(MorphingPar
+000091b0: 616d 5b22 6379 636c 6522 5d29 2c0d 0a20  am["cycle"]),.. 
+000091c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000091d0: 656e 6769 6e65 223a 2043 7265 6450 6172  engine": CredPar
+000091e0: 616d 5b22 656e 6769 6e65 225d 2c0d 0a20  am["engine"],.. 
+000091f0: 2020 2020 2020 2020 2020 207d 2020 2020             }    
+00009200: 2020 2020 2020 2020 0d0a 2020 2020 2020          ..      
+00009210: 2020 2020 2020 5f75 706c 6f61 6449 6d61        _uploadIma
+00009220: 6765 546f 4f53 4149 5328 7061 7261 6d2c  geToOSAIS(param,
+00009230: 2043 7265 6450 6172 616d 5b22 6973 4c6f   CredParam["isLo
+00009240: 6361 6c22 5d29 0d0a 2020 2020 7265 7475  cal"])..    retu
+00009250: 726e 206f 626a 5265 730d 0a0d 0a23 2320  rn objRes....## 
 00009260: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00009270: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00009280: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009290: 0d0a 0d0a 2323 2050 5542 4c49 4320 2d20  ....## PUBLIC - 
-000092a0: 7265 7365 7474 696e 6720 7768 6f20 7468  resetting who th
-000092b0: 6973 2041 4920 6973 2074 616c 6b69 6e67  is AI is talking
-000092c0: 2074 6f20 284f 5341 4953 2070 726f 6420   to (OSAIS prod 
-000092d0: 616e 6420 6462 6729 0d0a 6465 6620 6f73  and dbg)..def os
-000092e0: 6169 735f 7265 7365 744f 5341 4953 285f  ais_resetOSAIS(_
-000092f0: 6c6f 6361 7469 6f6e 5072 6f64 2c20 5f6c  locationProd, _l
-00009300: 6f63 616c 7469 6f6e 4465 6275 6729 3a0d  ocaltionDebug):.
-00009310: 0a20 2020 2067 6c6f 6261 6c20 674f 7269  .    global gOri
-00009320: 6769 6e4f 5341 4953 0d0a 2020 2020 676c  ginOSAIS..    gl
-00009330: 6f62 616c 2067 4f72 6967 696e 4c6f 6361  obal gOriginLoca
-00009340: 6c4f 5341 4953 0d0a 2020 2020 674f 7269  lOSAIS..    gOri
-00009350: 6769 6e4f 5341 4953 3d5f 6c6f 6361 7469  ginOSAIS=_locati
-00009360: 6f6e 5072 6f64 0d0a 2020 2020 674f 7269  onProd..    gOri
-00009370: 6769 6e4c 6f63 616c 4f53 4149 533d 5f6c  ginLocalOSAIS=_l
-00009380: 6f63 616c 7469 6f6e 4465 6275 670d 0a20  ocaltionDebug.. 
-00009390: 2020 2069 6620 5f6c 6f63 6174 696f 6e50     if _locationP
-000093a0: 726f 6421 3d4e 6f6e 653a 0d0a 2020 2020  rod!=None:..    
-000093b0: 2020 2020 7072 696e 7428 223d 3e20 5468      print("=> Th
-000093c0: 6973 2041 4920 6973 2072 6573 6574 2074  is AI is reset t
-000093d0: 6f20 7461 6c6b 2074 6f20 5052 4f44 2022  o talk to PROD "
-000093e0: 2b67 4f72 6967 696e 4f53 4149 5329 0d0a  +gOriginOSAIS)..
-000093f0: 2020 2020 6966 205f 6c6f 6361 6c74 696f      if _localtio
-00009400: 6e44 6562 7567 213d 4e6f 6e65 3a0d 0a20  nDebug!=None:.. 
-00009410: 2020 2020 2020 2070 7269 6e74 2822 3d3e         print("=>
-00009420: 2054 6869 7320 4149 2069 7320 7265 7365   This AI is rese
-00009430: 7420 746f 2074 616c 6b20 746f 2044 4542  t to talk to DEB
-00009440: 5547 2022 2b67 4f72 6967 696e 4c6f 6361  UG "+gOriginLoca
-00009450: 6c4f 5341 4953 2b22 5c72 5c6e 2229 0d0a  lOSAIS+"\r\n")..
-00009460: 2020 2020 7265 7475 726e 2054 7275 650d      return True.
-00009470: 0a0d 0a23 2320 5055 424c 4943 202d 2049  ...## PUBLIC - I
-00009480: 6e69 7420 7468 6520 5669 7274 7561 6c20  nit the Virtual 
-00009490: 4149 0d0a 6465 6620 6f73 6169 735f 696e  AI..def osais_in
-000094a0: 6974 6961 6c69 7a65 4149 2829 3a0d 0a20  itializeAI():.. 
-000094b0: 2020 2067 6c6f 6261 6c20 6749 7344 6f63     global gIsDoc
-000094c0: 6b65 720d 0a20 2020 2067 6c6f 6261 6c20  ker..    global 
-000094d0: 6749 734c 6f63 616c 0d0a 2020 2020 676c  gIsLocal..    gl
-000094e0: 6f62 616c 2067 4973 5669 7274 7561 6c41  obal gIsVirtualA
-000094f0: 490d 0a20 2020 2067 6c6f 6261 6c20 6755  I..    global gU
-00009500: 7365 726e 616d 650d 0a20 2020 2067 6c6f  sername..    glo
-00009510: 6261 6c20 674e 616d 650d 0a20 2020 2067  bal gName..    g
-00009520: 6c6f 6261 6c20 6750 6f72 7441 490d 0a20  lobal gPortAI.. 
-00009530: 2020 2067 6c6f 6261 6c20 6756 6572 7369     global gVersi
-00009540: 6f6e 0d0a 2020 2020 676c 6f62 616c 2067  on..    global g
-00009550: 506f 7274 4761 7465 7761 790d 0a20 2020  PortGateway..   
-00009560: 2067 6c6f 6261 6c20 6750 6f72 744c 6f63   global gPortLoc
-00009570: 616c 4f53 4149 530d 0a20 2020 2067 6c6f  alOSAIS..    glo
-00009580: 6261 6c20 6749 504c 6f63 616c 0d0a 2020  bal gIPLocal..  
-00009590: 2020 676c 6f62 616c 2067 4578 7449 500d    global gExtIP.
-000095a0: 0a20 2020 2067 6c6f 6261 6c20 674f 7269  .    global gOri
-000095b0: 6769 6e47 6174 6577 6179 0d0a 2020 2020  ginGateway..    
-000095c0: 676c 6f62 616c 2067 4175 7468 546f 6b65  global gAuthToke
-000095d0: 6e0d 0a20 2020 2067 6c6f 6261 6c20 6741  n..    global gA
-000095e0: 7574 6854 6f6b 656e 4c6f 6361 6c0d 0a20  uthTokenLocal.. 
-000095f0: 2020 2067 6c6f 6261 6c20 674f 7269 6769     global gOrigi
-00009600: 6e4f 5341 4953 0d0a 2020 2020 676c 6f62  nOSAIS..    glob
-00009610: 616c 2067 4f72 6967 696e 4c6f 6361 6c4f  al gOriginLocalO
-00009620: 5341 4953 0d0a 0d0a 2020 2020 2323 206c  SAIS....    ## l
-00009630: 6f61 6420 656e 7620 0d0a 2020 2020 5f65  oad env ..    _e
-00009640: 6e76 4669 6c65 3d22 656e 765f 6c6f 6361  nvFile="env_loca
-00009650: 6c22 0d0a 2020 2020 6966 2067 4973 446f  l"..    if gIsDo
-00009660: 636b 6572 3a0d 0a20 2020 2020 2020 205f  cker:..        _
-00009670: 656e 7646 696c 653d 2265 6e76 5f64 6f63  envFile="env_doc
-00009680: 6b65 7222 0d0a 2020 2020 2020 2020 7072  ker"..        pr
-00009690: 696e 7428 225c 725c 6e3d 3e20 696e 2044  int("\r\n=> in D
-000096a0: 6f63 6b65 725c 725c 6e22 290d 0a20 2020  ocker\r\n")..   
-000096b0: 2065 6c73 653a 0d0a 2020 2020 2020 2020   else:..        
-000096c0: 7072 696e 7428 225c 725c 6e3d 3e20 4e4f  print("\r\n=> NO
-000096d0: 5420 696e 2044 6f63 6b65 725c 725c 6e22  T in Docker\r\n"
-000096e0: 2920 2020 2020 2020 200d 0a20 2020 206f  )        ..    o
-000096f0: 626a 3d6f 7361 6973 5f67 6574 456e 7628  bj=osais_getEnv(
-00009700: 5f65 6e76 4669 6c65 290d 0a20 2020 2067  _envFile)..    g
-00009710: 4973 4c6f 6361 6c3d 6f62 6a5b 2269 734c  IsLocal=obj["isL
-00009720: 6f63 616c 225d 0d0a 2020 2020 6749 7356  ocal"]..    gIsV
-00009730: 6972 7475 616c 4149 3d6f 626a 5b22 6973  irtualAI=obj["is
-00009740: 5669 7274 7561 6c41 4922 5d0d 0a20 2020  VirtualAI"]..   
-00009750: 2067 5573 6572 6e61 6d65 3d6f 626a 5b22   gUsername=obj["
-00009760: 7573 6572 6e61 6d65 225d 0d0a 2020 2020  username"]..    
-00009770: 674e 616d 653d 6f62 6a5b 226e 616d 6522  gName=obj["name"
-00009780: 5d0d 0a0d 0a20 2020 2023 2320 6672 6f6d  ]....    ## from
-00009790: 2065 6e76 2c20 6c6f 6164 2041 4920 636f   env, load AI co
-000097a0: 6e66 6967 0d0a 2020 2020 6743 6f6e 6669  nfig..    gConfi
-000097b0: 673d 6f73 6169 735f 6c6f 6164 436f 6e66  g=osais_loadConf
-000097c0: 6967 2867 4e61 6d65 290d 0a20 2020 2067  ig(gName)..    g
-000097d0: 506f 7274 4149 203d 2067 436f 6e66 6967  PortAI = gConfig
-000097e0: 5b22 706f 7274 225d 0d0a 2020 2020 6756  ["port"]..    gV
-000097f0: 6572 7369 6f6e 203d 2067 436f 6e66 6967  ersion = gConfig
-00009800: 5b22 7665 7273 696f 6e22 5d0d 0a0d 0a20  ["version"].... 
-00009810: 2020 2070 7269 6e74 2822 5c72 5c6e 3d3d     print("\r\n==
-00009820: 3d3d 3d20 436f 6e66 6967 203d 3d3d 3d3d  === Config =====
-00009830: 2229 0d0a 2020 2020 7072 696e 7428 2269  ")..    print("i
-00009840: 7320 4c6f 6361 6c3a 2022 2b73 7472 2867  s Local: "+str(g
-00009850: 4973 4c6f 6361 6c29 290d 0a20 2020 2070  IsLocal))..    p
-00009860: 7269 6e74 2822 6973 2056 6972 7475 616c  rint("is Virtual
-00009870: 3a20 222b 7374 7228 6749 7356 6972 7475  : "+str(gIsVirtu
-00009880: 616c 4149 2929 0d0a 2020 2020 7072 696e  alAI))..    prin
-00009890: 7428 226f 776e 6564 2062 7920 636c 6965  t("owned by clie
-000098a0: 6e74 3a20 222b 7374 7228 6755 7365 726e  nt: "+str(gUsern
-000098b0: 616d 6529 290d 0a20 2020 2070 7269 6e74  ame))..    print
-000098c0: 2822 3d3d 3d3d 3d20 2f43 6f6e 6669 6720  ("===== /Config 
-000098d0: 3d3d 3d3d 3d5c 725c 6e22 290d 0a0d 0a20  =====\r\n").... 
-000098e0: 2020 2023 2320 6d61 6b65 2073 7572 6520     ## make sure 
-000098f0: 7765 2068 6176 6520 6120 636f 6e66 6967  we have a config
-00009900: 2066 696c 650d 0a20 2020 205f 6c6f 6164   file..    _load
-00009910: 436f 6e66 6967 2867 4e61 6d65 290d 0a0d  Config(gName)...
-00009920: 0a20 2020 2023 2320 7768 6572 6520 6973  .    ## where is
-00009930: 204f 5341 4953 2066 6f72 2075 7320 7468   OSAIS for us th
-00009940: 656e 3f0d 0a20 2020 2067 4f72 6967 696e  en?..    gOrigin
-00009950: 4761 7465 7761 793d 6622 6874 7470 3a2f  Gateway=f"http:/
-00009960: 2f7b 6749 504c 6f63 616c 7d3a 7b67 506f  /{gIPLocal}:{gPo
-00009970: 7274 4761 7465 7761 797d 2f22 2020 2020  rtGateway}/"    
-00009980: 2020 2020 2023 2320 636f 6e66 6967 2066       ## config f
-00009990: 6f72 206c 6f63 616c 2067 6174 6577 6179  or local gateway
-000099a0: 2028 6c6f 6361 6c20 616e 6420 6e6f 7420   (local and not 
-000099b0: 7669 7274 7561 6c29 0d0a 2020 2020 6966  virtual)..    if
-000099c0: 2067 4973 5669 7274 7561 6c41 493a 0d0a   gIsVirtualAI:..
-000099d0: 2020 2020 2020 2020 6966 2067 4973 4c6f          if gIsLo
-000099e0: 6361 6c3a 0d0a 2020 2020 2020 2020 2020  cal:..          
-000099f0: 2020 6f73 6169 735f 7265 7365 744f 5341    osais_resetOSA
-00009a00: 4953 284e 6f6e 652c 2066 2268 7474 703a  IS(None, f"http:
-00009a10: 2f2f 7b67 4950 4c6f 6361 6c7d 3a7b 6750  //{gIPLocal}:{gP
-00009a20: 6f72 744c 6f63 616c 4f53 4149 537d 2f22  ortLocalOSAIS}/"
-00009a30: 290d 0a20 2020 2020 2020 2065 6c73 653a  )..        else:
-00009a40: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
-00009a50: 6169 735f 7265 7365 744f 5341 4953 2822  ais_resetOSAIS("
-00009a60: 6874 7470 733a 2f2f 6f70 656e 736f 7572  https://opensour
-00009a70: 6365 6169 732e 636f 6d2f 222c 204e 6f6e  ceais.com/", Non
-00009a80: 6529 0d0a 2020 2020 2020 2020 7472 793a  e)..        try:
-00009a90: 0d0a 2020 2020 2020 2020 2020 2020 6f73  ..            os
-00009aa0: 6169 735f 6175 7468 656e 7469 6361 7465  ais_authenticate
-00009ab0: 4149 2829 0d0a 2020 2020 2020 2020 6578  AI()..        ex
-00009ac0: 6365 7074 2045 7863 6570 7469 6f6e 2061  cept Exception a
-00009ad0: 7320 6572 723a 0d0a 2020 2020 2020 2020  s err:..        
-00009ae0: 2020 2020 7072 696e 7428 223d 3e20 4352      print("=> CR
-00009af0: 4954 4943 414c 3a20 436f 756c 6420 6e6f  ITICAL: Could no
-00009b00: 7420 636f 6e6e 6563 7420 7669 7274 7561  t connect virtua
-00009b10: 6c20 4149 2022 2b67 4e61 6d65 2b20 2220  l AI "+gName+ " 
-00009b20: 746f 204f 5341 4953 2229 0d0a 2020 2020  to OSAIS")..    
-00009b30: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-00009b40: 6f6e 650d 0a0d 0a20 2020 2020 2020 2069  one....        i
-00009b50: 6620 6741 7574 6854 6f6b 656e 213d 4e6f  f gAuthToken!=No
-00009b60: 6e65 3a0d 0a20 2020 2020 2020 2020 2020  ne:..           
-00009b70: 2070 7269 6e74 2822 3d3e 2052 756e 6e69   print("=> Runni
-00009b80: 6e67 2022 2b67 4e61 6d65 2b22 2041 4920  ng "+gName+" AI 
-00009b90: 6173 2061 2076 6972 7475 616c 2041 4920  as a virtual AI 
-00009ba0: 636f 6e6e 6563 7465 6420 746f 3a20 222b  connected to: "+
-00009bb0: 674f 7269 6769 6e4f 5341 4953 290d 0a20  gOriginOSAIS).. 
-00009bc0: 2020 2020 2020 2069 6620 6741 7574 6854         if gAuthT
-00009bd0: 6f6b 656e 4c6f 6361 6c21 3d4e 6f6e 653a  okenLocal!=None:
-00009be0: 0d0a 2020 2020 2020 2020 2020 2020 7072  ..            pr
-00009bf0: 696e 7428 223d 3e20 5275 6e6e 696e 6720  int("=> Running 
-00009c00: 222b 674e 616d 652b 2220 4149 2061 7320  "+gName+" AI as 
-00009c10: 6120 7669 7274 7561 6c20 4149 2063 6f6e  a virtual AI con
-00009c20: 6e65 6374 6564 2074 6f3a 2022 2b67 4f72  nected to: "+gOr
-00009c30: 6967 696e 4c6f 6361 6c4f 5341 4953 290d  iginLocalOSAIS).
-00009c40: 0a20 2020 2065 6c73 653a 0d0a 2020 2020  .    else:..    
-00009c50: 2020 2020 7472 793a 0d0a 2020 2020 2020      try:..      
-00009c60: 2020 2020 2020 6f73 6169 735f 7265 7365        osais_rese
-00009c70: 7447 6174 6577 6179 2867 4f72 6967 696e  tGateway(gOrigin
-00009c80: 4761 7465 7761 7929 0d0a 2020 2020 2020  Gateway)..      
-00009c90: 2020 2020 2020 7072 696e 7428 223d 3e20        print("=> 
-00009ca0: 5275 6e6e 696e 6720 222b 674e 616d 652b  Running "+gName+
-00009cb0: 2220 4149 2061 7320 6120 7365 7276 6572  " AI as a server
-00009cc0: 2063 6f6e 6e65 6374 6564 2074 6f20 6c6f   connected to lo
-00009cd0: 6361 6c20 4761 7465 7761 7920 222b 674f  cal Gateway "+gO
-00009ce0: 7269 6769 6e47 6174 6577 6179 290d 0a20  riginGateway).. 
-00009cf0: 2020 2020 2020 200d 0a20 2020 2020 2020         ..       
-00009d00: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00009d10: 6e20 6173 2065 7272 3a0d 0a20 2020 2020  n as err:..     
-00009d20: 2020 2020 2020 2070 7269 6e74 2822 4352         print("CR
-00009d30: 4954 4943 414c 3a20 636f 756c 6420 6e6f  ITICAL: could no
-00009d40: 7420 6e6f 7469 6679 2047 6174 6577 6179  t notify Gateway
-00009d50: 2061 7420 222b 674f 7269 6769 6e47 6174   at "+gOriginGat
-00009d60: 6577 6179 290d 0a20 2020 2020 2020 2020  eway)..         
-00009d70: 2020 2072 6574 7572 6e20 4e6f 6e65 0d0a     return None..
-00009d80: 0d0a 2020 2020 2323 2069 6e69 7420 6465  ..    ## init de
-00009d90: 6661 756c 7420 636f 7374 0d0a 2020 2020  fault cost..    
-00009da0: 5f69 6e69 7469 616c 697a 6543 6f73 7428  _initializeCost(
-00009db0: 290d 0a0d 0a20 2020 2070 7269 6e74 2822  )....    print("
-00009dc0: 5c72 5c6e 2229 0d0a 2020 2020 7265 7475  \r\n")..    retu
-00009dd0: 726e 2067 4e61 6d65 0d0a 0d0a 2323 202d  rn gName....## -
-00009de0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009df0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009e00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009e10: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009e20: 2d2d 2d2d 2d2d 2d0d 0a23 2020 2020 2020  -------..#      
-00009e30: 2053 7461 7274 696e 6720 706f 696e 7420   Starting point 
-00009e40: 6f66 204c 6962 0d0a 2323 202d 2d2d 2d2d  of Lib..## -----
-00009e50: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009290: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000092a0: 2d2d 2d2d 2d2d 2d2d 0d0a 2320 2020 2020  --------..#     
+000092b0: 2020 496e 6974 2070 726f 6365 7373 696e    Init processin
+000092c0: 670d 0a23 2320 2d2d 2d2d 2d2d 2d2d 2d2d  g..## ----------
+000092d0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000092e0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+000092f0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009300: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 0d0a  --------------..
+00009310: 0d0a 2323 2050 5542 4c49 4320 2d20 7265  ..## PUBLIC - re
+00009320: 7365 7474 696e 6720 7768 6f20 7468 6973  setting who this
+00009330: 2041 4920 6973 2074 616c 6b69 6e67 2074   AI is talking t
+00009340: 6f20 284f 5341 4953 2070 726f 6420 616e  o (OSAIS prod an
+00009350: 6420 6462 6729 0d0a 6465 6620 6f73 6169  d dbg)..def osai
+00009360: 735f 7265 7365 744f 5341 4953 285f 6c6f  s_resetOSAIS(_lo
+00009370: 6361 7469 6f6e 5072 6f64 2c20 5f6c 6f63  cationProd, _loc
+00009380: 616c 7469 6f6e 4465 6275 6729 3a0d 0a20  altionDebug):.. 
+00009390: 2020 2067 6c6f 6261 6c20 674f 7269 6769     global gOrigi
+000093a0: 6e4f 5341 4953 0d0a 2020 2020 676c 6f62  nOSAIS..    glob
+000093b0: 616c 2067 4f72 6967 696e 4c6f 6361 6c4f  al gOriginLocalO
+000093c0: 5341 4953 0d0a 2020 2020 674f 7269 6769  SAIS..    gOrigi
+000093d0: 6e4f 5341 4953 3d5f 6c6f 6361 7469 6f6e  nOSAIS=_location
+000093e0: 5072 6f64 0d0a 2020 2020 674f 7269 6769  Prod..    gOrigi
+000093f0: 6e4c 6f63 616c 4f53 4149 533d 5f6c 6f63  nLocalOSAIS=_loc
+00009400: 616c 7469 6f6e 4465 6275 670d 0a20 2020  altionDebug..   
+00009410: 2069 6620 5f6c 6f63 6174 696f 6e50 726f   if _locationPro
+00009420: 6421 3d4e 6f6e 653a 0d0a 2020 2020 2020  d!=None:..      
+00009430: 2020 7072 696e 7428 223d 3e20 5468 6973    print("=> This
+00009440: 2041 4920 6973 2072 6573 6574 2074 6f20   AI is reset to 
+00009450: 7461 6c6b 2074 6f20 5052 4f44 2022 2b67  talk to PROD "+g
+00009460: 4f72 6967 696e 4f53 4149 5329 0d0a 2020  OriginOSAIS)..  
+00009470: 2020 6966 205f 6c6f 6361 6c74 696f 6e44    if _localtionD
+00009480: 6562 7567 213d 4e6f 6e65 3a0d 0a20 2020  ebug!=None:..   
+00009490: 2020 2020 2070 7269 6e74 2822 3d3e 2054       print("=> T
+000094a0: 6869 7320 4149 2069 7320 7265 7365 7420  his AI is reset 
+000094b0: 746f 2074 616c 6b20 746f 2044 4542 5547  to talk to DEBUG
+000094c0: 2022 2b67 4f72 6967 696e 4c6f 6361 6c4f   "+gOriginLocalO
+000094d0: 5341 4953 2b22 5c72 5c6e 2229 0d0a 2020  SAIS+"\r\n")..  
+000094e0: 2020 7265 7475 726e 2054 7275 650d 0a0d    return True...
+000094f0: 0a23 2320 5055 424c 4943 202d 2049 6e69  .## PUBLIC - Ini
+00009500: 7420 7468 6520 5669 7274 7561 6c20 4149  t the Virtual AI
+00009510: 0d0a 6465 6620 6f73 6169 735f 696e 6974  ..def osais_init
+00009520: 6961 6c69 7a65 4149 2829 3a0d 0a20 2020  ializeAI():..   
+00009530: 2067 6c6f 6261 6c20 6749 7344 6f63 6b65   global gIsDocke
+00009540: 720d 0a20 2020 2067 6c6f 6261 6c20 6749  r..    global gI
+00009550: 734c 6f63 616c 0d0a 2020 2020 676c 6f62  sLocal..    glob
+00009560: 616c 2067 4973 5669 7274 7561 6c41 490d  al gIsVirtualAI.
+00009570: 0a20 2020 2067 6c6f 6261 6c20 6755 7365  .    global gUse
+00009580: 726e 616d 650d 0a20 2020 2067 6c6f 6261  rname..    globa
+00009590: 6c20 674e 616d 650d 0a20 2020 2067 6c6f  l gName..    glo
+000095a0: 6261 6c20 6750 6f72 7441 490d 0a20 2020  bal gPortAI..   
+000095b0: 2067 6c6f 6261 6c20 6756 6572 7369 6f6e   global gVersion
+000095c0: 0d0a 2020 2020 676c 6f62 616c 2067 506f  ..    global gPo
+000095d0: 7274 4761 7465 7761 790d 0a20 2020 2067  rtGateway..    g
+000095e0: 6c6f 6261 6c20 6750 6f72 744c 6f63 616c  lobal gPortLocal
+000095f0: 4f53 4149 530d 0a20 2020 2067 6c6f 6261  OSAIS..    globa
+00009600: 6c20 6749 504c 6f63 616c 0d0a 2020 2020  l gIPLocal..    
+00009610: 676c 6f62 616c 2067 4578 7449 500d 0a20  global gExtIP.. 
+00009620: 2020 2067 6c6f 6261 6c20 674f 7269 6769     global gOrigi
+00009630: 6e47 6174 6577 6179 0d0a 2020 2020 676c  nGateway..    gl
+00009640: 6f62 616c 2067 4175 7468 546f 6b65 6e0d  obal gAuthToken.
+00009650: 0a20 2020 2067 6c6f 6261 6c20 6741 7574  .    global gAut
+00009660: 6854 6f6b 656e 4c6f 6361 6c0d 0a20 2020  hTokenLocal..   
+00009670: 2067 6c6f 6261 6c20 674f 7269 6769 6e4f   global gOriginO
+00009680: 5341 4953 0d0a 2020 2020 676c 6f62 616c  SAIS..    global
+00009690: 2067 4f72 6967 696e 4c6f 6361 6c4f 5341   gOriginLocalOSA
+000096a0: 4953 0d0a 0d0a 2020 2020 2323 206c 6f61  IS....    ## loa
+000096b0: 6420 656e 7620 0d0a 2020 2020 5f65 6e76  d env ..    _env
+000096c0: 4669 6c65 3d22 656e 765f 6c6f 6361 6c22  File="env_local"
+000096d0: 0d0a 2020 2020 6966 2067 4973 446f 636b  ..    if gIsDock
+000096e0: 6572 3a0d 0a20 2020 2020 2020 205f 656e  er:..        _en
+000096f0: 7646 696c 653d 2265 6e76 5f64 6f63 6b65  vFile="env_docke
+00009700: 7222 0d0a 2020 2020 2020 2020 7072 696e  r"..        prin
+00009710: 7428 225c 725c 6e3d 3e20 696e 2044 6f63  t("\r\n=> in Doc
+00009720: 6b65 725c 725c 6e22 290d 0a20 2020 2065  ker\r\n")..    e
+00009730: 6c73 653a 0d0a 2020 2020 2020 2020 7072  lse:..        pr
+00009740: 696e 7428 225c 725c 6e3d 3e20 4e4f 5420  int("\r\n=> NOT 
+00009750: 696e 2044 6f63 6b65 725c 725c 6e22 2920  in Docker\r\n") 
+00009760: 2020 2020 2020 200d 0a20 2020 206f 626a         ..    obj
+00009770: 3d6f 7361 6973 5f67 6574 456e 7628 5f65  =osais_getEnv(_e
+00009780: 6e76 4669 6c65 290d 0a20 2020 2067 4973  nvFile)..    gIs
+00009790: 4c6f 6361 6c3d 6f62 6a5b 2269 734c 6f63  Local=obj["isLoc
+000097a0: 616c 225d 0d0a 2020 2020 6749 7356 6972  al"]..    gIsVir
+000097b0: 7475 616c 4149 3d6f 626a 5b22 6973 5669  tualAI=obj["isVi
+000097c0: 7274 7561 6c41 4922 5d0d 0a20 2020 2067  rtualAI"]..    g
+000097d0: 5573 6572 6e61 6d65 3d6f 626a 5b22 7573  Username=obj["us
+000097e0: 6572 6e61 6d65 225d 0d0a 2020 2020 674e  ername"]..    gN
+000097f0: 616d 653d 6f62 6a5b 226e 616d 6522 5d0d  ame=obj["name"].
+00009800: 0a0d 0a20 2020 2023 2320 6672 6f6d 2065  ...    ## from e
+00009810: 6e76 2c20 6c6f 6164 2041 4920 636f 6e66  nv, load AI conf
+00009820: 6967 0d0a 2020 2020 6743 6f6e 6669 673d  ig..    gConfig=
+00009830: 6f73 6169 735f 6c6f 6164 436f 6e66 6967  osais_loadConfig
+00009840: 2867 4e61 6d65 290d 0a20 2020 2067 506f  (gName)..    gPo
+00009850: 7274 4149 203d 2067 436f 6e66 6967 5b22  rtAI = gConfig["
+00009860: 706f 7274 225d 0d0a 2020 2020 6756 6572  port"]..    gVer
+00009870: 7369 6f6e 203d 2067 436f 6e66 6967 5b22  sion = gConfig["
+00009880: 7665 7273 696f 6e22 5d0d 0a0d 0a20 2020  version"]....   
+00009890: 2070 7269 6e74 2822 5c72 5c6e 3d3d 3d3d   print("\r\n====
+000098a0: 3d20 436f 6e66 6967 203d 3d3d 3d3d 2229  = Config =====")
+000098b0: 0d0a 2020 2020 7072 696e 7428 2269 7320  ..    print("is 
+000098c0: 4c6f 6361 6c3a 2022 2b73 7472 2867 4973  Local: "+str(gIs
+000098d0: 4c6f 6361 6c29 290d 0a20 2020 2070 7269  Local))..    pri
+000098e0: 6e74 2822 6973 2056 6972 7475 616c 3a20  nt("is Virtual: 
+000098f0: 222b 7374 7228 6749 7356 6972 7475 616c  "+str(gIsVirtual
+00009900: 4149 2929 0d0a 2020 2020 7072 696e 7428  AI))..    print(
+00009910: 226f 776e 6564 2062 7920 636c 6965 6e74  "owned by client
+00009920: 3a20 222b 7374 7228 6755 7365 726e 616d  : "+str(gUsernam
+00009930: 6529 290d 0a20 2020 2070 7269 6e74 2822  e))..    print("
+00009940: 3d3d 3d3d 3d20 2f43 6f6e 6669 6720 3d3d  ===== /Config ==
+00009950: 3d3d 3d5c 725c 6e22 290d 0a0d 0a20 2020  ===\r\n")....   
+00009960: 2023 2320 6d61 6b65 2073 7572 6520 7765   ## make sure we
+00009970: 2068 6176 6520 6120 636f 6e66 6967 2066   have a config f
+00009980: 696c 650d 0a20 2020 205f 6c6f 6164 436f  ile..    _loadCo
+00009990: 6e66 6967 2867 4e61 6d65 290d 0a0d 0a20  nfig(gName).... 
+000099a0: 2020 2023 2320 7768 6572 6520 6973 204f     ## where is O
+000099b0: 5341 4953 2066 6f72 2075 7320 7468 656e  SAIS for us then
+000099c0: 3f0d 0a20 2020 2067 4f72 6967 696e 4761  ?..    gOriginGa
+000099d0: 7465 7761 793d 6622 6874 7470 3a2f 2f7b  teway=f"http://{
+000099e0: 6749 504c 6f63 616c 7d3a 7b67 506f 7274  gIPLocal}:{gPort
+000099f0: 4761 7465 7761 797d 2f22 2020 2020 2020  Gateway}/"      
+00009a00: 2020 2023 2320 636f 6e66 6967 2066 6f72     ## config for
+00009a10: 206c 6f63 616c 2067 6174 6577 6179 2028   local gateway (
+00009a20: 6c6f 6361 6c20 616e 6420 6e6f 7420 7669  local and not vi
+00009a30: 7274 7561 6c29 0d0a 2020 2020 6966 2067  rtual)..    if g
+00009a40: 4973 5669 7274 7561 6c41 493a 0d0a 2020  IsVirtualAI:..  
+00009a50: 2020 2020 2020 6966 2067 4973 4c6f 6361        if gIsLoca
+00009a60: 6c3a 0d0a 2020 2020 2020 2020 2020 2020  l:..            
+00009a70: 6f73 6169 735f 7265 7365 744f 5341 4953  osais_resetOSAIS
+00009a80: 284e 6f6e 652c 2066 2268 7474 703a 2f2f  (None, f"http://
+00009a90: 7b67 4950 4c6f 6361 6c7d 3a7b 6750 6f72  {gIPLocal}:{gPor
+00009aa0: 744c 6f63 616c 4f53 4149 537d 2f22 290d  tLocalOSAIS}/").
+00009ab0: 0a20 2020 2020 2020 2065 6c73 653a 0d0a  .        else:..
+00009ac0: 2020 2020 2020 2020 2020 2020 6f73 6169              osai
+00009ad0: 735f 7265 7365 744f 5341 4953 2822 6874  s_resetOSAIS("ht
+00009ae0: 7470 733a 2f2f 6f70 656e 736f 7572 6365  tps://opensource
+00009af0: 6169 732e 636f 6d2f 222c 204e 6f6e 6529  ais.com/", None)
+00009b00: 0d0a 2020 2020 2020 2020 7472 793a 0d0a  ..        try:..
+00009b10: 2020 2020 2020 2020 2020 2020 6f73 6169              osai
+00009b20: 735f 6175 7468 656e 7469 6361 7465 4149  s_authenticateAI
+00009b30: 2829 0d0a 2020 2020 2020 2020 6578 6365  ()..        exce
+00009b40: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+00009b50: 6572 723a 0d0a 2020 2020 2020 2020 2020  err:..          
+00009b60: 2020 7072 696e 7428 223d 3e20 4352 4954    print("=> CRIT
+00009b70: 4943 414c 3a20 436f 756c 6420 6e6f 7420  ICAL: Could not 
+00009b80: 636f 6e6e 6563 7420 7669 7274 7561 6c20  connect virtual 
+00009b90: 4149 2022 2b67 4e61 6d65 2b20 2220 746f  AI "+gName+ " to
+00009ba0: 204f 5341 4953 2229 0d0a 2020 2020 2020   OSAIS")..      
+00009bb0: 2020 2020 2020 7265 7475 726e 204e 6f6e        return Non
+00009bc0: 650d 0a0d 0a20 2020 2020 2020 2069 6620  e....        if 
+00009bd0: 6741 7574 6854 6f6b 656e 213d 4e6f 6e65  gAuthToken!=None
+00009be0: 3a0d 0a20 2020 2020 2020 2020 2020 2070  :..            p
+00009bf0: 7269 6e74 2822 3d3e 2052 756e 6e69 6e67  rint("=> Running
+00009c00: 2022 2b67 4e61 6d65 2b22 2041 4920 6173   "+gName+" AI as
+00009c10: 2061 2076 6972 7475 616c 2041 4920 636f   a virtual AI co
+00009c20: 6e6e 6563 7465 6420 746f 3a20 222b 674f  nnected to: "+gO
+00009c30: 7269 6769 6e4f 5341 4953 290d 0a20 2020  riginOSAIS)..   
+00009c40: 2020 2020 2069 6620 6741 7574 6854 6f6b       if gAuthTok
+00009c50: 656e 4c6f 6361 6c21 3d4e 6f6e 653a 0d0a  enLocal!=None:..
+00009c60: 2020 2020 2020 2020 2020 2020 7072 696e              prin
+00009c70: 7428 223d 3e20 5275 6e6e 696e 6720 222b  t("=> Running "+
+00009c80: 674e 616d 652b 2220 4149 2061 7320 6120  gName+" AI as a 
+00009c90: 7669 7274 7561 6c20 4149 2063 6f6e 6e65  virtual AI conne
+00009ca0: 6374 6564 2074 6f3a 2022 2b67 4f72 6967  cted to: "+gOrig
+00009cb0: 696e 4c6f 6361 6c4f 5341 4953 290d 0a20  inLocalOSAIS).. 
+00009cc0: 2020 2065 6c73 653a 0d0a 2020 2020 2020     else:..      
+00009cd0: 2020 7472 793a 0d0a 2020 2020 2020 2020    try:..        
+00009ce0: 2020 2020 6f73 6169 735f 7265 7365 7447      osais_resetG
+00009cf0: 6174 6577 6179 2867 4f72 6967 696e 4761  ateway(gOriginGa
+00009d00: 7465 7761 7929 0d0a 2020 2020 2020 2020  teway)..        
+00009d10: 2020 2020 7072 696e 7428 223d 3e20 5275      print("=> Ru
+00009d20: 6e6e 696e 6720 222b 674e 616d 652b 2220  nning "+gName+" 
+00009d30: 4149 2061 7320 6120 7365 7276 6572 2063  AI as a server c
+00009d40: 6f6e 6e65 6374 6564 2074 6f20 6c6f 6361  onnected to loca
+00009d50: 6c20 4761 7465 7761 7920 222b 674f 7269  l Gateway "+gOri
+00009d60: 6769 6e47 6174 6577 6179 290d 0a20 2020  ginGateway)..   
+00009d70: 2020 2020 200d 0a20 2020 2020 2020 2065       ..        e
+00009d80: 7863 6570 7420 4578 6365 7074 696f 6e20  xcept Exception 
+00009d90: 6173 2065 7272 3a0d 0a20 2020 2020 2020  as err:..       
+00009da0: 2020 2020 2070 7269 6e74 2822 4352 4954       print("CRIT
+00009db0: 4943 414c 3a20 636f 756c 6420 6e6f 7420  ICAL: could not 
+00009dc0: 6e6f 7469 6679 2047 6174 6577 6179 2061  notify Gateway a
+00009dd0: 7420 222b 674f 7269 6769 6e47 6174 6577  t "+gOriginGatew
+00009de0: 6179 290d 0a20 2020 2020 2020 2020 2020  ay)..           
+00009df0: 2072 6574 7572 6e20 4e6f 6e65 0d0a 0d0a   return None....
+00009e00: 2020 2020 2323 2069 6e69 7420 6465 6661      ## init defa
+00009e10: 756c 7420 636f 7374 0d0a 2020 2020 5f69  ult cost..    _i
+00009e20: 6e69 7469 616c 697a 6543 6f73 7428 290d  nitializeCost().
+00009e30: 0a0d 0a20 2020 2070 7269 6e74 2822 5c72  ...    print("\r
+00009e40: 5c6e 2229 0d0a 2020 2020 7265 7475 726e  \n")..    return
+00009e50: 2067 4e61 6d65 0d0a 0d0a 2323 202d 2d2d   gName....## ---
 00009e60: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00009e70: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00009e80: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
-00009e90: 2d2d 2d0d 0a0d 0a23 204d 756c 7469 7468  ---....# Multith
-00009ea0: 7265 6164 696e 6720 666f 7220 6f62 7365  reading for obse
-00009eb0: 7276 6572 730d 0a77 6174 6368 5f64 6972  rvers..watch_dir
-00009ec0: 6563 746f 7279 3d73 7461 7274 5f6f 6273  ectory=start_obs
-00009ed0: 6572 7665 725f 7468 7265 6164 285f 6765  erver_thread(_ge
-00009ee0: 744f 7574 7075 7444 6972 2829 2c20 6f73  tOutputDir(), os
-00009ef0: 6169 735f 6f6e 4e6f 7469 6679 4669 6c65  ais_onNotifyFile
-00009f00: 4372 6561 7465 642c 204e 6f6e 6529 2020  Created, None)  
-00009f10: 2020 200d 0a0d 0a23 636c 6561 6e69 6e67     ....#cleaning
-00009f20: 2064 6972 2065 7665 7279 2031 306d 696e   dir every 10min
-00009f30: 0d0a 7363 6865 6475 6c65 2e65 7665 7279  ..schedule.every
-00009f40: 2831 3029 2e6d 696e 7574 6573 2e64 6f28  (10).minutes.do(
-00009f50: 5f63 6c65 6172 4469 7229 0d0a 0d0a 7072  _clearDir)....pr
-00009f60: 696e 7428 225c 725c 6e50 7974 686f 6e20  int("\r\nPython 
-00009f70: 4f53 4149 5320 4c69 6220 6973 206c 6f61  OSAIS Lib is loa
-00009f80: 6465 642e 2e2e 2229 0d0a 0d0a 0d0a       ded...")......
+00009e90: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009ea0: 2d2d 2d2d 2d0d 0a23 2020 2020 2020 2053  -----..#       S
+00009eb0: 7461 7274 696e 6720 706f 696e 7420 6f66  tarting point of
+00009ec0: 204c 6962 0d0a 2323 202d 2d2d 2d2d 2d2d   Lib..## -------
+00009ed0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009ee0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009ef0: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f00: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
+00009f10: 2d0d 0a0d 0a23 204d 756c 7469 7468 7265  -....# Multithre
+00009f20: 6164 696e 6720 666f 7220 6f62 7365 7276  ading for observ
+00009f30: 6572 730d 0a77 6174 6368 5f64 6972 6563  ers..watch_direc
+00009f40: 746f 7279 3d73 7461 7274 5f6f 6273 6572  tory=start_obser
+00009f50: 7665 725f 7468 7265 6164 285f 6765 744f  ver_thread(_getO
+00009f60: 7574 7075 7444 6972 2829 2c20 6f73 6169  utputDir(), osai
+00009f70: 735f 6f6e 4e6f 7469 6679 4669 6c65 4372  s_onNotifyFileCr
+00009f80: 6561 7465 642c 204e 6f6e 6529 2020 2020  eated, None)    
+00009f90: 200d 0a0d 0a23 636c 6561 6e69 6e67 2064   ....#cleaning d
+00009fa0: 6972 2065 7665 7279 2031 306d 696e 0d0a  ir every 10min..
+00009fb0: 7363 6865 6475 6c65 2e65 7665 7279 2831  schedule.every(1
+00009fc0: 3029 2e6d 696e 7574 6573 2e64 6f28 5f63  0).minutes.do(_c
+00009fd0: 6c65 6172 4469 7229 0d0a 0d0a 7072 696e  learDir)....prin
+00009fe0: 7428 225c 725c 6e50 7974 686f 6e20 4f53  t("\r\nPython OS
+00009ff0: 4149 5320 4c69 6220 6973 206c 6f61 6465  AIS Lib is loade
+0000a000: 642e 2e2e 2229 0d0a 0d0a 0d0a            d...")......
```

### Comparing `osais-1.0.29/osais.egg-info/PKG-INFO` & `osais-1.0.30/osais.egg-info/PKG-INFO`

 * *Files 24% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: osais
-Version: 1.0.29
+Version: 1.0.30
 Summary: The osais Python lib for connecting AIs to OSAIS cloud
 Home-page: https://github.com/incubiq/osais
 Author: incubiq
 Author-email: eric@incubiq.com
 Keywords: osais,opensourceais
 Classifier: Development Status :: 3 - Alpha
 Classifier: Intended Audience :: Developers
```

### Comparing `osais-1.0.29/setup.py` & `osais-1.0.30/setup.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 from setuptools import setup, find_packages
 
 setup(
     name='osais',
-    version='1.0.29',
+    version='1.0.30',
     author='incubiq',
     author_email='eric@incubiq.com',
     description='The osais Python lib for connecting AIs to OSAIS cloud',
     long_description=open('README.md').read(),
     long_description_content_type='text/markdown',
     url='https://github.com/incubiq/osais',
     keywords = "osais, opensourceais",
```

