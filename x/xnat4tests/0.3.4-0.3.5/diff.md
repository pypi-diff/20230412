# Comparing `tmp/xnat4tests-0.3.4-py3-none-any.whl.zip` & `tmp/xnat4tests-0.3.5-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,24 @@
-Zip file size: 20166 bytes, number of entries: 22
--rw-r--r--  2.0 unx      243 b- defN 23-Mar-28 23:34 xnat4tests/__init__.py
--rw-r--r--  2.0 unx      498 b- defN 23-Mar-28 23:34 xnat4tests/_version.py
--rw-r--r--  2.0 unx     8596 b- defN 23-Mar-28 23:34 xnat4tests/base.py
--rw-r--r--  2.0 unx     4729 b- defN 23-Mar-28 23:34 xnat4tests/cli.py
--rw-r--r--  2.0 unx     5488 b- defN 23-Mar-28 23:34 xnat4tests/config.py
--rw-r--r--  2.0 unx     4568 b- defN 23-Mar-28 23:34 xnat4tests/data.py
--rw-r--r--  2.0 unx     1564 b- defN 23-Mar-28 23:34 xnat4tests/registry.py
--rw-r--r--  2.0 unx        0 b- defN 23-Mar-28 23:34 xnat4tests/testing.py
--rw-r--r--  2.0 unx      494 b- defN 23-Mar-28 23:34 xnat4tests/utils.py
--rw-r--r--  2.0 unx     3137 b- defN 23-Mar-28 23:34 xnat4tests/docker-src/Dockerfile
--rw-r--r--  2.0 unx      100 b- defN 23-Mar-28 23:34 xnat4tests/docker-src/XNAT.sql
--rwxr-xr-x  2.0 unx      288 b- defN 23-Mar-28 23:34 xnat4tests/docker-src/launch-xnat.sh
--rwxr-xr-x  2.0 unx      501 b- defN 23-Mar-28 23:34 xnat4tests/docker-src/make-xnat-config.sh
--rw-r--r--  2.0 unx     1008 b- defN 23-Mar-28 23:34 xnat4tests/docker-src/postfix-start
--rw-r--r--  2.0 unx      452 b- defN 23-Mar-28 23:34 xnat4tests/docker-src/supervisord.conf
--rw-r--r--  2.0 unx      566 b- defN 23-Mar-28 23:34 xnat4tests/docker-src/xnat-prefs-init.ini
--rw-r--r--  2.0 unx     6383 b- defN 23-Mar-28 23:34 xnat4tests-0.3.4.dist-info/LICENSE
--rw-r--r--  2.0 unx     6799 b- defN 23-Mar-28 23:34 xnat4tests-0.3.4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Mar-28 23:34 xnat4tests-0.3.4.dist-info/WHEEL
--rw-r--r--  2.0 unx       75 b- defN 23-Mar-28 23:34 xnat4tests-0.3.4.dist-info/entry_points.txt
--rw-r--r--  2.0 unx       11 b- defN 23-Mar-28 23:34 xnat4tests-0.3.4.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     1832 b- defN 23-Mar-28 23:34 xnat4tests-0.3.4.dist-info/RECORD
-22 files, 47424 bytes uncompressed, 17174 bytes compressed:  63.8%
+Zip file size: 20334 bytes, number of entries: 22
+-rw-r--r--  2.0 unx      243 b- defN 23-Apr-12 00:58 xnat4tests/__init__.py
+-rw-r--r--  2.0 unx      498 b- defN 23-Apr-12 00:58 xnat4tests/_version.py
+-rw-r--r--  2.0 unx     8596 b- defN 23-Apr-12 00:58 xnat4tests/base.py
+-rw-r--r--  2.0 unx     4729 b- defN 23-Apr-12 00:58 xnat4tests/cli.py
+-rw-r--r--  2.0 unx     5488 b- defN 23-Apr-12 00:58 xnat4tests/config.py
+-rw-r--r--  2.0 unx     6610 b- defN 23-Apr-12 00:58 xnat4tests/data.py
+-rw-r--r--  2.0 unx     1564 b- defN 23-Apr-12 00:58 xnat4tests/registry.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-12 00:58 xnat4tests/testing.py
+-rw-r--r--  2.0 unx      494 b- defN 23-Apr-12 00:58 xnat4tests/utils.py
+-rw-r--r--  2.0 unx     3137 b- defN 23-Apr-12 00:58 xnat4tests/docker-src/Dockerfile
+-rw-r--r--  2.0 unx      100 b- defN 23-Apr-12 00:58 xnat4tests/docker-src/XNAT.sql
+-rwxr-xr-x  2.0 unx      288 b- defN 23-Apr-12 00:58 xnat4tests/docker-src/launch-xnat.sh
+-rwxr-xr-x  2.0 unx      501 b- defN 23-Apr-12 00:58 xnat4tests/docker-src/make-xnat-config.sh
+-rw-r--r--  2.0 unx     1008 b- defN 23-Apr-12 00:58 xnat4tests/docker-src/postfix-start
+-rw-r--r--  2.0 unx      452 b- defN 23-Apr-12 00:58 xnat4tests/docker-src/supervisord.conf
+-rw-r--r--  2.0 unx      566 b- defN 23-Apr-12 00:58 xnat4tests/docker-src/xnat-prefs-init.ini
+-rw-r--r--  2.0 unx     6383 b- defN 23-Apr-12 00:58 xnat4tests-0.3.5.dist-info/LICENSE
+-rw-r--r--  2.0 unx     6799 b- defN 23-Apr-12 00:58 xnat4tests-0.3.5.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-12 00:58 xnat4tests-0.3.5.dist-info/WHEEL
+-rw-r--r--  2.0 unx       75 b- defN 23-Apr-12 00:58 xnat4tests-0.3.5.dist-info/entry_points.txt
+-rw-r--r--  2.0 unx       11 b- defN 23-Apr-12 00:58 xnat4tests-0.3.5.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     1832 b- defN 23-Apr-12 00:58 xnat4tests-0.3.5.dist-info/RECORD
+22 files, 49466 bytes uncompressed, 17342 bytes compressed:  64.9%
```

## zipnote {}

```diff
@@ -42,26 +42,26 @@
 
 Filename: xnat4tests/docker-src/supervisord.conf
 Comment: 
 
 Filename: xnat4tests/docker-src/xnat-prefs-init.ini
 Comment: 
 
-Filename: xnat4tests-0.3.4.dist-info/LICENSE
+Filename: xnat4tests-0.3.5.dist-info/LICENSE
 Comment: 
 
-Filename: xnat4tests-0.3.4.dist-info/METADATA
+Filename: xnat4tests-0.3.5.dist-info/METADATA
 Comment: 
 
-Filename: xnat4tests-0.3.4.dist-info/WHEEL
+Filename: xnat4tests-0.3.5.dist-info/WHEEL
 Comment: 
 
-Filename: xnat4tests-0.3.4.dist-info/entry_points.txt
+Filename: xnat4tests-0.3.5.dist-info/entry_points.txt
 Comment: 
 
-Filename: xnat4tests-0.3.4.dist-info/top_level.txt
+Filename: xnat4tests-0.3.5.dist-info/top_level.txt
 Comment: 
 
-Filename: xnat4tests-0.3.4.dist-info/RECORD
+Filename: xnat4tests-0.3.5.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## xnat4tests/_version.py

```diff
@@ -4,18 +4,18 @@
 # unpacked source archive. Distribution tarballs contain a pre-generated copy
 # of this file.
 
 import json
 
 version_json = '''
 {
- "date": "2023-03-29T10:33:26+1100",
+ "date": "2023-04-12T10:38:55+1000",
  "dirty": false,
  "error": null,
- "full-revisionid": "6c4db1518e78c953ec350a945fecc5d71d75f144",
- "version": "v0.3.4"
+ "full-revisionid": "047a12ed30e401216c3e9500b532168b6aa61374",
+ "version": "v0.3.5"
 }
 '''  # END VERSION_JSON
 
 
 def get_versions():
     return json.loads(version_json)
```

## xnat4tests/data.py

```diff
@@ -16,15 +16,15 @@
     get_image as fmap_syngo,
 )
 from .base import connect
 from .config import Config
 from .utils import logger
 
 
-AVAILABLE_DATASETS = ["dummydicom"]
+AVAILABLE_DATASETS = ["dummydicom", "user-training"]
 
 
 @contextmanager
 def set_cwd(path):
     """Sets the current working directory to `path` and back to original
     working directory on exit
 
@@ -68,14 +68,80 @@
             [t1w_syngo(), dwi_syngo(), fmap_syngo()],
             config,
             project_id="dummydicomproject",
             subject_id="dummydicomsubject",
             session_id="dummydicomsession",
         )
 
+    elif dataset == "user-training":
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="CONT01",
+            session_id="CONT01_MR01",
+        )
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="CONT02",
+            session_id="CONT02_MR01",
+        )
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="CONT01",
+            session_id="CONT01_MR02",
+        )
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="CONT02",
+            session_id="CONT02_MR02",
+        )
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="TEST01",
+            session_id="TEST01_MR01",
+        )
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="TEST01",
+            session_id="TEST01_MR02",
+        )
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="TEST02",
+            session_id="TEST02_MR01",
+        )
+
+        _upload_dicom_data(
+            [t1w_syngo(), fmap_syngo()],
+            config,
+            project_id="TRAINING",
+            subject_id="TEST02",
+            session_id="TEST02_MR02",
+        )
+
     else:
         raise RuntimeError(
             f"Unrecognised dataset '{dataset}', can be one of {AVAILABLE_DATASETS}"
         )
 
 
 def _upload_dicom_data(
@@ -96,32 +162,41 @@
     with connect(config) as login:
 
         project_uri = f"/data/archive/projects/{project_id}"
 
         try:
             login.get(project_uri)
         except XNATResponseError:
-            pass
+            login.put(project_uri)
         else:
-            logger.warning(
-                "%s project already exists in test XNAT, skipping add data step",
+            logger.debug(
+                "'%s' project already exists in test XNAT, skipping add data project",
                 project_id,
             )
-            return
-
-        login.put(project_uri)
 
         # Create subject
         query = {
             "xsiType": "xnat:subjectData",
             "req_format": "qs",
             "xnat:subjectData/label": subject_id,
         }
         login.put(f"{project_uri}/subjects/{subject_id}", query=query)
 
+        try:
+            login.get(f"{project_uri}/subjects/{subject_id}/experiments/{session_id}")
+        except XNATResponseError:
+            pass
+        else:
+            logger.info(
+                "'%s' session in '%s' project already exists in test XNAT, skipping",
+                session_id,
+                project_id,
+            )
+            return
+
         dicoms_dir = work_dir / "dicoms"
         dicoms_dir.mkdir()
 
         for i, dcm_dir in enumerate(to_upload):
             shutil.copytree(dcm_dir, dicoms_dir / str(i))
 
         zipped = work_dir / "dicoms.zip"
@@ -148,17 +223,12 @@
                     "Direct-Archive": True,
                     "overwrite": True,
                 },
                 file_=f,
                 content_type="application/zip",
                 method="post",
             )
+        experiment_id = login.projects[project_id].experiments[session_id].id
         # Pull headers and create OHIF headers
-        # login.put(
-        #     f"/data/experiments/{session_id}?pullDataFromHeaders=true"
-        # )
-        # login.put(
-        #     f"/data/experiments/{session_id}?fixScanTypes=true"
-        # )
-        # login.put(
-        #     f"/data/experiments/{session_id}?triggerPipelines=true"
-        # )
+        login.put(f"/data/experiments/{experiment_id}?pullDataFromHeaders=true")
+        login.put(f"/data/experiments/{experiment_id}?fixScanTypes=true")
+        login.put(f"/data/experiments/{experiment_id}?triggerPipelines=true")
```

## Comparing `xnat4tests-0.3.4.dist-info/LICENSE` & `xnat4tests-0.3.5.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `xnat4tests-0.3.4.dist-info/METADATA` & `xnat4tests-0.3.5.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: xnat4tests
-Version: 0.3.4
+Version: 0.3.5
 Summary: Creates basic XNAT instance for API tests
 Home-page: https://github.com/australian-imaging-service/xnat4tests
 Author: Thomas G. Close
 Author-email: tom.g.close@gmail.com
 License: CC0
 Keywords: repository analysis neuroimaging workflows pipelines
 Classifier: Development Status :: 4 - Beta
```

